try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b851acee-c680-4730-af4e-e84ee06218c1",e._sentryDebugIdIdentifier="sentry-dbid-b851acee-c680-4730-af4e-e84ee06218c1")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9211,2558,7346,9131],{51229:function(e,t,r){r.r(t);var n,a,s,o=r(94746);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.default=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),o.createElement("mask",{id:"builder_io_logo_svg__a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n||(n=o.createElement("path",{fill:"#D9D9D9",d:"M0 0h20v20H0z"}))),a||(a=o.createElement("g",{clipPath:"url(#builder_io_logo_svg__b)"},o.createElement("path",{fill:"#18B4F4",d:"M15.77 6.83a3.82 3.82 0 0 1-1.422 2.978L4.13 4.006A.54.54 0 0 1 4.4 3h7.542a3.826 3.826 0 0 1 3.827 3.83"}),o.createElement("path",{fill:"#FD6B3C",d:"M15.77 12.787a3.83 3.83 0 0 1-3.828 3.83H4.4a.541.541 0 0 1-.27-1.006l4.02-2.283 6.196-3.52a3.82 3.82 0 0 1 1.422 2.979"}),o.createElement("path",{fill:"#A97FF2",d:"m14.348 9.808-6.196 3.52L4.13 15.61a.5.5 0 0 0-.107.079 8.42 8.42 0 0 0 2.389-5.882 8.4 8.4 0 0 0-2.388-5.882.6.6 0 0 0 .108.08z"}))),s||(s=o.createElement("defs",null,o.createElement("clipPath",{id:"builder_io_logo_svg__b"},o.createElement("path",{fill:"#fff",d:"M3 3h13.63v13.63H3z"})))))}},57931:function(e,t,r){r.r(t);var n,a,s=r(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.default=function(e){return s.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),s.createElement("mask",{id:"figma_logo_color_svg__a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n||(n=s.createElement("path",{fill:"#D9D9D9",d:"M0 0h20v20H0z"}))),a||(a=s.createElement("g",{mask:"url(#figma_logo_color_svg__a)"},s.createElement("path",{fill:"#24CB71",d:"M5 14.358a2.27 2.27 0 0 1 2.272-2.271h2.271v2.271a2.272 2.272 0 0 1-4.543 0"}),s.createElement("path",{fill:"#FF7237",d:"M9.543 3v4.543h2.272a2.272 2.272 0 0 0 0-4.543z"}),s.createElement("path",{fill:"#00B6FF",d:"M11.796 12.087a2.272 2.272 0 1 0 0-4.544 2.272 2.272 0 0 0 0 4.543"}),s.createElement("path",{fill:"#FF3737",d:"M5 5.272a2.27 2.27 0 0 0 2.272 2.271h2.271V3H7.272A2.27 2.27 0 0 0 5 5.272"}),s.createElement("path",{fill:"#874FFF",d:"M5 9.815a2.27 2.27 0 0 0 2.272 2.271h2.271V7.543H7.272A2.27 2.27 0 0 0 5 9.815"}))))}},7593:function(e,t,r){r.r(t);var n,a,s=r(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.default=function(e){return s.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),s.createElement("mask",{id:"figma_logo_outline_svg__a",width:21,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n||(n=s.createElement("path",{fill:"#D9D9D9",d:"M.286 0h20v20h-20z"}))),a||(a=s.createElement("g",{mask:"url(#figma_logo_outline_svg__a)"},s.createElement("path",{fill:"#fff",stroke:"#fff",strokeWidth:.25,d:"M5.772 5.716c0 .872.419 1.647 1.065 2.134a2.67 2.67 0 0 0-1.065 2.135c0 .873.419 1.647 1.065 2.135a2.67 2.67 0 0 0-1.065 2.134 2.68 2.68 0 0 0 2.683 2.67 2.704 2.704 0 0 0 2.705-2.693v-2.106c.446.333 1 .53 1.599.53h.046a2.67 2.67 0 0 0 1.606-4.805 2.67 2.67 0 0 0-1.606-4.805H8.443a2.67 2.67 0 0 0-2.67 2.67Zm6.987 5.867a1.598 1.598 0 0 1 0-3.196h.046a1.598 1.598 0 1 1 0 3.196zM8.443 8.387h1.645v3.196h-1.65a1.598 1.598 0 0 1 .005-3.196Zm-.005 4.269h1.65v1.575c0 .892-.734 1.621-1.633 1.621-.887 0-1.61-.719-1.61-1.598s.712-1.595 1.592-1.598Zm1.65-5.342H8.443a1.598 1.598 0 1 1 0-3.196h1.645zm2.717 0H11.16V4.118h1.645a1.598 1.598 0 1 1 0 3.196Z"}))))}},85024:function(e,t,r){r.r(t);var n,a,s,o,i,l,d,c,u,f,p,m=r(94746);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.default=function(e){return m.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),m.createElement("mask",{id:"lovable_logo_color_svg__a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n||(n=m.createElement("path",{fill:"#D9D9D9",d:"M0 0h20v20H0z"}))),m.createElement("g",{mask:"url(#lovable_logo_color_svg__a)"},m.createElement("mask",{id:"lovable_logo_color_svg__b",width:16,height:14,x:2,y:3,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},a||(a=m.createElement("path",{fill:"#fff",d:"M9.66 16.63q-.229 0-.462-.083a1.1 1.1 0 0 1-.405-.255l-1.118-1.028a55 55 0 0 1-3.967-4.032Q2 9.288 2 7.1q0-1.75 1.175-2.924Q4.349 3 6.085 3q.99 0 1.929.456.938.457 1.647 1.42.772-.963 1.672-1.42A4.15 4.15 0 0 1 13.236 3q1.737 0 2.911 1.175 1.175 1.174 1.175 2.924 0 2.19-1.705 4.136-1.704 1.948-3.977 4.035l-1.11 1.022q-.173.172-.406.255t-.463.083"}))),m.createElement("g",{mask:"url(#lovable_logo_color_svg__b)"},s||(s=m.createElement("path",{fill:"#FF1814",d:"M9.66 16.63q-.229 0-.462-.083a1.1 1.1 0 0 1-.405-.255l-1.118-1.028a55 55 0 0 1-3.967-4.032Q2 9.288 2 7.1q0-1.75 1.175-2.924Q4.349 3 6.085 3q.99 0 1.929.456.938.457 1.647 1.42.772-.963 1.672-1.42A4.15 4.15 0 0 1 13.236 3q1.737 0 2.911 1.175 1.175 1.174 1.175 2.924 0 2.19-1.705 4.136-1.704 1.948-3.977 4.035l-1.11 1.022q-.173.172-.406.255t-.463.083"})),o||(o=m.createElement("g",{filter:"url(#lovable_logo_color_svg__c)"},m.createElement("ellipse",{cx:11.802,cy:19.643,fill:"#FFAB25",rx:5.793,ry:5.868,transform:"rotate(-105 11.802 19.643)"}))),i||(i=m.createElement("g",{filter:"url(#lovable_logo_color_svg__d)"},m.createElement("ellipse",{cx:15.459,cy:18.663,fill:"#FFAB25",rx:5.793,ry:5.868,transform:"rotate(-105 15.459 18.663)"}))),l||(l=m.createElement("g",{filter:"url(#lovable_logo_color_svg__e)"},m.createElement("ellipse",{cx:6.185,cy:13.309,fill:"#FFAB25",rx:5.793,ry:5.868,transform:"rotate(-105 6.185 13.309)"}))),d||(d=m.createElement("g",{filter:"url(#lovable_logo_color_svg__f)"},m.createElement("ellipse",{cx:9.842,cy:12.329,fill:"#FFAB25",rx:5.793,ry:5.868,transform:"rotate(-105 9.842 12.33)"}))),c||(c=m.createElement("g",{filter:"url(#lovable_logo_color_svg__g)"},m.createElement("circle",{cx:-3.362,cy:5.892,r:6.489,fill:"#BE2B29",transform:"rotate(2.384 -3.362 5.892)"}))),u||(u=m.createElement("g",{filter:"url(#lovable_logo_color_svg__h)"},m.createElement("ellipse",{cx:4.879,cy:4.221,fill:"#00C986",rx:4.879,ry:4.221,transform:"matrix(-.67039 -.742 .73084 -.68255 14.35 10.32)"}))),m.createElement("g",{filter:"url(#lovable_logo_color_svg__i)",style:{mixBlendMode:"hard-light"}},f||(f=m.createElement("ellipse",{cx:5.5,cy:4.755,fill:"#297FFF",rx:5.5,ry:4.755,transform:"matrix(-.67039 -.742 .73084 -.68255 17.313 14.435)"}))))),p||(p=m.createElement("defs",null,m.createElement("filter",{id:"lovable_logo_color_svg__c",width:22.634,height:22.503,x:.485,y:8.392,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})),m.createElement("filter",{id:"lovable_logo_color_svg__d",width:22.634,height:22.503,x:4.142,y:7.412,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})),m.createElement("filter",{id:"lovable_logo_color_svg__e",width:22.634,height:22.503,x:-5.132,y:2.058,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})),m.createElement("filter",{id:"lovable_logo_color_svg__f",width:22.634,height:22.503,x:-1.475,y:1.078,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})),m.createElement("filter",{id:"lovable_logo_color_svg__g",width:32.364,height:32.364,x:-19.544,y:-10.29,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:4.846})),m.createElement("filter",{id:"lovable_logo_color_svg__h",width:19.896,height:20.158,x:4.217,y:-6.26,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})),m.createElement("filter",{id:"lovable_logo_color_svg__i",width:21.037,height:21.333,x:6.583,y:-3.558,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),m.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_7991_4293",stdDeviation:2.726})))))}},76678:function(e,t,r){r.d(t,{g:function(){return i}});var n=r(57437),a=r(67150),s=r(97050),o=r(26110);function i(){return(0,n.jsxs)(o.cZ,{className:"max-h-[90vh] overflow-y-auto md:max-w-7xl",children:[(0,n.jsx)(o.fK,{children:(0,n.jsx)(o.$N,{className:"text-2xl",children:"Upgrade to Pro and unlock more features & usage"})}),(0,n.jsx)(s.Z,{plans:a.o9})]})}},1673:function(e,t,r){r.d(t,{v:function(){return o}});var n=r(57437),a=r(27648),s=r(35974);let o=e=>{let{plan:t,className:r,link:o}=e;return!0===o?(0,n.jsx)(a.default,{href:"/settings/plans",className:r,children:(0,n.jsx)(s.C,{variant:"outline",children:t})}):(0,n.jsx)(s.C,{variant:"outline",className:r,children:t})}},52558:function(e,t,r){r.d(t,{E:function(){return p},H:function(){return m}});var n=r(57437),a=r(99376),s=r(2265),o=r(28667),i=r(66454),l=r(78099),d=r(21288);let c=()=>{let[e,t,r]=(0,o.F_)(l.I);return[e,t,r]},u=(0,s.createContext)(void 0),f=null,p=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e},m=e=>{let{user:t,children:r}=e,[p,m]=(0,s.useState)(!1),[g]=c(),[h,v,_]=(0,o.QJ)(l.I),y=(0,a.useRouter)();return(0,s.useEffect)(()=>{t&&t.idToken&&i.g.setServerIdToken(t.idToken)},[t]),(0,s.useEffect)(()=>((async function(){if(!t){m(!1),f&&(clearInterval(f),f=null);return}await (0,l.j)(t.customToken,!0),m(!0),f||(f=setInterval(async()=>{let e=l.I.currentUser;if(!e){await (0,l.j)(t.customToken,!0);return}try{await e.getIdToken(!0)}catch(e){var r;d.PW.error("AuthProvider: Failed to refresh Firebase token",{error:e,userId:null===l.I||void 0===l.I?void 0:null===(r=l.I.currentUser)||void 0===r?void 0:r.uid})}y.replace("?should-refresh-credentials=1"),y.refresh()},18e5))})(),()=>{!t&&f&&(clearInterval(f),f=null)}),[t,y]),(0,s.useEffect)(()=>{!t&&g&&(d.PW.info("Setting user cookie based on IndexDB and deleting IndexDB"),g.getIdToken().then(async e=>{try{if((await fetch("/api/login",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).ok){y.replace("?should-refresh-credentials=1"),d.PW.info("Successfully set auth cookies");let e=new URLSearchParams(window.location.search).get("redirect");e&&y.push(e),y.refresh()}else d.PW.info("Failed to set auth cookies. Did not remove IndexedDB.")}catch(e){d.PW.warn("Unknown error when trying to set auth cookies. Did not remove IndexedDB.",{error:e})}}))},[g,y,h,t]),(0,n.jsx)(u.Provider,{value:{authUser:t,isInitialized:p},children:r})}},72116:function(e,t,r){r.d(t,{Cg:function(){return i},hP:function(){return g},zL:function(){return m}});var n=r(6273),a=r(31229),s=r(21288);let o=new n.XMLParser({ignoreAttributes:!1,preserveOrder:!0,trimValues:!0}),i=e=>null!=e&&"object"==typeof e&&"type"in e&&"tool_use"===e.type&&"name"in e&&"data"in e&&"done"in e;a.z.object({type:a.z.literal("lov-sql"),lovSql:a.z.string(),done:a.z.boolean()});let l=a.z.object({type:a.z.literal("lov_action__link"),url:a.z.string(),text:a.z.string()}),d=a.z.object({type:a.z.literal("lov_action__migrate"),done:a.z.boolean()}),c=a.z.object({type:a.z.literal("lov_action__message_prompt"),message:a.z.string(),text:a.z.string()}),u=a.z.object({type:a.z.literal("lov_action__knowledge")}),f=a.z.object({type:a.z.literal("lov_action__secret_form"),name:a.z.string()}),p=a.z.union([l,d,c,u,f]);function m(e){return e.parts.filter(e=>"done"in e&&e.done&&("search_replace_parts"in e||"content"in e)).length}function g(e){let t=[],r=[],n=null,a=!1,l=!1,d=!1,c=!1,u=!1,f=!1,m=!1,g="",v="",_="",y="",w=null,b="";function E(){var e,E,x,k,R;if(_.trim().startsWith("<lov-tool-use")){m=!0;let e=(y=_).match(/name="([^"]*)"/),r=y.match(/data="(\{[\s\S]*?\})"/);if(e&&r&&n){let s=h(r[1]);a&&n&&"parts"in n?n.parts.push({type:"tool_use",name:e[1],data:r[1],parsedData:s,done:!1}):(t.push(n),t.push({type:"tool_use",name:e[1],data:r[1],parsedData:s,done:!1}),n={type:"text",content:""})}}else if(m){if(y+=_,_.includes("</lov-tool-use>")){if(m=!1,a&&n&&"parts"in n){let e=n.parts.findLastIndex(e=>"tool_use"===e.type);e>=0&&(n.parts[e].done=!0)}else{let e=t.findLastIndex(e=>i(e));e>=0&&(t[e].done=!0)}}}else if("<thinking>"===_.trim())_="";else if("</thinking>"===_.trim())_="";else if("<lov-code>"===_.trim())n&&t.push(n),a=!0,n={parts:[],done:!1};else if("</lov-code>"===_.trim())n&&"done"in n&&(n.done=!0,t.push(n),n=null),a=!1;else if("<lov-sql>"===_.trim())n&&t.push(n),l=!0,n={type:"lov-sql",lovSql:"",done:!1};else if("</lov-sql>"===_.trim())n&&"lovSql"in n&&(n.done=!0,t.push(n),r.find(e=>"lov_action__migrate"===e.type)||r.push({type:"lov_action__migrate",done:!0}),n=null),l=!1;else if("<lov-actions>"===_.trim())f=!0;else if("</lov-actions>"===_.trim())f=!1,r.push(...function(e){try{return o.parse(e).map(e=>{try{var t,r,n,a,o,i,l;if("lov-link"in e)return{type:"lov_action__link",url:null===(t=e[":@"])||void 0===t?void 0:t["@_url"],text:null===(n=e["lov-link"])||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r["#text"]};if("lov-knowledge"in e)return{type:"lov_action__knowledge"};if("lov-message-prompt"in e)return{type:"lov_action__message_prompt",message:null===(a=e[":@"])||void 0===a?void 0:a["@_message"],text:null===(i=e["lov-message-prompt"])||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o["#text"]};if("lov-secret-form"in e)return{type:"lov_action__secret_form",name:null===(l=e[":@"])||void 0===l?void 0:l["@_name"]};return s.PW.error("Unknown Lov action",{node:e}),null}catch(t){return s.PW.error("Error processing XML node",{error:t,node:e}),null}}).filter(e=>null!==e).reduce((e,t)=>{let r=p.safeParse(t);return r.success?e.push(r.data):s.PW.error("Failed to validate Lov action",{action:t,error:r.error}),e},[])}catch(t){return s.PW.error("Error parsing XML in parseLovActions",{error:t,input:e}),[]}}(b)),b="";else if(_.startsWith('<lov-write file_path="'))d=!0,v=(null===(e=_.match(/"([^"]*)"/))||void 0===e?void 0:e[1])||"",a&&n&&"parts"in n&&n.parts.push({type:"writing_file",file_path:v,content:"",done:!1});else if(_.startsWith('<lov-search-replace file_path="'))c=!0,v=(null===(E=_.match(/"([^"]*)"/))||void 0===E?void 0:E[1])||"",a&&n&&"parts"in n&&n.parts.push({type:"edit",file_path:v,search_replace_parts:[],done:!1});else if(_.startsWith('<lov-delete file_path="'))u=!0,v=(null===(x=_.match(/"([^"]*)"/))||void 0===x?void 0:x[1])||"",a&&n&&"parts"in n&&n.parts.push({type:"delete",file_path:v});else if(_.startsWith('<lov-rename original_file_path="')){let e=(null===(k=_.match(/original_file_path="([^"]*)"/))||void 0===k?void 0:k[1])||"",t=(null===(R=_.match(/new_file_path="([^"]*)"/))||void 0===R?void 0:R[1])||"";a&&n&&"parts"in n&&n.parts.push({type:"rename",original_file_path:e,new_file_path:t})}else if(_.startsWith("<lov-add-dependency>"))g=_.replace("<lov-add-dependency>","").replace("</lov-add-dependency>","").trim(),a&&n&&"parts"in n&&n.parts.push({type:"add_dependency",dependency:g,isDevDependency:!1});else if("</lov-add-dependency>"===_.trim())g="";else if(_.startsWith("<lov-add-dev-dependency>"))g=_.replace("<lov-add-dev-dependency>","").replace("</lov-add-dev-dependency>","").trim(),a&&n&&"parts"in n&&n.parts.push({type:"add_dependency",dependency:g,isDevDependency:!0});else if(_.startsWith("<lov-remove-dependency>")){let e=_.replace("<lov-remove-dependency>","").replace("</lov-remove-dependency>","").trim();a&&n&&"parts"in n&&n.parts.push({type:"remove_dependency",removed_dependency:e})}else if("</lov-remove-dependency>"===_.trim())g="";else if("</lov-write>"===_.trim()||"</lov-search-replace>"===_.trim()||"/>"===_.trim()&&u){if(d=!1,c=!1,u=!1,v="",a&&n&&"parts"in n){let e=n.parts[n.parts.length-1];"done"in e&&(e.done=!0)}}else if(a){if(m);else if(n&&"parts"in n){if(n.parts.length>0){let e=n.parts[n.parts.length-1];if(d&&"content"in e)e.content+=_;else if(c&&"search_replace_parts"in e){if("<lov-search>"===_.trim())e.search_replace_parts.push({search:"",replace:""}),w="search";else if("<lov-replace>"===_.trim())w="replace";else if("</lov-search>"===_.trim()||"</lov-replace>"===_.trim())w=null;else{let t=e.search_replace_parts[e.search_replace_parts.length-1];t&&w&&(t[w]+=_)}}else n.parts.push({type:"text",content:_})}else n.parts.push({type:"text",content:_})}}else l?n&&"lovSql"in n&&(n.lovSql+=_):f?b+=_:(n&&"content"in n||(n={type:"text",content:""}),"content"in n&&(n.content+=_));_=""}for(let t of e)_+=t,"\n"===t&&E();return _&&E(),n&&t.push(n),{parts:t,lovActions:r}}let h=e=>{try{return JSON.parse(e)}catch(a){let t;let r={},n=/"([^"]+)":\s*(?:"([^"]*)"|(true|false|null|\d+(?:\.\d+)?))/g;for(;null!==(t=n.exec(e));){let e=t[1],n=void 0!==t[2]?t[2]:t[3];r[e]=n}return Object.keys(r).length>0?r:e}}},94311:function(e,t,r){r.d(t,{b:function(){return l}});var n=r(2265),a=r(89651),s=r(21288),o=r(82246);let i={message:"",wasCleared:!0},l=e=>{let{localStorageKey:t}=e,[r,l]=(0,a.Z)("ChatInput-ChatMessage-".concat(t),{defaultValue:i,storageSync:!1,serializer:{parse:e=>{let t=JSON.parse(e);return"string"==typeof t?{message:t,wasCleared:!0}:t},stringify:JSON.stringify}}),d=(0,o.Eh)(e=>e.chatMessage),c=(0,o.Eh)(e=>e.setChatMessage);return(0,n.useEffect)(()=>{r.message&&!r.wasCleared&&c(r.message)},[t,c,r]),{chatMessage:d,setChatMessage:e=>{if(!t){s.PW.error("project_id_required_to_set_chat_message");return}c(e),l({message:e,wasCleared:!1})},clearChatMessage:()=>{c(""),l(e=>({...e,wasCleared:!0}))},restoreChatMessage:()=>{c(r.message),l(e=>({...e,wasCleared:!1}))}}}},44831:function(e,t,r){r.d(t,{O:function(){return E},m:function(){return b}});var n=r(21770),a=r(46214),s=r(2265),o=r(14438),i=r(49340),l=r(49131),d=r(35034),c=r(21288),u=r(34495),f=r(13673),p=r(82246),m=r(2925),g=r(83856),h=r(20958),v=r(72116),_=r(94311),y=r(88746),w=r(32935);function b(e){let t=(0,h.CR)();return E({...e,repoAccessibility:t})}function E(e){let{projectId:t,onRepoInaccessible:r,onSubmit:h,autoSwitchToCode:b=!1,onSuccess:E,localStorageKey:x,repoAccessibility:k}=e,R=(0,m.u)(e=>e.currentPage),j=(0,f.ZP)(e=>e.setIsOutOfCreditsDialogOpen),S=(0,p.Eh)(e=>e.setLatestStreamedMessage),{restoreChatMessage:C}=(0,_.b)({localStorageKey:x}),I=(0,p.Eh)(e=>e.exitConsole),N=(0,f.ZP)(e=>e.setMessage),[P]=(0,i.a)(),A=null==P?void 0:P.uid,O=(0,f.ZP)(e=>e.removeMessage),M=(0,p.Eh)(e=>e.addAbortController),T=(0,p.Eh)(e=>e.removeAbortController),D=(0,p.Eh)(e=>e.setShouldShowTipsAndTricksOnDevServerStart),U=(0,u.DW)(),z=(0,s.useRef)(null),B=async(e,n)=>{let s=n||t;if(!s){c.PW.error("Project ID is required to send chat message");return}if(k&&(null==k?void 0:k.accessibility)!=="repo_accessible"&&(null==k?void 0:k.accessibility)!=="repo_not_found"){r&&r(),C(),o.Am.error("We couldn't access this project repository."),e.id&&O(e.id);return}let{runtimeErrors:i}=U.store.getState(),d=g.QE.length,u=g.vM.length;e.client_logs=[...g.QE.slice(Math.max(d-50,0),d)],e.network_requests=[...g.vM.slice(Math.max(u-50,0),u)],e.runtime_errors=[...i],U.clearDiagnostics(),g.QE.length=0,g.vM.length=0;let f="";z.current=new AbortController,M(z.current),performance.mark("start-request");let m=!1,h=(0,l.S)();await h.postWithStreaming("/projects/".concat(s,"/chat"),e,t=>{if("message"!==t.type){c.PW.error("received_unknown_chat_sse",{event_type:t.type,event_data:t.data});return}let r=t.data.message;if(!m){m=!0,performance.mark("first-token");let t=performance.measure("start-request","start-request","first-token");a.ZP.capture("time_to_first_token",{duration:t.duration,project_id:s,user_id:A,chat_only:!!e.chat_only,is_creation:!!n})}let o=p.Eh.getState();if(o.isMessageStopped(r.id))return"stop";let i={...r,stopped:!!r.stopped,status:"running"};S(i);let l=(0,w.AR)(i);if(l&&("aiMessage"===l.type||"userMessage"===l.type)?N(r.id,l,!0):c.PW.error("unknown_message_type",{message:r}),r.content.includes("</lov-code>")&&!f.includes("</lov-code>")?(I(),g.QE.length=0):r.content.includes("<lov-code>")&&!f.includes("<lov-code>")&&(o.consoleContentType,b&&(o.setShowConsole("code"),r.id&&o.setActiveMessageId(r.id))),r.content&&r.id===o.activeMessageId)for(let e of(0,v.hP)(r.content).parts)"parts"in e&&(o.setConsoleCodeContent(e),f=r.content)},z.current.signal),performance.mark("end-request");let _=performance.measure("start-request","start-request","end-request");a.ZP.capture("time_to_last_token",{duration:_.duration,project_id:s,user_id:A,chat_only:!!e.chat_only,is_creation:!!n}),f="",S(void 0),z.current&&T(z.current)},F=(0,p.Eh)(e=>e.setIsSendChatMessageMutationPending),{showErrorDialog:W}=(0,y.t)();return(0,n.D)({mutationFn:async e=>{let{body:t,projectId:r,isCreation:n}=e;return t.current_page=R,F(!0),n&&D(!0),B(t,r)},onMutate:e=>{var t,r;let{body:{optimisticImageContentFiles:n,...a},clear:s}=e;a.current_page=R;let o={id:a.id,createdAt:new Date,role:"user",type:"userMessage",selectedElements:null!==(t=a.selected_elements)&&void 0!==t?t:[],content:a.message,tags:null!==(r=a.tags)&&void 0!==r?r:[],images:[],containsError:!!a.contains_error,userId:A,optimistImageUrls:null==n?void 0:n.map(e=>URL.createObjectURL(e))};N(a.id,o,!1),null==h||h(a.message),null==s||s()},onSettled:()=>{F(!1),D(!1)},onSuccess:()=>{null==E||E()},onError:(e,t)=>{var r,n,s,o;let{body:i,restore:l}=t;O(i.id),"AbortError"!==e.name&&(e instanceof d.O?429===e.status?(c.PW.error("rate_limit_exceeded",{error:e}),W(e.message,!1)):402===e.status?(j(!0),a.ZP.capture("out_of_credits_dialog_opened")):503===e.status?(c.PW.error("send_chat_request_service_unavailable",{error:e}),W(e.response.details,!1)):e.status>=500?(c.PW.error("send_chat_request_internal_error",{error:e}),W(e.message,!1)):(c.PW.error("send_chat_request_failed",{error:e}),W((null===(r=e.response)||void 0===r?void 0:r.detail)||(null===(n=e.response)||void 0===n?void 0:n.details)||e.message||"Request failed",!1)):"message"in e&&"type"in e?(c.PW.error("send_chat_request_error",{error:e}),W(e.message,!1)):(c.PW.error("send_chat_request_unknown_reason",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,isOnline:navigator.onLine,errorType:e instanceof TypeError?"NetworkError":"ApplicationError",isNetworkError:null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.includes("Failed to fetch"),isCorsError:null==e?void 0:null===(o=e.message)||void 0===o?void 0:o.includes("CORS"),isTimeout:(null==e?void 0:e.name)==="TimeoutError",isAbort:(null==e?void 0:e.name)==="AbortError",isDomException:e instanceof DOMException,error:e}),W()),null==l||l())}})}},32935:function(e,t,r){r.d(t,{AR:function(){return l},Oh:function(){return d},dX:function(){return c}});var n=r(5978),a=r(49360),s=r(21288);let o=[],i=e=>"string"==typeof e?new Date(e):e instanceof n.EK?e.toDate():new n.EK(e.seconds,e.nanoseconds).toDate(),l=(e,t)=>{var r,n,a,l,d,c,u,f,p,m,g,h,v,_,y,w,b;switch(e.tag){case"instant-mode-message":if("user"===e.role)return{createdAt:i(e.created_at),role:"user",id:e.id,content:e.content,type:"userMessage",selectedElements:null!==(r=e.selected_elements)&&void 0!==r?r:o,images:null!==(n=e.images)&&void 0!==n?n:o,containsError:null!==(a=e.contains_error)&&void 0!==a&&a,tags:null!==(l=e.tags)&&void 0!==l?l:o,userId:null!==(d=e.user_id)&&void 0!==d?d:void 0};return{createdAt:i(e.created_at),role:"ai",id:e.id,content:e.content,type:"aiMessage",editId:null!==(u=e.edit_id)&&void 0!==u?u:void 0,stopped:!!e.stopped,errors:null!==(f=null===(c=e.errors)||void 0===c?void 0:c.sort((e,t)=>t.created_at.seconds-e.created_at.seconds))&&void 0!==f?f:void 0,langsmithUrl:null!==(p=e.langsmith_url)&&void 0!==p?p:void 0,sqlRunState:null!==(m=e.sql_run_state)&&void 0!==m?m:void 0,persisted:null!==(g=null==t?void 0:t.persisted)&&void 0!==g&&g,status:null!==(h=e.status)&&void 0!==h?h:"completed",thinkingTimeMs:null!==(v=e.thinking_time_ms)&&void 0!==v?v:void 0};case"branch-switched":return{createdAt:i(e.created_at),id:e.id,type:"branchSwitched",branchName:e.branch_name};case"external-commit-pushed":return{createdAt:i(e.created_at),id:e.id,type:"userCommit",shortCommitHash:null!==(_=e.commit_hash)&&void 0!==_?_:void 0,commitMessage:e.commit_message};case"revert-success-v2":return{createdAt:i(e.created_at),id:e.id,type:"revertSuccessv2",shortCommitHash:null!==(y=e.commit_hash)&&void 0!==y?y:void 0,editId:e.edit_id};case"revert-success":return{createdAt:i(e.created_at),id:e.id,type:"revertSuccess",shortCommitHash:null!==(w=e.commit_hash)&&void 0!==w?w:void 0,editId:null!==(b=e.edit_id)&&void 0!==b?b:""};case"manual-edit":return{createdAt:i(e.created_at),id:e.id,type:"manualEdit",content:e.content,editId:e.edit_id};case"revert":if("user"===e.role)return{createdAt:i(e.created_at),id:e.id,type:"userMessage",content:e.content,containsError:!1,tags:[],images:[],selectedElements:[],userId:e.user_id,role:"user"};return{createdAt:i(e.created_at),id:e.id,type:"aiMessage",content:e.content,role:"ai",persisted:!0,status:"completed",sqlRunState:void 0,stopped:!1};default:return s.PW.error("Unknown message tag",{message:e}),null}},d=(e,t)=>{let r={};return e.forEach(e=>{let n=e.data(),a=l(n,t);a&&(r[n.id]=a)}),r},c=()=>"msg-".concat((0,a.Z)())},88746:function(e,t,r){r.d(t,{Y:function(){return d},t:function(){return l}});var n=r(57437),a=r(46214),s=r(59625),o=r(62869),i=r(26110);let l=(0,s.Ue)(e=>({open:!1,errorMessage:null,showTryAgain:!0,showErrorDialog:function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return a.ZP.capture("error_dialog_shown",{error_message:t,show_try_again:r}),e({open:!0,errorMessage:t,showTryAgain:r})},closeError:()=>e({open:!1,errorMessage:null,showTryAgain:!0})}));function d(){let{open:e,errorMessage:t,closeError:r,showTryAgain:s}=l();return(0,n.jsx)(i.Vq,{open:e,onOpenChange:e=>{e||(a.ZP.capture("error_dialog_closed",{action:"backdrop",error_message:t}),r())},children:(0,n.jsxs)(i.cZ,{children:[(0,n.jsxs)(i.fK,{children:[(0,n.jsx)(i.$N,{children:"Error"}),(0,n.jsxs)(i.Be,{children:[(t||"An unexpected error occurred. ").split("\n").map((e,r)=>(0,n.jsxs)("span",{children:[e,r!==(t||"An unexpected error occurred. ").split("\n").length-1&&(0,n.jsx)("br",{})]},r)),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"Please try again later."})]})]})]}),(0,n.jsxs)(i.cN,{className:"gap-2",children:[(0,n.jsx)(o.z,{variant:"outline",onClick:()=>{a.ZP.capture("error_dialog_closed",{action:"get_help",error_message:t}),r(),window.open("https://docs.lovable.dev/#stay-connected","_blank")},children:"Get help"}),(0,n.jsx)(o.z,{onClick:()=>{a.ZP.capture("error_dialog_closed",{action:"ok",error_message:t}),r()},children:"Dismiss"})]})]})})}},29461:function(e,t,r){r.d(t,{RootDialog:function(){return d},z:function(){return l}});var n=r(57437),a=r(2265),s=r(59625),o=r(26110);let i=(0,s.Ue)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function l(e){let t=i(e=>e.setOpenDialog);return r=>{r?t({component:e,...r}):t(null)}}let d=()=>{let e=i(e=>e.openDialog),t=i(e=>e.setOpenDialog);if((0,a.useEffect)(()=>{if(e){var t,r;null===(r=e.dialogProps)||void 0===r||null===(t=r.onOpen)||void 0===t||t.call(r)}},[e]),!e)return null;let{component:r,dialogProps:s,childProps:l}=e;return(0,n.jsx)(o.Vq,{...s,open:!!e,onOpenChange:e=>{var r;e||t(null),null==s||null===(r=s.onOpenChange)||void 0===r||r.call(s,e)},children:(0,n.jsx)(r,{...l})})}},2925:function(e,t,r){r.d(t,{u:function(){return n}});let n=(0,r(59625).Ue)(e=>({currentPage:"index",setCurrentPage:t=>e({currentPage:t})}))},83856:function(e,t,r){r.d(t,{QE:function(){return g},vM:function(){return h},uL:function(){return _}});var n=r(57437),a=r(2265),s=r(48614),o=r(1188),i=e=>{let{isLoading:t}=e,[r,i]=(0,a.useState)(0),[l,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t&&(i(0),d(!0))},[t]),(0,a.useEffect)(()=>{if(!t){i(100);return}let e=[];return[{duration:150,increment:15},{duration:250,increment:10},{duration:400,increment:5},{duration:500,increment:3},{duration:650,increment:3},{duration:750,increment:3},{duration:1500,increment:2},{duration:2e3,increment:1},{duration:3e3,increment:1},{duration:4e3,increment:1},{duration:5e3,increment:1},{duration:6e3,increment:1},{duration:7e3,increment:1},{duration:1e4,increment:1},{duration:14e3,increment:1}].forEach(t=>{let{duration:r,increment:n}=t,a=setTimeout(()=>{i(e=>e<75?e+n+2*Math.random():e)},r);e.push(a)}),()=>{e.forEach(e=>clearTimeout(e))}},[t]),(0,n.jsx)("div",{className:"pointer-events-none absolute left-0 right-0 top-0 h-[3px] w-full overflow-hidden bg-transparent",children:(0,n.jsx)(s.M,{children:l&&(0,n.jsx)(o.E.div,{className:"h-full bg-accent",initial:{width:0,opacity:1},animate:{width:"".concat(Math.min(r,100),"%"),opacity:1},exit:{opacity:0,transition:{delay:.2,duration:.3}},transition:{width:{duration:.15,bounce:0}},onAnimationComplete:()=>{t||d(!1)}})})})},l=r(90432),d=r(36710),c=r(21288),u=r(34495),f=r(61062),p=r(7163),m=r(82246);let g=[],h=[],v=e=>{var t,r,n,a,s,o,i,l;let d=Object.entries(e.headers||{}).reduce((e,t)=>{let[r,n]=t;return e+r.length+String(n).length},0);return((null===(t=e.responseBody)||void 0===t?void 0:t.length)||0)+((null===(r=e.requestBody)||void 0===r?void 0:r.length)||0)+((null===(a=e.error)||void 0===a?void 0:null===(n=a.message)||void 0===n?void 0:n.length)||0)+((null===(o=e.error)||void 0===o?void 0:null===(s=o.stack)||void 0===s?void 0:s.length)||0)+((null===(i=e.url)||void 0===i?void 0:i.length)||0)+((null===(l=e.statusText)||void 0===l?void 0:l.length)||0)+d},_=e=>{let{baseUrl:t,hidden:r=!1,projectId:s,useCustomScript:o=!1}=e,_=(0,m.Eh)(e=>e.isSendChatMessageMutationPending),[y,w]=(0,a.useState)(!0),[b,E]=(0,a.useState)(t),x=(0,a.useRef)(null),k=(0,a.useRef)(!1),R=(0,d.O)(),{errors:j}=(0,l.hT)({projectId:s}),S=(0,u.DW)();(0,a.useEffect)(()=>{if(t){var e;let r=(null===(e=x.current)||void 0===e?void 0:e.src)?new URL(x.current.src).pathname:"";E(r.startsWith("/")&&t.endsWith("/")?t+r.slice(1):t+r)}},[t]);let[C,I]=(0,a.useState)();(0,a.useEffect)(()=>{let e=e=>{"URL_CHANGED"===e.data.type&&x.current?E(e.data.url):"404"===e.data&&w(!1)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]),(0,a.useEffect)(()=>{if(!window)return;let e=e=>{let t=e.data.type;if("string"!=typeof t){c.PW.warn("unexpected_message_event_type",{event_data:e.data});return}if("URL_CHANGED"===t&&E(t=>{try{if(!t)return e.data.url;{let r=new URL(t),n=new URL(e.data.url);if(r.pathname===n.pathname)return t;return r.pathname=n.pathname,r.toString()}}catch(e){return t}}),"USER_SNAPSHOT"===t&&"string"==typeof e.data.snapshot)try{I(function(e,t){if(!e.startsWith("data:image/png;base64,"))throw Error("Invalid base64 string");let r=atob(e.split(",")[1]),n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return new File([n],t,{type:"image/png"})}(e.data.snapshot,"snapshot.png"))}catch(e){}if("CONSOLE_OUTPUT"===t){let t={level:e.data.level,message:e.data.message,logged_at:e.data.logged_at};t.message.length>1e4&&(t.message=t.message.slice(0,1e4)),g.push(t);let r=g.reduce((e,t)=>e+t.message.length,0);for(;r>1e4||g.length>50;){let e=g.shift();if(!e)break;r-=e.message.length}}if("NETWORK_REQUEST"===t){let t={...e.data.request};t.responseBody&&t.responseBody.length>1e4&&(t.responseBody=t.responseBody.slice(0,1e4)),t.requestBody&&t.requestBody.length>1e4&&(t.requestBody=t.requestBody.slice(0,1e4)),t.error&&(t.error.message&&t.error.message.length>1e4&&(t.error.message=t.error.message.slice(0,1e4)),t.error.stack&&t.error.stack.length>1e4&&(t.error.stack=t.error.stack.slice(0,1e4))),t.url&&t.url.length>1e4&&(t.url=t.url.slice(0,1e4)),t.statusText&&t.statusText.length>1e4&&(t.statusText=t.statusText.slice(0,1e4)),h.push(t);let r=h.reduce((e,t)=>e+v(t),0);for(;r>1e5||h.length>50;){let e=h.shift();if(!e)break;r-=v(e)}}if(("RUNTIME_ERROR"===t||"UNHANDLED_PROMISE_REJECTION"===t)&&S.addRuntimeError(e.data.error,t),"FETCH_ERROR"===e.data.type){let t=p.W3.safeParse(e.data.error),r=t.success?t.data:e.data.error;t.error&&c.PW.error("error_parsing_fetch_error",{error:t.error,event_data:e.data}),"status"in r&&(null==r?void 0:r.status)>=400&&(null==r?void 0:r.status)<500?(0,l.eK)({...r,error_type:f.N.HTTP_CLIENT_ERROR},s,R):(0,l.eK)({...r,error_type:f.N.HTTP_SERVER_ERROR},s,R)}};return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e)}},[R,s]);let N=(0,a.useCallback)(e=>{let t=e||b;if(t){if(w(!0),x.current){let e=new URL(t);e.searchParams.set("forceHideBadge","true"),o&&e.searchParams.set("lov-override-script","true"),x.current.src=e.toString()}E(t)}},[b,o]),P=(0,a.useRef)(!0);return(0,a.useEffect)(()=>{if(P.current){P.current=!1;return}N()},[o]),(0,a.useEffect)(()=>{_?j&&j.length>0&&(k.current=!0):(k.current&&N(),k.current=!1)},[j,N,_]),{preview:(0,a.useMemo)(()=>{let e;if(t){var a;e=new URL(t);let r=(null===(a=x.current)||void 0===a?void 0:a.src)?new URL(x.current.src).pathname:"";e.pathname=r,e.searchParams.set("forceHideBadge","true"),o&&e.searchParams.set("lov-override-script","true"),e=e.toString()}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{isLoading:y}),(0,n.jsx)("iframe",{id:"preview-panel",style:{opacity:r?0:1},ref:x,src:e,allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",className:"min-h-full w-full flex-grow",onLoad:()=>w(!1)})]})},[t,r,y,o]),refresh:N,isLoading:y,url:b,userSnapshot:C}}},11594:function(e,t,r){r.d(t,{N:function(){return d},i:function(){return c}});var n=r(16593),a=r(59625),s=r(36710),o=r(21288),i=r(97318),l=r(88746);let d=(0,a.Ue)(()=>({url:null,status:null})),c=e=>{let{projectId:t,enabled:r=!0,userInitiated:a=!1}=e,{showErrorDialog:c}=(0,l.t)(),u=(0,s.O)();return(0,n.a)({queryKey:i.iZ.devServer(t),enabled:r,queryFn:async()=>{o.PW.debug("starting_dev_server",{enabled:r});try{let e=await u.post("/projects/".concat(t,"/sandbox/start?user_initiated=").concat(a),{project_id:t});return o.PW.debug("dev_server_started",{response:e}),d.setState(e),e}catch(r){o.PW.error("failed_to_start_dev_server",{error:r});let e,t=!0;throw r instanceof Error?e=r.message:"object"==typeof r&&null!==r&&"data"in r&&"object"==typeof r.data&&null!==r.data&&"detail"in r.data&&(e=String(r.data.detail),t=!1),e&&c(e,t),d.setState({url:null,status:{sandbox:"error",dev_server:{state:"stopped",initialized:!1},shutdown_eta:null,checked_at:null}}),r}},refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchOnWindowFocus:!0,staleTime:6e4,retry:(e,t)=>"status"in t&&423===t.status})}},20958:function(e,t,r){r.d(t,{$_:function(){return u},CR:function(){return f}});var n=r(57437),a=r(79804),s=r(82246),o=r(16593),i=r(2265),l=r(59625);let d=()=>(0,l.Ue)(()=>({repoAccessibilityResponse:void 0})),c=(0,i.createContext)(null),u=e=>{let{children:t,projectId:r}=e,l=(0,i.useRef)(d()),u=(0,i.useMemo)(()=>({store:l.current}),[]),f=(0,s.Eh)(e=>e.userProjectPermissions),{data:p}=(0,o.a)(a.V.repoAccessibility({projectId:r,userProjectPermissions:f}));return(0,i.useEffect)(()=>{l.current&&l.current.setState(e=>({...e,repoAccessibilityResponse:p}))},[p]),(0,n.jsx)(c.Provider,{value:u,children:t})};function f(){let{store:e}=function(){let e=(0,i.useContext)(c);if(!e)throw Error("useRepoAccessibility must be used within a RepoAccessibilityProvider");return e}();return e(e=>e.repoAccessibilityResponse)}},2124:function(e,t,r){r.d(t,{F:function(){return f}});var n=r(57437),a=r(99376),s=r(1673),o=r(25134),i=r(76678),l=r(29461),d=r(57346),c=r(26815),u=r(74991);let f=e=>{let{visibility:t,setVisibility:r,onClick:f,disabled:p,className:m,customPrivateDescription:g,customPublicDescription:h,redirectToSubscription:v=!1}=e,_=(0,o.d)(),y=(0,l.z)(i.g),w=(0,a.useRouter)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.E,{className:m,disabled:p,defaultValue:"public",value:t,onValueChange:e=>{r(e)},children:[(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)(u.m,{value:"public",id:"public",onClick:()=>{null==f||f()}}),(0,n.jsxs)(c._,{htmlFor:"public",className:"flex w-full cursor-pointer flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,n.jsx)(d.Z,{size:"small",name:"globe",className:"text-muted-foreground"}),"Public"]}),h||(0,n.jsx)("span",{className:"text-xs leading-normal text-muted-foreground",children:"Anyone can view and remix"})]})]}),(0,n.jsxs)("div",{className:"flex w-full items-start space-x-2",children:[(0,n.jsx)(u.m,{value:"private",id:"private",onClick:e=>{_?null==f||f():(e.preventDefault(),v?w.push("/settings/plans"):y({childProps:{}}))}}),(0,n.jsxs)(c._,{htmlFor:"private",className:"flex w-full cursor-pointer flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,n.jsx)(d.Z,{size:"small",name:"lock",className:"text-muted-foreground"}),"Private",(0,n.jsx)(s.v,{plan:"Starter"})]}),g||(0,n.jsx)("span",{className:"text-xs leading-normal text-muted-foreground",children:"Build and deploy in private"})]})]})]})})}},6596:function(e,t,r){r.d(t,{Qd:function(){return d},UQ:function(){return l},o4:function(){return c},vF:function(){return u}});var n=r(57437),a=r(36492),s=r(20653),o=r(2265),i=r(94508);let l=a.fC,d=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,i.cn)("border-b",r),...s})});d.displayName="AccordionItem";let c=o.forwardRef((e,t)=>{let{className:r,children:o,...l}=e;return(0,n.jsx)(a.h4,{className:"flex",children:(0,n.jsxs)(a.xz,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-left text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...l,children:[o,(0,n.jsx)(s.v4q,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=a.xz.displayName;let u=o.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,n.jsx)(a.VY,{ref:t,className:"text-md overflow-hidden data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...o,children:(0,n.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",r),children:s})})});u.displayName=a.VY.displayName},26110:function(e,t,r){r.d(t,{$N:function(){return _},Be:function(){return y},GG:function(){return p},MJ:function(){return d},Vq:function(){return c},cN:function(){return v},cZ:function(){return g},fK:function(){return h},hg:function(){return u}});var n=r(57437),a=r(70001),s=r(20653),o=r(22048),i=r(2265),l=r(94508);let d=(0,i.createContext)({allowNestedDialog:!0}),c=e=>{let{...t}=e;if(!(0,i.useContext)(d).allowNestedDialog){let e=Error("Dialogs must not be used inside of dropdowns or context menus. Look at RootDialog.tsx for a way to render a dialog using a hook or render the dialog above the dropdown or context menu");o.Tb(e)}return(0,i.useEffect)(()=>()=>{document.body.style.pointerEvents=""},[]),(0,n.jsx)(a.fC,{...t,onOpenChange:e=>{var r;e||setTimeout(()=>{document.body.style.pointerEvents=""},250),null===(r=t.onOpenChange)||void 0===r||r.call(t,e)}})},u=a.xz,f=a.h_,p=a.x8,m=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-[3000] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});m.displayName=a.aV.displayName;let g=i.forwardRef((e,t)=>{let{className:r,children:o,hideCloseButton:i,blurOverlay:d,...c}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(m,{className:(0,l.cn)("",d&&"backdrop-blur-sm")}),(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...c,children:[o,!i&&(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,n.jsx)(s.Pxu,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=a.VY.displayName;let h=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};h.displayName="DialogHeader";let v=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};v.displayName="DialogFooter";let _=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});_.displayName=a.Dx.displayName;let y=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});y.displayName=a.dk.displayName},55721:function(e,t,r){r.d(t,{h_:function(){return u},bO:function(){return w},AW:function(){return _},Xi:function(){return y},Ju:function(){return E},cq:function(){return p},_x:function(){return g},qB:function(){return b},VD:function(){return x},KM:function(){return k},Ph:function(){return m},TG:function(){return v},kt:function(){return h},$F:function(){return f}});var n=r(57437),a=r(28119),s=r(20653),o=r(2265),i=r(94508),l=r(26110);class d extends o.Component{static getDerivedStateFromError(e){return{hasError:!0,componentStack:e.stack||"",error:e}}componentDidCatch(e,t){this.setState({componentStack:t.componentStack||"",error:e}),console.log({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(0,n.jsxs)("div",{style:{position:"absolute",top:0,left:0,zIndex:1e4,backgroundColor:"red"},children:[(0,n.jsx)("h2",{children:null===(e=this.state.error)||void 0===e?void 0:e.message}),(0,n.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:this.state.componentStack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,componentStack:"",error:null}}}var c=r(57346);let u=e=>{let{...t}=e;return(0,n.jsx)(d,{children:(0,n.jsx)(l.MJ.Provider,{value:{allowNestedDialog:!1},children:(0,n.jsx)(a.fC,{...t})})})},f=a.xz;a.ZA;let p=a.Uv,m=a.Tr,g=a.Ee,h=o.forwardRef((e,t)=>{let{className:r,inset:o,children:l,hideChevron:d,...c}=e;return(0,n.jsxs)(a.fF,{ref:t,className:(0,i.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",r),...c,children:[l,!d&&(0,n.jsx)(s.XCv,{className:"ml-auto"})]})});h.displayName=a.fF.displayName;let v=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.tu,{ref:t,className:(0,i.cn)("z-[10000] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})});v.displayName=a.tu.displayName;let _=o.forwardRef((e,t)=>{let{className:r,sideOffset:s=4,...o}=e;return(0,n.jsx)(a.Uv,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-[10000] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})})});_.displayName=a.VY.displayName;let y=o.forwardRef((e,t)=>{let{className:r,inset:s,...o}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm text-foreground outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",r),...o})});y.displayName=a.ck.displayName;let w=o.forwardRef((e,t)=>{let{className:r,children:o,checked:l,...d}=e;return(0,n.jsxs)(a.oC,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),checked:l,...d,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(s.nQG,{className:"h-4 w-4"})})}),o]})});w.displayName=a.oC.displayName;let b=o.forwardRef((e,t)=>{let{className:r,children:s,selectedIndicatorClassName:o,arrowLocation:l="start",...d}=e;return(0,n.jsxs)(a.Rk,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center justify-start gap-x-1 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground","start"===l&&"pl-7",r),...d,children:["start"===l&&(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(c.Z,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",o)})})}),s,"end"===l&&(0,n.jsx)(a.wU,{children:(0,n.jsx)(c.Z,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",o)})})]})});b.displayName=a.Rk.displayName;let E=o.forwardRef((e,t)=>{let{className:r,inset:s,...o}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",r),...o})});E.displayName=a.__.displayName;let x=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-border",r),...s})});x.displayName=a.Z0.displayName;let k=e=>{let{className:t,...r}=e;return(0,n.jsx)("span",{className:(0,i.cn)("ml-auto text-xs tracking-widest opacity-60",t),...r})};k.displayName="DropdownMenuShortcut"},57346:function(e,t,r){r.d(t,{Z:function(){return tZ}});var n=r(57437);r(2265);var a=r(94508),s=r(26472),o=r(37784),i=r(78330),l=r(30878),d=r(51058),c=r(58046),u=r(53939),f=r(28612),p=r(38952),m=r(72738),g=r(48709),h=r(96024),v=r(98164),_=r(39543),y=r(79857),w=r(48843),b=r(24746),E=r(67864),x=r(95592),k=r(8332),R=r(91361),j=r(14893),S=r(89769),C=r(21375),I=r(93886),N=r(1363),P=r(85064),A=r(79580),O=r(65597),M=r(67433),T=r(62178),D=r(95602),U=r(99209),z=r(73649),B=r(83628),F=r(71477),W=r(89003),L=r(29885),q=r(51668),H=r(7289),G=r(48494),Z=r(85518),V=r(86007),Q=r(79151),J=r(76527),K=r(90489),X=r(59949),Y=r(61276),$=r(49083),ee=r(95144),et=r(22972),er=r(1263),en=r(12713),ea=r(39730),es=r(90966),eo=r(35591),ei=r(89971),el=r(49588),ed=r(31017),ec=r(42454),eu=r(58699),ef=r(27317),ep=r(21583),em=r(95051),eg=r(80524),eh=r(84006),ev=r(73894),e_=r(68115),ey=r(38333),ew=r(81861),eb=r(39708),eE=r(67686),ex=r(67605),ek=r(96357),eR=r(76215),ej=r(21207),eS=r(90349),eC=r(92674),eI=r(30405),eN=r(42787),eP=r(84935),eA=r(81441),eO=r(23584),eM=r(47272),eT=r(84786),eD=r(72872),eU=r(29351),ez=r(18207),eB=r(28525),eF=r(53828),eW=r(35910),eL=r(26710),eq=r(20859),eH=r(85352),eG=r(13108),eZ=r(84451),eV=r(82133),eQ=r(48629),eJ=r(81080),eK=r(95085),eX=r(70757),eY=r(27301),e$=r(90067),e0=r(61190),e1=r(69621),e2=r(12747),e5=r(93322),e4=r(74366),e3=r(85194),e7=r(17017),e6=r(58147),e8=r(24218),e9=r(59187),te=r(16980),tt=r(32578),tr=r(31256),tn=r(3034),ta=r(91400),ts=r(84729),to=r(12280),ti=r(92483),tl=r(46609),td=r(73482),tc=r(24291),tu=r(38979),tf=r(81459),tp=r(4037),tm=r(58520),tg=r(71963),th=r(14103),tv=r(44690),t_=r(20928),ty=r(54125),tw=r(59131),tb=r(48313),tE=r(91530),tx=r(68082),tk=r(69169),tR=r(36482),tj=r(9844),tS=r(42790),tC=r(96690),tI=r(5542),tN=r(26457),tP=r(1837),tA=r(36934),tO=r(67307),tM=r(59549),tT=r(7124),tD=r(9399),tU=r(26251),tz=r(11132),tB=r(97139),tF=r(51229),tW=r(57931),tL=r(7593),tq=r(85024);let tH={rocket:to.default,whatshot:tB.default,"dock_to_right-fill":$.default,"thumb_down-fill":tj.default,"thumb_up-fill":tC.default,route:tl.default,rss:td.default,smart_toy:tv.default,account_circle:s.default,add:o.default,add_link:i.default,add_photo_alternate:l.default,arrow_circle_up:d.default,arrow_downward:c.default,arrow_upward:g.default,arrow_outward:f.default,arrow_right:p.default,arrow_right_alt:m.default,assignment:h.default,attach_file:v.default,auto_stories:_.default,bolt_fill:y.default,bug_report:E.default,build:x.default,cancel:k.default,celebration:R.default,chat:j.default,chat_bubble:S.default,chat_paste_go:C.default,check_small:P.default,check:I.default,check_circle:N.default,chevron_left:A.default,chevron_right:O.default,close:M.default,close_small:T.default,code:D.default,commit:z.default,construction:F.default,contact_support:W.default,content_copy:L.default,contrast:q.default,conversion_path:H.default,currency_bitcoin:Z.default,dashboard:V.default,delete:J.default,deployed_code:K.default,difference:Y.default,dock_to_right:ee.default,drive_file_move:et.default,edit:er.default,edit_square:en.default,error:es.default,expand_circle_down:eo.default,expand_circle_right:ei.default,expand_circle_up:el.default,experiment_fill:ed.default,favorite:eu.default,flag:ef.default,flash_on_fill:ep.default,flash_on:em.default,folder:eg.default,folder_copy:eh.default,footprint:ev.default,forum:ey.default,globe:ew.default,group_add:eE.default,help:ex.default,history:ek.default,history_2:eR.default,info:eI.default,import_contacts:eC.default,joystick:eN.default,keyboard_arrow_down:eO.default,kid_star:eM.default,language:eD.default,laptop_mac:eU.default,link:ez.default,local_fire_department:eB.default,local_shipping:eF.default,location_on:eW.default,lock:eq.default,manage_accounts:eG.default,manufacturing:eZ.default,more_horiz:eK.default,move_item:eX.default,my_location:eY.default,newspaper:e$.default,note_add:e0.default,note_stack:e1.default,open_in_full:e5.default,open_in_new:e4.default,page_info:e3.default,partner_exchange:e7.default,phone_iphone:e9.default,play_circle:te.default,power_settings_new:tt.default,progress_activity:tn.default,refresh:ta.default,restart_alt:ts.default,scan_delete:tc.default,school:tf.default,science:tp.default,search:tm.default,settings:tg.default,shuffle:th.default,star:t_.default,stop_circle:ty.default,stylus_note:tw.default,support_agent:tE.default,support:tb.default,swap_horiz:tx.default,table:tk.default,thumb_down:tS.default,thumb_up:tI.default,timelapse:tN.default,undo:tA.default,visibility_off:tD.default,visibility:tT.default,warning:tU.default,web:tz.default,location_searching:eL.default,text_fields:tR.default,notes:e2.default,format_list_bulleted:e_.default,rocket_launch:ti.default,enterprise:ea.default,imagesmode:eS.default,preview:tr.default,database:Q.default,code_blocks:U.default,keyboard:eA.default,home:ej.default,menu:eV.default,logout:eH.default,key:eP.default,menu_book:eQ.default,payments:e6.default,description:X.default,lab_research:eT.default,monitoring:eJ.default,figma_logo_outline:tL.default,figma_logo_color:tW.default,lovable_logo_color:tq.default,builder_io_logo:tF.default,arrow_left_alt:u.default,bookmark:b.default,bookmark_fill:w.default,unfold_more:tO.default,tune:tP.default,extension:ec.default,person:e8.default,credit_card:G.default,group:eb.default,upload:tM.default,schedule:tu.default,communities:B.default},tG={xsmall:"h-3 w-3",small:"h-4 w-4",default:"h-5 w-5",large:"h-6 w-6",xlarge:"h-8 w-8"};var tZ=e=>{let{name:t,size:r="default",className:s,...o}=e,i=tH[t],l=tG[r];return i?(0,n.jsx)(i,{width:"100%",height:"100%",className:(0,a.cn)("shrink-0",l,s),fill:"currentColor",...o}):null}},95186:function(e,t,r){r.d(t,{I:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},26815:function(e,t,r){r.d(t,{_:function(){return d}});var n=r(57437),a=r(6394),s=r(77712),o=r(2265),i=r(94508);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...s})});d.displayName=a.f.displayName},74991:function(e,t,r){r.d(t,{E:function(){return l},m:function(){return d}});var n=r(57437),a=r(20653),s=r(42325),o=r(2265),i=r(94508);let l=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.fC,{className:(0,i.cn)("grid gap-2",r),...a,ref:t})});l.displayName=s.fC.displayName;let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.ck,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...o,children:(0,n.jsx)(s.z$,{className:"flex items-center justify-center",children:(0,n.jsx)(a.jXb,{className:"h-3.5 w-3.5 fill-primary"})})})});d.displayName=s.ck.displayName},6512:function(e,t,r){r.d(t,{Separator:function(){return i}});var n=r(57437),a=r(90759),s=r(2265),o=r(94508);let i=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:i=!0,...l}=e;return(0,n.jsx)(a.f,{ref:t,decorative:i,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...l})});i.displayName=a.f.displayName},93022:function(e,t,r){r.d(t,{O:function(){return s}});var n=r(57437),a=r(94508);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},76818:function(e,t,r){r.d(t,{g:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex w-full rounded-md bg-muted px-2 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});o.displayName="Textarea"},27132:function(e,t,r){var n=r(37545),a=r(2265);let s={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};t.Z=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let t=(0,n.Z)(),r=(0,a.useMemo)(()=>"number"==typeof e?e:s[e],[e]);return(0,a.useMemo)(()=>void 0!==t.width&&t.width<r,[t.width,r])}},46366:function(e,t,r){r.d(t,{c:function(){return s}});var n=r(49340),a=r(25134);let s=()=>{let[e,t]=(0,n.a)(),{userData:r,isInitialized:s}=(0,a.v)();return!t&&s&&(null==r?void 0:r.is_admin)}},90432:function(e,t,r){r.d(t,{H$:function(){return g},eK:function(){return h},qV:function(){return v},hT:function(){return y}});var n=r(5978),a=r(2265),s=r(78099),o=r(11594),i=r(36710),l=r(21770),d=r(2208),c=r(21288);r(83079);var u=(0,r(12119).$)("b7d51bc7164a5e626545613d8ab46b33e129918e"),f=r(61062),p=r(7163);function m(e){var t,r,n;let a=e.meta_data?"|".concat(null===(t=e.meta_data)||void 0===t?void 0:t.colno,"|").concat(null===(r=e.meta_data)||void 0===r?void 0:r.lineno,"|").concat(null===(n=e.meta_data)||void 0===n?void 0:n.filename):"";return"".concat(e.error_message,"|").concat(e.type).concat(a)}function g(e){return e.filter((e,t,r)=>t===r.findIndex(t=>m(t)===m(e)))}async function h(e,t,r){try{let n=await u(e);if(!n){c.PW.debug("skipping_reporting_error",{error:e,err_message:e.message});return}let a=n.error_type;await r.post("/projects/".concat(t,"/report_error"),{message:null==n?void 0:n.message,error_type:a,meta_data:n})}catch(e){c.PW.error("failed_to_report_intercepted_error",{error:e})}}function v(e){let{projectId:t,errorIds:r,setErrors:n}=e,a=(0,i.O)();return(0,l.D)({mutationFn:async()=>{n([]),await a.post("/projects/".concat(t,"/handle_errors"),{error_ids:r})},onError:e=>{c.PW.error("failed_to_submit_handled_errors",{error:e})}})}let _=e=>{e.sort((e,t)=>e.type===f.N.RUNTIME&&t.type!==f.N.RUNTIME?-1:t.created_at.seconds-e.created_at.seconds);let t={uniqueErrors:[],runtimeErrorMessages:new Set};return e.reduce((e,t)=>{if(t.type===f.N.IMMEDIATE_RUNTIME||t.type===f.N.RUNTIME){let r=t.error_message.replace(/\?v=[a-z0-9]{8}/,"?'");e.runtimeErrorMessages.has(r)||(e.runtimeErrorMessages.add(r),e.uniqueErrors.push(t))}else e.uniqueErrors.push(t);return e},t).uniqueErrors},y=e=>{let{projectId:t}=e,[r,l]=(0,a.useState)([]),u=(0,i.O)(),f=(0,o.N)(e=>e.url),m=f&&"string"==typeof f?f.replace("http://","ws://").replace("https://","wss://"):f;(0,d.ZP)(m,{protocols:"vite-hmr",onMessage:e=>{try{let n=JSON.parse(e.data);if((null==n?void 0:n.type)==="error"){var r;c.PW.info("build_error_from_devserver",{message:null==n?void 0:null===(r=n.err)||void 0===r?void 0:r.message});let e=p.pw.safeParse(null==n?void 0:n.err);e.success?h(e.data,t,u):(c.PW.error("error_parsing_devserver_error",{error:e}),h(null==n?void 0:n.err,t,u))}}catch(e){c.PW.error("error_parsing_devserver_error",{error:e})}},onOpen:e=>{c.PW.debug("devserver_websocket_open")},onClose:e=>{c.PW.debug("devserver_websocket_close")},onError:e=>{c.PW.error("devserver_websocket_error",{event:e})},shouldReconnect:()=>!0,reconnectInterval:1e3});let g=v({projectId:t,errorIds:r.map(e=>e.id),setErrors:l});return(0,a.useEffect)(()=>{let e=function(e,t){let r=(0,n.hJ)(s.db,"projects/".concat(e,"/errors")),a=(0,n.IO)(r,(0,n.ar)("handled_at","==",null));return(0,n.cf)(a,e=>{e.empty?t([]):t(e.docs.map(e=>({...e.data(),id:e.id})))})}(t,l);return()=>e()},[t]),{errors:(0,a.useMemo)(()=>0===r.length?null:_(r),[r]),setErrors:l,handleErrorMutation:r.length>0?g:null}}},65666:function(e,t,r){r.d(t,{D:function(){return s},v:function(){return a}});var n=r(99376);let a=()=>{let e=(0,n.useParams)().project_id;return e&&"string"==typeof e?e:null},s=()=>{let e=a();if(!e)throw Error("Project ID is required and should always be set here");return e}},37545:function(e,t,r){var n=r(2265);t.Z=()=>{let[e,t]=(0,n.useState)({width:void 0,height:void 0});return(0,n.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},55630:function(e,t,r){r.d(t,{_:function(){return p}});var n=r(16593),a=r(99376),s=r(23664),o=r(2265),i=r(14438),l=r(64040),d=r(49131),c=r(10207),u=r(49340);let f=e=>{let{currentPathname:t,router:r,workspaces:n,currentWorkspace:a,setCurrentWorkspace:s,setWorkspaces:i,setError:l,isLoading:d}=e;(0,o.useEffect)(()=>{if(!d&&n){if(i(n),l(null),a){if([...n.owned,...n.joined].some(e=>e.id===(null==a?void 0:a.id)))return}else if(t.startsWith("/workspaces/")){let e=t.split("/")[2],r=n.owned.find(t=>t.name===e);r&&s(r)}n.owned.length}},[d,n,a,i,l,r,t,s])},p=()=>{let e=(0,s.dl)("teams"),{workspaces:t,isLoading:r,error:p,setWorkspaces:m,setLoading:g,setError:h,currentWorkspace:v,setCurrentWorkspace:_}=(0,c.Q)(),[y]=(0,u.a)(),w=(0,a.usePathname)(),b=(0,a.useRouter)(),E=(0,o.useCallback)(async(t,r)=>{if(e){if(!y)throw Error("User must be logged in to move projects");try{let e=(0,d.S)();g(!0),await e.put("/projects/".concat(t),[{path:"workspace_id",value:r}]),i.Am.success("Project moved")}catch(e){throw(0,l.Eo)(e),e}finally{g(!1)}}},[e,y,g]),x=(0,o.useCallback)(async()=>{if(!e||!y)return;let t=(0,d.S)();return await t.get("/user/workspaces")},[e,y]),{data:k,error:R,isLoading:j,refetch:S}=(0,n.a)({queryKey:["workspaces",null==y?void 0:y.id],queryFn:x,enabled:!!e&&!!y});f({router:b,currentPathname:w,workspaces:k,currentWorkspace:v,setWorkspaces:m,setCurrentWorkspace:_,setError:h,isLoading:j}),(0,o.useEffect)(()=>{R&&(i.Am.error("Failed to fetch workspaces"),h(R instanceof Error?R.message:"Unknown error"))},[R,h]),(0,o.useEffect)(()=>{g(j)},[j,g]);let C=(0,o.useCallback)(()=>S(),[S]);return(0,o.useMemo)(()=>e?{workspacesEnabled:e,workspaces:t,moveProjectToWorkspace:E,isLoading:r,error:p,refreshWorkspaces:C,currentWorkspace:v,setCurrentWorkspace:_}:{workspacesEnabled:e,workspaces:t,moveProjectToWorkspace:()=>Promise.resolve(),isLoading:!1,error:null,refreshWorkspaces:()=>Promise.resolve(),activeWorkspace:null},[v,e,t,E,r,p,C,_])}},85472:function(e,t,r){r.d(t,{H:function(){return n}});class n extends Error{constructor(e,t,r,n){super(t),this.type=e,this.details=r,this.status=n}}},35034:function(e,t,r){r.d(t,{O:function(){return n}});class n extends Error{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.response=n}}},25057:function(e,t,r){r.d(t,{t:function(){return a},u:function(){return n}});let n=()=>localStorage.API_BASE_URL?localStorage.API_BASE_URL:"https://api.lovable.dev",a=()=>"https://lovable-api.com"},64040:function(e,t,r){r.d(t,{B8:function(){return u},Eo:function(){return f},SC:function(){return d}});var n=r(14438),a=r(31229),s=r(21288),o=r(75502),i=r(65001),l=r(85472);let d={network:"network_error",malformed:"malformed_response"},c=a.z.object({type:a.z.string(),message:a.z.string().optional().transform(e=>e||void 0),details:a.z.string().optional().transform(e=>e||void 0)});function u(e){if((0,o.kW)(e)){var t;let r={url:null===(t=e.response)||void 0===t?void 0:t.url,method:e.httpMethod,status:e.status};if(!e.response)return(0,i.H)("Network error",{error:e,severity:s.in.INFO,context:r}),new l.H(d.network,"Connection Error","Please check your internet connection");let n=e.data,a=c.safeParse(n);if(a.success){let t=new l.H(a.data.type,a.data.message||"",a.data.details,e.status);return(0,i.v)({error:t,severity:s.in.INFO,context:r}),t}return(0,i.H)("Bad error from backend",{error:e,severity:s.in.ERROR,context:{...r,error_data:n,response:e.response,zodError:a.error}}),new l.H(d.malformed,e.statusText||"",void 0,e.status)}return(0,i.H)("Unhandled error type",{error:e,severity:s.in.ERROR}),new l.H(d.malformed,"")}function f(e){e instanceof l.H?(n.Am.error(e.message||"Something went wrong",e.details?{description:e.details}:void 0),e.message||(0,i.H)("User sees vague api error",{error:e,severity:s.in.ERROR})):(n.Am.error("Something went wrong",{description:"Lovable has been notified."}),(0,i.H)("User sees vague error",{error:e,severity:s.in.ERROR}))}},75502:function(e,t,r){function n(e){return e instanceof Error&&"number"==typeof e.status&&"data"in e&&"string"==typeof e.httpMethod}r.d(t,{B:function(){return s},kW:function(){return n}});class a{setResponseHandler(e){this.responseHandler=e}setErrorHandler(e){this.errorHandler=e}createUrl(e,t){let r=new URL("".concat(this.baseURL).concat(e));return t&&Object.entries(t).forEach(e=>{let[t,n]=e;null!=n&&r.searchParams.append(t,n)}),r.toString()}createRequestOptions(e,t,r){let n={method:e,headers:{"Content-Type":"application/json",...this.defaultHeaders,...(null==t?void 0:t.headers)||{}},credentials:this.withCredentials?"include":"same-origin",signal:null==t?void 0:t.signal};return void 0===r||["GET","HEAD"].includes(e)||(n.body=JSON.stringify(r)),n}async processResponse(e){return this.responseHandler?await this.responseHandler(e):e}async processError(e){throw this.errorHandler&&(e=await this.errorHandler(e)),e}async request(e,t,r,n){try{let a=this.createUrl(t,null==r?void 0:r.params),s=this.createRequestOptions(e,r,n),o=await fetch(a,s);if(!o.ok){let t=Error("Request failed with status ".concat(o.status));t.response=o,t.status=o.status,t.statusText=o.statusText,t.httpMethod=e;let r=o.clone();try{t.data=await r.json()}catch(e){t.data=await o.text()}return this.processError(t)}if(204===o.status||"0"===o.headers.get("Content-Length"))return this.processResponse({});let i=await o.json();return this.processResponse(i)}catch(e){return this.processError(e)}}async get(e,t){return this.request("GET",e,t)}async delete(e,t){return this.request("DELETE",e,t)}async head(e,t){return this.request("HEAD",e,t)}async post(e,t,r){return this.request("POST",e,r,t)}async put(e,t,r){return this.request("PUT",e,r,t)}async patch(e,t,r){return this.request("PATCH",e,r,t)}constructor(e,t={},r=!1){this.responseHandler=null,this.errorHandler=null,this.baseURL=e,this.defaultHeaders=t,this.withCredentials=r}}function s(e){return new a(e.baseURL,e.headers,e.withCredentials)}},49131:function(e,t,r){r.d(t,{S:function(){return _}});var n=r(31229),a=r(52285),s=r(66454),o=r(21288);async function*i(e){yield*l(d(e))}async function*l(e){let t=null;for await(let r of e)if(!r.startsWith(":")){if(r.startsWith("event:")){t&&o.PW.error("received_sse_event_without_data",{event_type:t}),t=r.slice(6).trim();continue}if(r.startsWith("data:")){let e=r.slice(5).trimStart();try{yield{type:t,data:JSON.parse(e)}}catch(r){o.PW.error("failed_to_parse_sse_event",{error:r,event_type:t,event_data:e})}t=null}}}async function*d(e){let t=new TextDecoder,r="";for(;;){let{done:n,value:a}=await e.read(),s=(r+=t.decode(a,{stream:!n})).split(/\n+/);for(let e of(r=s.pop()||"",s))yield e;if(n){r&&(yield r);break}}}var c=r(85472),u=r(64040),f=r(75502),p=r(65001),m=r(35034);class g{async getApi(){var e;if(!s.g.isInitialized())return await new Promise(e=>setTimeout(e,50)),this.getApi();let t=await s.g.getValidToken();t||(0,p.H)("Tried to get API with no valid ID token",{error:Error("Tried to get API with no valid ID token"),severity:o.in.ERROR});let r=(e=this.baseURL,(0,f.B)({baseURL:e,headers:t?{Authorization:"Bearer ".concat(t)}:void 0,withCredentials:!0}));return r.setResponseHandler(e=>e),r.setErrorHandler(e=>{if(e&&"object"==typeof e&&"status"in e&&401===e.status){let e=window.location.pathname;a.i.emitAuthError(e)}return Promise.reject((0,u.B8)(e))}),r}async get(e,t){return(await this.getApi()).get(e,t)}async delete(e,t){return(await this.getApi()).delete(e,t)}async post(e,t,r){return(await this.getApi()).post(e,t,r)}async put(e,t,r){return(await this.getApi()).put(e,t,r)}async patch(e,t,r){return(await this.getApi()).patch(e,t,r)}async head(e,t){return(await this.getApi()).head(e,t)}async postWithStreaming(e,t,r,n){let a=await s.g.getValidToken(),l=await fetch("".concat(this.baseURL).concat(e),{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{},Accept:"text/event-stream",Connection:"keep-alive","Cache-Control":"no-cache"},body:JSON.stringify(t),signal:n});if(!l.ok){let e;try{let t=await l.text(),r=l.headers.get("Content-Type")||"";if(r.includes("application/json"))try{e=JSON.parse(t)}catch(n){o.PW.error("failed_to_parse_json_response",{error:n,responseText:t,contentType:r}),e=t}else o.PW.debug("non_json_error_response",{contentType:r,responseText:t}),e=t}catch(e){o.PW.error("failed_to_parse_response_body",{error:e,status:l.status,contentType:l.headers.get("Content-Type")})}if(429===l.status)throw new m.O("We are currently under heavy load, please try again later.",429,"RATE_LIMIT_EXCEEDED",e);throw new m.O("Request failed",l.status,l.statusText,e)}let d=l.body.getReader();try{for await(let e of i(d)){if("error"===e.type)throw function(e){let t=h.safeParse(e.data);return t.success?(o.PW.error("server_sse_error",{error:t.data}),new m.O(t.data.message,500,t.data.type,t.data)):(o.PW.error("failed_to_parse_server_sse_error",{parse_error:t.error,event_data:e.data}),new c.H(u.SC.malformed,"",void 0,500))}(e);try{r(e)}catch(e){o.PW.error("unhandled_error_in_message_handler",{error:e})}}}catch(e){if(await d.cancel().catch(()=>{}),e instanceof Error&&"AbortError"===e.name)return;if(e instanceof m.O)throw e;throw o.PW.error("unexpected_error_during_sse",{error:e}),e}finally{d.releaseLock()}}constructor(e){this.baseURL=e}}let h=n.z.object({type:n.z.string(),message:n.z.string(),details:n.z.string()}),v=new g((0,r(25057).t)());function _(){return v}},65001:function(e,t,r){r.d(t,{H:function(){return i},v:function(){return o}});var n=r(22048),a=r(21288);let s={[a.in.ERROR]:"error",[a.in.WARN]:"warn",[a.in.INFO]:"info",[a.in.DEBUG]:"debug",[a.in.TRACE]:"trace",[a.in.LOG]:"log"};function o(e){let{error:t,severity:r,context:o}=e,i={...o,errorType:t.type},l=s[r];a.PW[l]("api_error_".concat(t.type),{error:t,...i}),(r===a.in.ERROR||r===a.in.WARN)&&n.Tb(Error("API Error: ".concat(t.type)),{extra:{...t,...i}})}function i(e,t){let{error:r,severity:o,context:i}=t,l="".concat(e,": ").concat(r instanceof Error?r.message:"Weird error"),d=r instanceof Error?r:Error(l),c=s[o];a.PW[c](l,{...i,error:r}),(o===a.in.ERROR||o===a.in.WARN)&&(d.message=l,n.Tb(d,{level:o===a.in.ERROR?"error":"warning",extra:{...i,weird_error:r instanceof Error?void 0:r}}))}},52285:function(e,t,r){r.d(t,{i:function(){return s}});var n=r(55445);class a extends n.EventEmitter{emitAuthError(e){this.emit("auth:error",{pathname:e})}}let s=new a},66454:function(e,t,r){r.d(t,{g:function(){return s}});var n=r(27277);class a{setServerIdToken(e){this.serverIdToken=e,this.initialized=!0}isInitialized(){return this.initialized}async getValidToken(){if(!this.serverIdToken)return null;if(this.refreshPromise)return this.refreshPromise;try{this.refreshPromise=(0,n.B)({serverIdToken:this.serverIdToken,refreshTokenUrl:"/api/refresh-token"});let e=await this.refreshPromise;return this.refreshPromise=null,e}catch(e){return this.refreshPromise=null,null}}constructor(){this.serverIdToken=null,this.refreshPromise=null,this.initialized=!1}}let s=new a},26034:function(e,t,r){r.d(t,{S:function(){return s},c:function(){return a}});var n=r(21288);let a=async(e,t,a)=>{let s=a;if(a.type.startsWith("image/")){let e=new Image;if(e.src=URL.createObjectURL(a),await new Promise(t=>e.onload=t),a.size>3145728||Math.max(e.width,e.height)>2e3)try{let{default:e}=await r.e(4937).then(r.bind(r,24937));s=await e(a,{maxSizeMB:3,maxWidthOrHeight:1920,useWebWorker:!0})}catch(e){n.PW.error("Error compressing image:",{error:e})}}let o={file_name:t,content_type:s.type,status:"uploading"},i=await e.post("/generate-file-upload-url",o);await fetch(i.url,{method:"PUT",body:s,headers:{"Content-Type":s.type}})},s=async(e,t)=>await e.post("/generate-file-download-url",t)},54257:function(e,t,r){r.d(t,{q:function(){return n}});let n="production"===(r(25566).env.NEXT_PUBLIC_NODE_ENV||"production")?{apiKey:"AIzaSyBQNjlw9Vp4tP4VVeANzyPJnqbG2wLbYPw",authDomain:"auth.gptengineer.app",projectId:"gpt-engineer-390607",storageBucket:"gpt-engineer-390607.appspot.com",messagingSenderId:"288002387414",appId:"1:288002387414:web:231da37c38c486ca814877",measurementId:"G-EFZ8TB5QLN",clientEmail:"firebase-adminsdk-thfj5@gpt-engineer-390607.iam.gserviceaccount.com"}:{apiKey:"AIzaSyC8MAnZTLUBttWHlEIMl0u8gGI0R5oGnXU",authDomain:"gpt-engineer-dev.firebaseapp.com",projectId:"gpt-engineer-dev",storageBucket:"gpt-engineer-dev.appspot.com",messagingSenderId:"435422046193",appId:"1:435422046193:web:36e2c4049799e14110c650",clientEmail:"firebase-adminsdk-tg5bc@gpt-engineer-dev.iam.gserviceaccount.com"}},78099:function(e,t,r){r.d(t,{I:function(){return c},db:function(){return d},j:function(){return f}});var n=r(44752),a=r(46886),s=r(21288),o=r(738),i=r(5978),l=r(54257);let{db:d,auth:c}=(()=>{let e=(0,o.ZF)(l.q),t=(0,i.LV)(e,{experimentalForceLongPolling:!0}),r=(0,n.v0)(e);return{app:e,db:t,auth:r}})(),u=!1,f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u&&t&&e){u=!0;let t=await (0,a.Q9)({serverCustomToken:e,refreshTokenUrl:"/api/refresh-token"});if(!t)return u=!1,s.PW.error("No custom token found in initialize()"),{db:d,auth:c};try{await (0,n._p)(c,t)}catch(e){s.PW.error("Unable to sign-in with custom-token in firebase initialization: ".concat(e)),u=!1}}return{db:d,auth:c}}},21288:function(e,t,r){r.d(t,{GR:function(){return f},PW:function(){return g},in:function(){return a}});var n,a,s=r(49360),o=r(59625),i=r(35034),l=r(85472),d=r(25566);(n=a||(a={})).LOG="LOG",n.TRACE="TRACE",n.DEBUG="DEBUG",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR";class c{static generateSessionId(){return(0,s.Z)()}setSession(e){this._session={session_id:c.generateSessionId(),previous_session:this._session.session_id,project_id:e}}setUser(e){this._user=e}get session(){return this._session}get user(){return this._user}sessionForLogging(){let{session_id:e,...t}=this._session;return{session_id:e,...Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return["session_attrs_".concat(t),r]}))}}userForLogging(){return Object.fromEntries(Object.entries(this._user||{}).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return["user_".concat(t),r]}))}getForLogging(){return Object.fromEntries(Object.entries({...this.sessionForLogging(),...this.userForLogging()}).filter(e=>{let[t,r]=e;return void 0!==r}))}constructor(){this._session={session_id:c.generateSessionId()}}}let u=new c,f=(0,o.Ue)(e=>({metadata:u,setMetadata:t=>e({metadata:t})})),p=async(e,t)=>{var r;let n=t[0],a=null!==(r=t[1])&&void 0!==r?r:{},s=(1e9*Math.floor(Date.now()/1e3)).toString(),o=Object.entries({msg:n,...a,...u.getForLogging(),level:e}).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(JSON.stringify(r,function e(t,r){return r instanceof i.O?{error_class:"StreamedFetchError",message:r.message,status:r.status,statusText:r.statusText,response:e("response",r.response),stack:r.stack}:r instanceof l.H?{error_class:"ApiError",type:r.type,message:r.message,details:r.details,status:r.status,stack:r.stack}:r instanceof Error?{error_class:r.constructor.name,message:r.message,stack:r.stack}:r}))}).join(" "),c={streams:[{stream:{service_name:"gptengineer-app",name:"gptengineer-app",version:d.env.NEXT_PUBLIC_VERSION||"1.0.0",environment:"production",commit_sha:"74f7524ac27fa81841b2739a07b80f96cee0fe8d",level:e},values:[[s,o]]}]},f="https://us-central1-gpt-engineer-390607.cloudfunctions.net/pushLogsToGrafana";if(f)try{await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}catch(e){}},m=(e,t)=>{p(e,t)},g={info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("INFO",t)},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("DEBUG",t)},trace:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("TRACE",t)},warn:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("WARN",t)},error:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("ERROR",t)},log:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m("LOG",t)}}},34495:function(e,t,r){r.d(t,{DW:function(){return m},mC:function(){return p}});var n=r(57437),a=r(2265),s=r(31229),o=r(59625),i=r(90432),l=r(65666),d=r(36710),c=r(21288);let u=()=>(0,o.Ue)(()=>({runtimeErrors:[]})),f=(0,a.createContext)({store:u(),clearDiagnostics:()=>{},addRuntimeError:()=>{throw Error("ProjectDiagnostics must be used within a ProjectDiagnosticsProvider")}}),p=e=>{let{children:t}=e,r=(0,l.v)();if(!r)throw Error("Project ID is required and should always be set here");let s=(0,a.useRef)();s.current||(s.current=u());let o=(0,d.O)(),p={store:s.current,clearDiagnostics:()=>{s.current.setState({runtimeErrors:[]})},addRuntimeError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUNTIME_ERROR",n=function(e){let t=g.safeParse(e);return t.success?(t.data.stack||c.PW.warn("diagnostics.runtime_error.stack_missing",{parse_error:t.error,error_data:e}),t.data.filename||c.PW.warn("diagnostics.runtime_error.filename_missing",{parse_error:t.error,error_data:e}),t.data):(c.PW.error("diagnostics.runtime_error.invalid",{parse_error:t.error,error_data:e}),null)}(e);if(!n)return;if(n.blankScreen){(0,i.eK)({...n,error_type:"runtime"},r,o);return}let a=function(e,t){let r={error_type:e,message:t.message||"Unknown error",filename:t.filename||"Unknown file",lineno:t.lineno||0,colno:t.colno||0,stack:t.stack||"Unavailable"};return r.message.length>1e4&&(r.message=r.message.slice(0,1e4)),r.stack.length>1e4&&(r.stack=r.stack.slice(0,1e4)),r}(t,n);s.current.setState(e=>{let t=[...e.runtimeErrors],r=t.findIndex(e=>0==e.lineno?e.message===a.message:e.filename===a.filename&&e.colno===a.colno&&e.lineno===a.lineno);-1!==r&&t.splice(r,1),t.push(a);let n=t.reduce((e,t)=>e+h(t),0);for(;n>1e5||t.length>50;){let e=t.shift();if(!e)break;n-=h(e)}return{runtimeErrors:t}})}};return(0,n.jsx)(f.Provider,{value:p,children:t})};function m(){return(0,a.useContext)(f)}let g=s.z.object({message:s.z.string().min(1),stack:s.z.string().optional(),filename:s.z.string().optional(),lineno:s.z.number().optional(),colno:s.z.number().optional(),blankScreen:s.z.boolean().optional()}),h=e=>{var t,r,n,a,s,o;return((null===(t=e.error_type)||void 0===t?void 0:t.length)||0)+((null===(r=e.message)||void 0===r?void 0:r.length)||0)+((null===(n=e.filename)||void 0===n?void 0:n.length)||0)+((null===(a=e.lineno)||void 0===a?void 0:a.toString().length)||0)+((null===(s=e.colno)||void 0===s?void 0:s.toString().length)||0)+((null===(o=e.stack)||void 0===o?void 0:o.length)||0)}},79804:function(e,t,r){r.d(t,{V:function(){return o}});var n=r(52274),a=r(49131),s=r(97318);let o={repoAccessibility:e=>{let{projectId:t,userProjectPermissions:r}=e;return(0,n.C)({queryKey:s.pL.repoAccessibility(t),queryFn:async()=>{let e=(0,a.S)();return await e.get("/projects/".concat(t,"/repo-accessibility"))},enabled:r.edit&&!!t})},repos:e=>{let{installation:t}=e;return(0,n.C)({queryKey:s.pL.repos(t),queryFn:()=>t?(0,a.S)().get("/github-repositories",{params:{github_owner:null==t?void 0:t.account.login,github_owner_type:null==t?void 0:t.target_type}}):Promise.resolve({repositories:[]})})}}},97318:function(e,t,r){r.d(t,{TZ:function(){return s},V3:function(){return o},iZ:function(){return n},pL:function(){return a}});let n={all:["projects"],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],checkName:e=>[...n.all,"check-name",e],collaborators:e=>[...n.detail(e),"collaborators"],branches:e=>[...n.detail(e),"branches"],visibility:e=>[...n.detail(e),"visibility"],badgeVisibility:e=>[...n.detail(e),"badge-visibility"],rename:e=>[...n.detail(e),"rename"],secretLinkId:e=>[...n.detail(e),"secret-link-id"],supabaseOrganizations:e=>[...n.detail(e),"supabase-organizations"],devServer:e=>[...n.detail(e),"dev-server"],devServerStatus:e=>[...n.devServer(e),"status"],domains:e=>[...n.detail(e),"domains"],sourceCode:e=>[...n.detail(e),"source-code"],feedbackStatus:e=>[...n.detail(e),"feedback-status"],initialPrompt:e=>[...n.detail(e),"initial-prompt"]},a={all:["github"],installations:()=>[...a.all,"installations"],repoAccessibility:e=>[...a.all,"repo-accessibility",e],repos:e=>[...a.all,"repos",null==e?void 0:e.account.login,null==e?void 0:e.target_type]},s={all:["users"],experimentalFeatures:()=>[...s.all,"experimental-features"],workspaces:()=>[...s.all,"workspaces"],workspace:e=>[...s.workspaces(),e],profile:e=>[...s.all,e]},o={all:["referral"],check:e=>[...o.all,"check",e]}},61062:function(e,t,r){var n,a;r.d(t,{N:function(){return n}}),(a=n||(n={})).IMMEDIATE_RUNTIME="immediate_runtime",a.RUNTIME="runtime",a.BUILD="build",a.DEPLOY_SUPABASE_FUNCTIONS="deploy_supabase_functions",a.HTTP_CLIENT_ERROR="http_client_error",a.CORS_ERROR="cors_error",a.HTTP_SERVER_ERROR="http_server_error",a.NO_CODE_CHANGE="no_code_change",a.CODE_DIFF="code_diff",a.FILE_EDITED_WITHOUT_PERMISSION="file_edited_without_permission",a.EXCLUDED_FILE_EDITED="excluded_file_edited",a.SUPABASE_EDGE_FUNCTION_ERROR="supabase_edge_function_error",a.DEPENDENCY_INSTALL="dependency_install",a.SUPABASE_SQL_ERROR="supabase_sql_error",a.SEARCH_REPLACE_FAILED="search_replace_failed",a.SEARCH_REPLACE_MISSING_FILE="search_replace_missing_file",a.CHANGED_MISSING_FILE="changed_missing_file"},94508:function(e,t,r){r.d(t,{cn:function(){return s}});var n=r(54365),a=r(71407);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m)((0,n.W)(t))}},27277:function(e,t,r){r.d(t,{B:function(){return i}});var n=r(88132),a=r(71856);class s{get(e){return this.cacheMap[e]?this.cacheMap[e]:e}set(e,t){this.cacheMap={[e]:t}}constructor(){this.cacheMap={}}}let o=new s;async function i(e){var t;let{serverIdToken:r,refreshTokenUrl:s,checkRevoked:i}=e;if(!r)return null;let l=o.get(r),d=(0,n.t)(l),u=null!==(t=null==d?void 0:d.exp)&&void 0!==t?t:0,f=Date.now()/1e3;if(!i&&f+300<u)return l;let p=await c(s);if(!(null==p?void 0:p.idToken))throw new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"Refresh token endpoint returned invalid response. This URL should point to endpoint exposed by the middleware and configured using refreshTokenPath option");return o.set(r,p.idToken),p.idToken}async function l(e,t,r){var n;let s=await d(e);return new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"next-firebase-auth-edge: Internal request to ".concat(null!==(n=null==r?void 0:r.method)&&void 0!==n?n:"GET"," ").concat(t.toString()," has failed: ").concat(s))}function d(e){let t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()}async function c(e,t){let r=await fetch(e,{...t,headers:{...null==t?void 0:t.headers,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw await l(r,e,t);return d(r)}},7163:function(e,t,r){r.d(t,{W3:function(){return l},pw:function(){return s}});var n=r(31229),a=r(61062);let s=n.z.object({frame:n.z.string().optional(),id:n.z.string().optional(),loc:n.z.object({file:n.z.string().optional(),line:n.z.number().optional(),column:n.z.number().optional()}).optional(),message:n.z.string(),plugin:n.z.string().optional(),pluginCode:n.z.string().optional(),stack:n.z.string().optional()}).transform(e=>({...e,error_type:a.N.IMMEDIATE_RUNTIME})),o=n.z.object({body:n.z.string(),message:n.z.string(),status:n.z.number(),statusText:n.z.string().optional(),url:n.z.string()}),i=n.z.object({message:n.z.string(),method:n.z.enum(["OPTIONS","GET","POST","PUT","DELETE","PATCH"]),origin:n.z.string().optional(),stack:n.z.string().optional(),url:n.z.string()}),l=n.z.union([o,i])},13673:function(e,t,r){var n=r(59625),a=r(4391);let s={sortedMessageIds:[],messages:{},edits:{},selectedImageUrl:void 0,collaborators:{},imageUrlCache:{},isOutOfCreditsDialogOpen:!1,collaboratorsInitialized:!1},o=(e,t)=>e.number!==t.number||e.commit_message!==t.commit_message||e.reverted!==t.reverted||e.status!==t.status||e.previewBuildStatus!==t.previewBuildStatus,i=(e,t)=>{let{edits:r}=t;Object.entries(r).forEach(t=>{let[r,n]=t;(!e.edits[r]||o(n,e.edits[r]))&&(e.edits[r]=n)})},l=(e,t)=>!t||e.handled_at!==t.handled_at||e.type!==t.type||e.error_message!==t.error_message||e.handled_in_message!==t.handled_in_message,d=(e,t)=>{if((null==t?void 0:t.type)!==e.type)return!0;if("aiMessage"===e.type&&"aiMessage"===t.type){var r,n,a,s,o;return!!(e.status!==t.status||e.persisted&&!t.persisted||(null!==(s=null===(r=e.errors)||void 0===r?void 0:r.length)&&void 0!==s?s:0)!==(null!==(o=null===(n=t.errors)||void 0===n?void 0:n.length)&&void 0!==o?o:0)||(null===(a=e.errors)||void 0===a?void 0:a.some((e,r)=>{var n;return l(e,null===(n=t.errors)||void 0===n?void 0:n[r])})))||e.editId!==t.editId||e.stopped!==t.stopped||e.sqlRunState!==t.sqlRunState}return!1},c=(e,t)=>{let{messages:r}=t;Object.entries(r).forEach(t=>{let[r,n]=t;d(n,e.messages[r])&&(e.messages[r]=n)});let n=Array.from(new Set([...e.sortedMessageIds,...Object.keys(r)])).map(t=>({id:t,createdAt:e.messages[t].createdAt})).sort((e,t)=>e.createdAt||t.createdAt?e.createdAt?t.createdAt?e.createdAt.getTime()-t.createdAt.getTime():-1:1:0);e.sortedMessageIds=n.map(e=>e.id)},u=(e,t)=>{var r;return t&&null!==(r=Object.values(e.edits).find(e=>e.commit_sha.startsWith(t)))&&void 0!==r?r:null},f=(e,t)=>{var r;return null!==(r=Object.values(e.messages).find(e=>"userCommit"===e.type&&e.shortCommitHash===t))&&void 0!==r?r:null},p=(e,t)=>{var r;return t&&null!==(r=e.edits[t])&&void 0!==r?r:null},m=(e,t)=>{var r;return null!==(r=Object.values(e.messages).find(e=>("aiMessage"===e.type||"revertSuccessv2"===e.type)&&e.editId===t))&&void 0!==r?r:null},g=(e,t)=>{e.collaborators=t.reduce((e,t)=>(t.id&&(e[t.id]=t),e),{})},h=(e,t)=>{var r;return t&&null!==(r=e.collaborators[t])&&void 0!==r?r:null},v=(0,n.Ue)()((0,a.n)((e,t)=>({...s,mergeEdits:t=>e(e=>i(e,t)),mergeMessages:t=>e(e=>c(e,t)),reset:()=>e(e=>({state:e,...s})),getEdit:e=>p(t(),e),getEditByShortCommitHash:e=>u(t(),e),setSelectedImageUrl:t=>e({selectedImageUrl:t}),getMessage:e=>{var r;return e&&null!==(r=t().messages[e])&&void 0!==r?r:null},removeMessage:t=>e(e=>{delete e.messages[t],e.sortedMessageIds=e.sortedMessageIds.filter(e=>e!==t)}),setMessage:(t,r,n)=>e(e=>{!function(e,t,r,n){let a=e.messages[t];a&&n?a.content=r.content:e.messages[t]=r,e.sortedMessageIds.includes(t)||e.sortedMessageIds.push(t)}(e,t,r,n)}),getMessageByEditId:e=>m(t(),e),getUserCommitMessageByShortCommitHash:e=>f(t(),e),setCollaborators:t=>e(e=>g(e,t)),getCollaborator:e=>h(t(),e),cacheImageUrl:(t,r)=>e(e=>({imageUrlCache:{...e.imageUrlCache,[t]:r}})),setIsOutOfCreditsDialogOpen:t=>e(e=>{e.isOutOfCreditsDialogOpen=t}),isMostRecentMessage:e=>{let r=t().sortedMessageIds;return r[r.length-1]===e},setCollaboratorsInitialized:t=>e(e=>{e.collaboratorsInitialized=t}),addMessage:t=>{e(e=>({messages:{...e.messages,[t.id]:t}}))},updateMessage:(t,r)=>{e(e=>({messages:{...e.messages,[t]:{...e.messages[t],...r}}}))},updateEdit:(t,r)=>e(e=>{e.edits[t]&&(e.edits[t]={...e.edits[t],...r})})})));t.ZP=v},82246:function(e,t,r){r.d(t,{Eh:function(){return d},es:function(){return s},jE:function(){return o}});var n,a,s,o,i=r(59625);(n=s||(s={})).RAW="RAW",n.DIFF="DIFF",(a=o||(o={})).DEFAULT="default",a.CHAT_ONLY="chat-only",a.AGENT="agent";let l={isSendChatMessageMutationPending:!1,isProjectLoaded:!1,isSomeRevertMutationPending:!1,activeMessageId:void 0,activeConsoleCodeContent:void 0,activeConsoleErrorContent:void 0,activeConsolePreviewContent:void 0,isProjectBeingDeleted:!1,latestStreamedMessage:void 0,consoleContentType:null,abortControllers:[],chatMessage:"",userProjectPermissions:{admin:!1,edit:!1},isProjectCollaborator:null,userProjectPermissionsLoading:!0,hasHandledCollaborationInvite:!1,isRemixDialogOpen:!1,activeEdit:void 0,isBrowsingHistory:!1,codeViewType:"RAW",isPickAndEditActive:!1,selectedElements:[],optimisticMessages:[],images:[],chatMode:"default",customScript:!1,shouldShowTipsAndTricksOnDevServerStart:!1,isDesignActive:!1,stoppedMessageIds:new Set},d=(0,i.Ue)((e,t)=>({...l,addOptimisticMessage:t=>e(e=>({optimisticMessages:[...e.optimisticMessages,t]})),removeOptimisticMessage:t=>e(e=>({optimisticMessages:e.optimisticMessages.filter(e=>e.id!==t)})),setIsSendChatMessageMutationPending:t=>e({isSendChatMessageMutationPending:t}),setShowConsole:t=>{e({consoleContentType:t})},setActiveMessageId:t=>e({activeMessageId:t}),setConsoleCodeContent:t=>e({activeConsoleCodeContent:t}),setConsoleErrorContent:t=>e({activeConsoleErrorContent:t}),setConsolePreviewContent:t=>e({activeConsolePreviewContent:t}),stoppedMessageIds:new Set,addStoppedMessageId:t=>{t&&e(e=>({stoppedMessageIds:new Set([...e.stoppedMessageIds,t])}))},isMessageStopped:e=>{let r=t();return!!r.latestStreamedMessage&&"stopped"in r.latestStreamedMessage&&!!r.latestStreamedMessage.stopped||r.stoppedMessageIds.has(e)},setLatestStreamedMessage:t=>{e({latestStreamedMessage:t})},reset:()=>e(e=>(e.abortControllers.forEach(e=>e.abort()),{...l,abortControllers:[]})),addAbortController:t=>e(e=>({abortControllers:[...e.abortControllers,t]})),removeAbortController:t=>e(e=>({abortControllers:e.abortControllers.filter(e=>e!==t)})),setChatMessage:t=>e({chatMessage:t}),setUserProjectPermissions:t=>e({userProjectPermissions:t}),setIsProjectCollaborator:t=>e({isProjectCollaborator:t}),setHasHandledCollaboratorInvite:t=>e({hasHandledCollaborationInvite:t}),setIsRemixDialogOpen:t=>e({isRemixDialogOpen:t}),setActiveEdit:t=>e({activeEdit:t}),setIsBrowsingHistory:t=>{"function"==typeof t?e(e=>({isBrowsingHistory:t(e.isBrowsingHistory)})):e({isBrowsingHistory:t})},toggleDebugMode:()=>{e(e=>({debugMode:!e.debugMode}))},setIsProjectLoaded:t=>e({isProjectLoaded:t}),exitConsole:()=>e({consoleContentType:null,activeMessageId:void 0,activeConsoleErrorContent:void 0,activeConsoleCodeContent:void 0,activeConsolePreviewContent:void 0,activeEdit:void 0}),setCodeViewType:t=>e({codeViewType:t}),setIsPickAndEditActive:t=>{"function"==typeof t?e(e=>({isPickAndEditActive:t(e.isPickAndEditActive)})):e({isPickAndEditActive:t})},setSelectedElements:t=>e({selectedElements:t}),addSelectedElement:t=>e(e=>({selectedElements:[...e.selectedElements,t]})),shouldBlockActions:()=>{let{isSendChatMessageMutationPending:e,isSomeRevertMutationPending:r}=t();return e||r},setImages:t=>{Array.isArray(t)?e({images:t}):e(e=>({images:t(e.images)}))},removeSelectedElement:t=>e(e=>({selectedElements:e.selectedElements.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)})),setChatMode:t=>{"function"==typeof t?e(e=>({chatMode:t(e.chatMode)})):e({chatMode:t})},setCustomScript:t=>e({customScript:t}),setShouldShowTipsAndTricksOnDevServerStart:t=>e({shouldShowTipsAndTricksOnDevServerStart:t}),setIsDesignActive:t=>{"function"==typeof t?e(e=>({isDesignActive:t(e.isDesignActive)})):e({isPickAndEditActive:t})}}))},10207:function(e,t,r){r.d(t,{Q:function(){return o}});var n=r(59625),a=r(4391),s=r(89134);let o=(0,n.Ue)()((0,s.tJ)((0,a.n)(e=>({workspaces:{owned:[],joined:[],invited:[]},currentWorkspace:null,currentWorkspaceProjectCount:null,isLoading:!1,error:null,setWorkspaces:t=>e(e=>{e.workspaces=t}),setCurrentWorkspace:t=>e(e=>{e.currentWorkspace=t}),setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t})})),{name:"workspace-storage",storage:(0,s.FL)(()=>localStorage),partialize:e=>({currentWorkspace:e.currentWorkspace,workspaces:e.workspaces})}))}}]);