try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fb3028b4-736e-4912-8347-0103756e5b4b",e._sentryDebugIdIdentifier="sentry-dbid-fb3028b4-736e-4912-8347-0103756e5b4b")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4703],{4703:function(e,t,a){Promise.resolve().then(a.bind(a,452))},97822:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(57437),l=a(35974);let n=e=>{let{className:t}=e;return(0,s.jsx)(l.C,{variant:"outline",className:t,children:"ADMIN"})}},452:function(e,t,a){"use strict";a.d(t,{ChatPanelV2:function(){return lx}});var s,l,n,r,i=a(57437),o=a(2265),c=a(65666),d=a(2043),u=a(29827),p=a(99376),m=a(46214),h=a(25134),g=a(22529),f=a(20653),v=a(27648),x=a(44954),b=a(55721),y=a(57346),j=a(35354),w=a(94508),E=a(62380),k=e=>{let{projectId:t,className:a,...s}=e,[l,n]=(0,o.useState)(!1),{isMac:r}=(0,j.Z)(),{openSettings:c}=(0,x.P7)(),u=(0,d.m)();return(0,i.jsxs)(b.h_,{open:l,onOpenChange:n,children:[(0,i.jsx)(b.$F,{asChild:!0,children:(0,i.jsx)("button",{className:(0,w.cn)("duration-125 flex size-5 items-center justify-center rounded-full border border-muted-border text-muted-foreground outline-none ease-out","shrink-0 transition-colors hover:bg-muted-hover",l&&"bg-muted-active",a),...s,children:(0,i.jsx)(y.Z,{name:"add",size:"small",className:(0,w.cn)("transition-transform",l&&"rotate-[135deg]")})})}),(0,i.jsxs)(b.AW,{align:"start",className:"min-w-[240px]",children:[(null==u?void 0:u.edit)&&(0,i.jsxs)(b.Xi,{onClick:()=>c("github"),children:[(0,i.jsx)(f.wGg,{}),(0,i.jsx)("p",{children:"GitHub"})]}),(0,i.jsx)(b.Xi,{asChild:!0,children:(0,i.jsxs)(v.default,{href:"/projects/".concat(t,"/history"),children:[(0,i.jsx)(y.Z,{name:"history_2"}),(0,i.jsx)("p",{children:"History"})]})}),(null==u?void 0:u.edit)&&(0,i.jsxs)(b.Xi,{onClick:()=>c("knowledge"),children:[(0,i.jsx)(y.Z,{name:"school"}),(0,i.jsx)("p",{children:"Knowledge"})]}),(null==u?void 0:u.edit)&&(0,i.jsxs)(b.Xi,{onClick:()=>c("settings"),children:[(0,i.jsx)(y.Z,{name:"settings"}),(0,i.jsx)("p",{children:"Settings"}),r?(0,i.jsx)(b.KM,{className:"hidden sm:flex",children:"⌘."}):(0,i.jsx)(b.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),(null==u?void 0:u.edit)&&(0,i.jsxs)(b.Xi,{onClick:()=>c("supabase"),children:[(0,i.jsx)(E.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,i.jsx)("p",{children:"Supabase"})]})]})]})},N=a(11536),C=a(32429),_=a(82246),S=a(38190),T=a(62869);let A={[_.jE.DEFAULT]:{icon:"chat_paste_go",title:"Default",description:"Chat and make edits to your project."},[_.jE.CHAT_ONLY]:{icon:"forum",title:"Chat only",description:"Chat without making edits to your project.",triggerClassName:"text-accent"},[_.jE.AGENT]:{icon:"smart_toy",title:"Agent",description:"Experimental reliability fixes in Lovable's AI."}};function P(){var e;let t=null===(e=(0,C.G)().features)||void 0===e?void 0:e.chat_modes,a=m.ZP.isFeatureEnabled("agent-2-point-0"),s=(0,_.Eh)(e=>e.chatMode),l=(0,_.Eh)(e=>e.setChatMode),[n,r]=(0,o.useState)(null);return t?(0,i.jsxs)(b.h_,{children:[(0,i.jsx)(b.$F,{asChild:!0,children:(0,i.jsxs)(T.z,{variant:"ghost",size:"sm",className:(0,w.cn)("h-fit gap-1 px-1.5 py-0.5 font-normal focus-visible:ring-0",A[s].triggerClassName),children:[(0,i.jsx)(y.Z,{name:"page_info",size:"small"}),"Mode",(0,i.jsx)(y.Z,{name:"keyboard_arrow_down",size:"small",className:"-mx-0.5"})]})}),(0,i.jsxs)(b.AW,{className:"w-[248px] border border-border p-3",side:"top",align:"start",sideOffset:8,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:"Chat mode"}),(0,i.jsx)(S.c,{})]}),(0,i.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,i.jsx)(b._x,{value:s,onValueChange:e=>l(e),className:"w-1/2",children:Object.entries(A).filter(e=>{let[t]=e;return t!==_.jE.AGENT||a}).map(e=>{let[t,{icon:a,title:l,description:n}]=e;return(0,i.jsx)(I,{mode:t,description:n,title:l,icon:a,onMouseEnter:r,onMouseLeave:()=>r(null),isSelected:s===t},t)})}),(0,i.jsxs)("div",{className:"w-1/2 text-xs",children:[n||A[s].description,(0,i.jsx)("p",{className:"pt-1 text-xs text-muted-foreground",children:"Cost: 1 message"})]})]})]})]}):null}let I=e=>{let{mode:t,onMouseEnter:a,onMouseLeave:s,description:l,title:n,icon:r,isSelected:c}=e,d=(0,o.useCallback)(()=>a(l),[l,a]),u=(0,o.useCallback)(()=>s(),[s]);return(0,i.jsxs)(b.qB,{className:(0,w.cn)("flex items-center px-1 py-1 text-xs text-muted-foreground focus:bg-muted focus:text-primary",{"text-primary":c}),value:t,onMouseEnter:d,onMouseLeave:u,selectedIndicatorClassName:"text-accent",arrowLocation:"end",children:[(0,i.jsx)(y.Z,{name:r,size:"small"}),(0,i.jsx)("span",{children:n})]})};var M=a(70122),L=a(29162),D=a(48614),R=a(1188),z=a(27410),O=a(86445),K=a(75023),Z=a(22060),U=a(18207),F=a(6033);let W={text:K.Z,img:Z.Z,button:O.Z,link:U.default,div:F.Z},B=e=>W[["p","span","h1","h2","h3","h4","h5","h6"].includes(e)?"text":"img"===e?"img":"button"===e?"button":"a"===e?"link":"div"],H=e=>["p","span","h1","h2","h3","h4","h5","h6"].includes(e.elementType)?"text":"img"===e.elementType?"img":"button"===e.elementType?"button":"a"===e.elementType?"link":"div",V=e=>{let{elementType:t}=e,a=B(t);return a?(0,i.jsx)(a,{fill:"white",className:"size-4"}):null},G=(0,o.memo)(()=>{let e=(0,_.Eh)(e=>e.selectedElements),t=(0,_.Eh)(e=>e.removeSelectedElement),a=e=>{var t,a;return"Line ".concat(e.lineNumber," in ").concat(null===(a=e.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop())},[s,l]=(0,o.useState)(null),n=(0,o.useCallback)(()=>{s&&t(s)},[s,t]);return(null==e?void 0:e.length)?(0,i.jsx)("div",{className:"bg-transparent",children:(0,i.jsx)("ul",{className:"flex flex-wrap gap-2",children:(0,i.jsx)(D.M,{mode:"popLayout",children:e.map(e=>(0,i.jsx)(R.E.li,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6,transition:{duration:.15}},transition:{duration:.1,ease:[.5,1,.89,1],opacity:{duration:.1}},layoutId:"".concat(e.filePath,"-").concat(e.lineNumber),children:(0,i.jsx)(z.Z,{label:a(e),side:"top",children:(0,i.jsxs)("button",{className:"flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onMouseEnter:()=>l(e),onMouseLeave:()=>l(null),onClick:n,children:[(0,i.jsx)(D.M,{mode:"wait",children:(0,i.jsx)(R.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:s!==e?(0,i.jsx)(V,{elementType:e.elementType}):(0,i.jsx)(y.Z,{name:"close",size:"small"})},s===e?"close":"element")}),(0,i.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(e.elementType)})]})})},"".concat(e.filePath,"-").concat(e.lineNumber)))})})}):null});G.displayName="ChatInputSelectElementsRow",(0,o.memo)(e=>{var t,a;let{element:s,onRemoveElement:l}=e,[n,r]=(0,o.useState)(!1);return(0,i.jsx)(z.Z,{label:"Line ".concat(s.lineNumber," in ").concat(null===(a=s.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop()),side:"top",children:(0,i.jsxs)("button",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"group/select-element flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onClick:()=>l(s),children:[(0,i.jsx)(D.M,{mode:"wait",children:(0,i.jsx)(R.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:n?(0,i.jsx)(y.Z,{name:"close",size:"small"}):(0,i.jsx)(V,{elementType:s.elementType})},n?"close":"element")}),(0,i.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(s.elementType)})]})})}).displayName="ChatInputSelectElement";var X=a(44481),q=a(14438),Y=a(21288);function Q(){return(0,o.useCallback)(e=>{let t=document.querySelector("iframe");(null==t?void 0:t.contentWindow)&&t.contentWindow.postMessage(e,"*")},[])}(s=n||(n={})).ELEMENT_CLICKED="ELEMENT_CLICKED",s.TOGGLE_SELECTOR="TOGGLE_SELECTOR",s.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",s.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",s.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",s.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",s.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",s.GET_SELECTOR_STATE="GET_SELECTOR_STATE",s.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",s.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",s.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",s.SET_STYLESHEET="SET_STYLESHEET",s.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",s.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",s.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",s.COMPONENT_TREE="COMPONENT_TREE",s.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",s.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",s.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",s.KEYBIND="KEYBIND",s.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",s.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",s.PARENT_ELEMENT="PARENT_ELEMENT",a(63611);var J=a(81103),$=a(62475),ee=a(4586),et=a(58135),ea=a(26110),es=a(78844);function el(e){let{open:t,onOpenChange:a}=e,s=(0,c.v)(),{handleConnect:l}=(0,es.h)(s||"");return(0,i.jsx)(ea.Vq,{open:t,onOpenChange:a,children:(0,i.jsxs)(ea.cZ,{className:"sm:max-w-[425px]",children:[(0,i.jsxs)(ea.fK,{children:[(0,i.jsx)(ea.$N,{children:"We got an update for you!"}),(0,i.jsx)(ea.Be,{children:"To make Supabase integration more robust, Lovable can now read your project logs. Please re-authenticate with Supabase to continue."})]}),(0,i.jsx)("div",{className:"mt-4 flex flex-col gap-4",children:(0,i.jsx)(T.z,{onClick:()=>{a(!1),l()},className:"w-full",children:"Re-authenticate with Supabase"})})]})})}var en=a(48349);let er=e=>{let t=(0,o.useMemo)(()=>{var e,t;return(null===(t=navigator)||void 0===t?void 0:null===(e=t.userAgentData)||void 0===e?void 0:e.platform)==="macOS"||navigator.platform.toLowerCase().includes("mac")},[]),a=e=>{let a={mod:t?"⌥":"Alt",cmd:t?"⌘":"Ctrl",meta:t?"⌘":"Ctrl",shift:t?"⇧":"Shift",alt:t?"⌥":"Alt",ctrl:t?"⌃":"Ctrl",return:t?"↵":"Enter",left:"←",right:"→",up:"↑",down:"↓"},s=e.toLowerCase();return s in a?a[s]:e.toUpperCase()},s=e=>e.split("+").map(e=>e.trim()).map(a).join("");return"string"==typeof e?s(e):e.map(e=>s(e)).join("+")},ei=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=er(t[0]);return(0,X.y1)(...t),s};var eo=function(){let e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)},ec=a(51826),ed=a(79804),eu=a(39674),ep=a(13673),em=a(94023);let eh=e=>{try{if(null==e)return!1;let t=e.toDate();if(new Date().getTime()-t.getTime()>6e4)return!1;return!0}catch(e){return!1}},eg=()=>{let e=(0,em.iZ)(e=>e.project),t=null==e?void 0:e.locked_at,[a,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!t||!eh(t)){s(!1);return}let e=setInterval(()=>{let a=eh(t);s(a),a||clearInterval(e)},250);return()=>clearInterval(e)},[t]),a};var ef=a(63420),ev=a(52552),ex=a(81004),eb=a(70060),ey=a(32582),ej=a(9078),ew=a(76624),eE=a(6827);let ek=()=>{let{ast:e}=(0,ef.v)(),t=(0,eE.W)(e=>e.addPendingChange);return(0,o.useCallback)((a,s)=>{var l,n;let r=e.find(e=>e.filePath===a.filePath);if(!r){Y.PW.error("Node not found",{element:a}),q.Am.error("Node not found",{description:"Node not found"});return}let i=!1;if((0,ew.default)(r.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===a.lineNumber&&(s(e.node,e),i=!0,e.stop())}}),!i)return;let o=(l=r.ast,n={sourceMaps:!0,sourceFileName:r.filePath},(0,ej.default)(l,n,void 0).code);t(r.filePath,o)},[t,e,q.Am])};(l=r||(r={})).TEXT_CHANGE="TEXT_CHANGE",l.IMAGE_CHANGE="IMAGE_CHANGE",l.REMOVE_NODE="REMOVE_NODE",l.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",l.CLASS_NAME_SET="CLASS_NAME_SET",l.DUPLICATE_NODE="DUPLICATE_NODE";let eN={current:!1};function eC(){let{isLocked:e}=(0,eb.mp)(),{ast:t,setHistory:a}=(0,ef.v)(),s=(0,_.Eh)(e=>e.isPickAndEditActive),l=(0,_.Eh)(e=>e.setIsPickAndEditActive),i=(0,_.Eh)(e=>e.selectedElements),c=(0,_.Eh)(e=>e.setSelectedElements),d=Q(),u=(0,o.useCallback)((e,t)=>{d({type:n.TOGGLE_SELECTOR,payload:e}),d({type:n.UPDATE_SELECTED_ELEMENTS,payload:t})},[d]),p=(0,o.useCallback)(()=>{u(s,i)},[s,i,u]),h=(0,o.useCallback)(()=>{l(!0),u(!0,i)},[l,u,i]),g=(0,o.useCallback)(()=>{l(!1),u(!1,i)},[l,u,i]),f=(0,o.useCallback)(()=>{s?g():h()},[s,h,g]),v=ek();(0,o.useEffect)(()=>{d({type:n.TOGGLE_SELECTOR,payload:s})},[d,s]);let x=(0,o.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber.toString();t&&a&&d({type:n.HOVER_ELEMENT_REQUESTED,payload:{id:{path:t,line:a}}})},[d]),b=(0,o.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber.toString();t&&a&&d({type:n.UNHOVER_ELEMENT_REQUESTED,payload:{id:{path:t,line:a}}})},[d]),y=(0,o.useCallback)(e=>{if(!e){q.Am.error("Failed to select element");return}m.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let a=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,s={...e,content:a(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:a(e.content)}))};c([s]),d({type:n.UPDATE_SELECTED_ELEMENTS,payload:[s]})}catch(t){q.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),Y.PW.error("Error in handleElementClick",{error:t,elementData:e})}},[c,d]),j=(0,o.useRef)();return(0,o.useEffect)(()=>{j.current=o=>{switch(o.data.type){case"ELEMENT_CLICKED":{let a=o.data.payload;!e&&"button"!==a.elementType&&(0,ey.H2)({...a,content:null},t)&&d({type:n.EDIT_TEXT_REQUESTED,payload:{id:{path:a.filePath,line:"".concat(a.lineNumber)}}}),y(o.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":d({type:n.UPDATE_SELECTED_ELEMENTS,payload:i});break;case"SELECTOR_SCRIPT_LOADED":p();break;case"GET_SELECTOR_STATE":d({type:n.SELECTOR_STATE_RESPONSE,payload:{isActive:s}});break;case"ELEMENT_TEXT_UPDATED":{m.ZP.capture("visual_edits:element_text_updated");let e=o.data.payload,t=i.find(t=>t.filePath===e.id.path&&t.lineNumber.toString()===e.id.line);if(!t)return;let s={...t,textContent:e.content};c([s,...i.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),v(s,t=>(0,ey.Rw)(t,e.content)),a(a=>[...a,{type:r.TEXT_CHANGE,element:s,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":d({type:n.TOGGLE_SELECTOR,payload:!0}),l(!0);break;case"PARENT_ELEMENT":{m.ZP.capture("visual_edits:get_parent_element");let e=o.data.payload;console.log(e),e&&y(e)}}}},[t,h,g,y,p,e,s,v,i,d,a,l,c]),(0,o.useEffect)(()=>{if(!eN.current){let e=e=>{var t;null===(t=j.current)||void 0===t||t.call(j,e)};return window.addEventListener("message",e),eN.current=!0,()=>{window.removeEventListener("message",e),eN.current=!1}}},[]),(0,X.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,o.useEffect)(()=>{d({type:n.UPDATE_SELECTED_ELEMENTS,payload:i}),p()},[i,s,d,p]),{isPickAndEditActive:s,togglePickAndEdit:f,handleDeactivatePickAndEdit:g,selectedElements:i,hoverElement:x,unhoverElement:b,canEdit:!e}}var e_=a(70001),eS=a(27413),eT=a(32489),eA=a(91668),eP=a(84900),eI=a(35974),eM=a(76818),eL=a(11594),eD=a(92259),eR=a(82959),ez=a(18081),eO=a(93673),eK=a(40756),eZ=a(27339),eU=a(64266),eF=a(36254),eW=a(38846);let eB=e=>{let{size:t=.666,lightColor:a="#fff",darkColor:s="#ddd",...l}=e,n=t/2,r=(0,o.useId)();return(0,i.jsxs)("svg",{width:"100%",height:"100%",...l,children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("pattern",{id:"".concat(r,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,i.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:a}),(0,i.jsx)("rect",{x:"0",width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"0",fill:s}),(0,i.jsx)("rect",{x:"".concat(n,"rem"),width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"".concat(n,"rem"),fill:s})]})}),(0,i.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,"-transparent-pattern)")})]})};var eH=a(95186),eV=a(26815),eG=a(57054),eX=a(12339);function eq(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,a=parseInt(e.slice(0,2),16),s=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),n=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(a)?0:a,g:isNaN(s)?0:s,b:isNaN(l)?0:l,a:isNaN(n)?1:n}}catch(e){return null}}function eY(e,t,a,s){let l=e=>Math.round(e).toString(16).padStart(2,"0"),n=Math.round(255*s);return"#".concat(l(e)).concat(l(t)).concat(l(a)).concat(n<255?l(n):"")}function eQ(e,t,a,s){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=Math.max(e/=255,t/=255,a/=255),r=Math.min(e,t,a),i=n-r,o=0,c=0===n?0:i/n;if(n===r)return{h:l,s:100*c,v:100*n,a:s};switch(n){case e:o=(t-a)/i+(t<a?6:0);break;case t:o=(a-e)/i+2;break;case a:o=(e-t)/i+4}return{h:360*(o/=6),s:100*c,v:100*n,a:s}}function eJ(e,t,a,s){let l=0,n=0,r=0,i=Math.floor(6*(e/=360)),o=6*e-i,c=(a/=100)*(1-(t/=100)),d=a*(1-o*t),u=a*(1-(1-o)*t);switch(i%6){case 0:l=a,n=u,r=c;break;case 1:l=d,n=a,r=c;break;case 2:l=c,n=a,r=u;break;case 3:l=c,n=d,r=a;break;case 4:l=u,n=c,r=a;break;case 5:l=a,n=c,r=d}return{r:Math.round(255*l),g:Math.round(255*n),b:Math.round(255*r),a:s}}let e$=e=>{if(!e)return{singles:[],groups:[]};let t=[],a=[];for(let[s,l]of Object.entries(e))if("string"!=typeof l){let e=[];for(let[t,a]of Object.entries(l))"string"!=typeof a||a.includes("--")||e.push(["".concat(s,"-").concat(t),a]);e.length>0&&a.push([s,e])}else{if(l.includes("--"))continue;t.push([s,l])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:a}},e0=o.createContext(null);function e1(e){let{children:t}=e,[a,s]=o.useState(null),l=o.useRef(null),n=o.useCallback(e=>{s(e),l.current=e},[]),r=o.useRef(null),c=o.useCallback(()=>{s(null)},[]);return(0,i.jsxs)(e0.Provider,{value:{showTooltip:n,hideTooltip:c},children:[t,(0,i.jsx)("div",{ref:r,className:(0,w.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",a?"opacity-100":"opacity-0"),children:l.current})]})}let e2=e=>{let{color:t,onClick:a,name:s}=e,l=o.useContext(e0),n="transparent"===t?(0,i.jsx)(eB,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,i.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,i.jsx)(T.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-[1px]",onClick:a,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==l||l.showTooltip(s)},onMouseLeave:()=>null==l?void 0:l.hideTooltip(),children:n})},e4=e=>{let{colors:t,onChange:a}=e,s=o.useMemo(()=>e$(t),[t]);return(0,i.jsx)(e1,{children:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[s.groups.map(e=>{let[t,s]=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(eV._,{className:"block pb-2 text-sm capitalize",children:t}),(0,i.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:s.map(e=>{let[t,s]=e;return(0,i.jsx)(e2,{color:s,onClick:()=>a(t),name:t},t)})})]},t)}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eV._,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,i.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[s.singles.map(e=>{let[t,s]=e;return(0,i.jsx)(e2,{color:s,onClick:()=>a(t),name:t},t)}),(0,i.jsx)(e2,{color:"transparent",onClick:()=>a("transparent"),name:"transparent"}),(0,i.jsx)(e2,{color:"black",onClick:()=>a("inherit"),name:"inherit"})]})]})]})})};function e5(e){let{color:t,onChange:a,presetColors:s,children:l,disabled:n=!1}=e,[r,c]=o.useState(()=>eq(t)||{r:0,g:0,b:0,a:1}),[d,u]=o.useState(()=>eQ(r.r,r.g,r.b,r.a,0)),[p,m]=o.useState(t),[h,g]=o.useState(!1);o.useEffect(()=>{if(t===p)return;let e=eq(t)||{r:0,g:0,b:0,a:1},a=eQ(e.r,e.g,e.b,e.a,d.h);c(e),u(a),m(t)},[t,p,d.h]);let f=o.useRef(null),[v,x]=o.useState(!1),b=o.useCallback(e=>{var t;let s=null===(t=f.current)||void 0===t?void 0:t.getBoundingClientRect();if(!s)return;let l=Math.min(Math.max(0,e.clientX-s.left),s.width),n=Math.min(Math.max(0,e.clientY-s.top),s.height),r=l/s.width*100,i=100-n/s.height*100,o=eJ(d.h,r,i,d.a);c(o),u({...d,s:r,v:i,a:d.a}),a(eY(o.r,o.g,o.b,o.a))},[d,a]);o.useEffect(()=>{let e=e=>{v&&b(e)},t=()=>{x(!1),document.body.classList.remove("select-none")};return v&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[v,b]);let y=o.useCallback(e=>{let[t]=e;u({...d,h:t});let s=eJ(t,d.s,d.v,d.a);c(s),a(eY(s.r,s.g,s.b,s.a))},[d,a]),j=o.useCallback(e=>{let[t]=e;u({...d,a:t});let s=eJ(d.h,d.s,d.v,t);c(s),a(eY(s.r,s.g,s.b,s.a))},[d,a]);return(0,i.jsxs)(eG.J2,{open:h,onOpenChange:n?void 0:g,children:[(0,i.jsx)(eG.xo,{disabled:n,asChild:!0,children:l}),(0,i.jsx)(eG.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(g(!1),e.preventDefault(),e.stopPropagation())},children:(0,i.jsxs)(eX.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,i.jsxs)(eX.dr,{className:"my-1 w-full px-4",children:[(0,i.jsx)(eX.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,i.jsx)(eX.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,i.jsx)(eX.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,i.jsx)(e1,{children:!!s&&(0,i.jsx)(e4,{colors:s,onChange:a})})}),(0,i.jsx)(eX.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{ref:f,className:"relative h-56 w-full rounded-md ".concat(n?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(d.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{n||(x(!0),b(e))},children:(0,i.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(d.s,"%"),top:"".concat(100-d.v,"%"),backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b)}})}),(0,i.jsxs)(eW.fC,{disabled:n,min:0,max:360,step:1,value:[d.h],onValueChange:y,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,i.jsx)(eW.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,i.jsx)(eW.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,i.jsx)(eW.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(d.h,", 100%, 50%)")}})]}),(0,i.jsxs)(eW.fC,{disabled:n,min:0,max:1,step:.01,value:[d.a],onValueChange:j,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":eY(r.r,r.g,r.b,1)},children:[(0,i.jsxs)(eW.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(eB,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat(eY(r.r,r.g,r.b,1)," 100%)")}})})]}),(0,i.jsx)(eW.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,i.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:eY(r.r,r.g,r.b,d.a)}})})]})]}),(0,i.jsx)("div",{className:"grid gap-2",children:(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(eV._,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,i.jsx)(eH.I,{id:"hex",disabled:n,value:p,onChange:e=>{if(n)return;let t=e.target.value;m(t);let s=eq(t);s&&(c(s),u(eQ(s.r,s.g,s.b,s.a,0)),a(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}var e6=a(9259),e3=a(53647),e9=a(88108),e8=a.n(e9),e7=a(50676);let te=new Uint8Array(256);function tt(e,t){let a=0,s=[],l=0,n=e.length,r=t.charCodeAt(0);for(let t=0;t<n;t++){let i=e.charCodeAt(t);if(0===a&&i===r){s.push(e.slice(l,t)),l=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<n;){let a=e.charCodeAt(t);if(92===a){t+=1;continue}if(a===i)break}break;case 40:te[a]=41,a++;break;case 91:te[a]=93,a++;break;case 123:te[a]=125,a++;break;case 93:case 125:case 41:a>0&&i===te[a-1]&&a--}}return s.push(e.slice(l)),s}let ta=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),ts=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),tl=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]),tn=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function tr(e){return -1!==e.indexOf("(")&&tn.some(t=>e.includes("".concat(t,"(")))}function ti(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!tn.some(t=>e.includes(t)))return e;let t="",a=[];for(let s=0;s<e.length;s++){let l=e[s];if("("===l){t+=l;let n=s;for(let t=s-1;t>=0;t--){let a=e.charCodeAt(t);if(a>=48&&a<=57)n=t;else if(a>=97&&a<=122)n=t;else break}let r=e.slice(n,s);if(tn.includes(r)||a[0]&&""===r){a.unshift(!0);continue}a.unshift(!1);continue}if(")"===l)t+=l,a.shift();else if(","===l&&a[0]){t+=", ";continue}else if(" "===l&&a[0]&&" "===t[t.length-1])continue;else if(("+"===l||"*"===l||"/"===l||"-"===l)&&a[0]){let a=t.trimEnd(),n=a[a.length-1];if("+"===n||"*"===n||"/"===n||"-"===n||"("===n||","===n){t+=l;continue}" "===e[s-1]?t+="".concat(l," "):t+=" ".concat(l," ")}else if(a[0]&&e.startsWith("to-zero",s)){let a=s;s+=7,t+=e.slice(a,s+1)}else t+=l}return t}(e=function(e){let t="";for(let a=0;a<e.length;a++){let s=e[a];"\\"===s&&"_"===e[a+1]?(t+="_",a+=1):"_"===s?t+=" ":t+=s}return t}(e))}var to=a(13735),tc=a.n(to);let td=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),tu=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function tp(e,t){if(!e)return!1;let a=!1;if(t){let[s]=tt(e,"/");a=!!tc()(t.colors,s.split("-").join("."))}return 35===e.charCodeAt(0)||tu.test(e)||td.has(e.toLowerCase())||a}let tm={color:tp,length:tE,percentage:tj,number:function(e){return tb.test(e)||tr(e)},url:tg,position:function(e){let t=0;for(let a of tt(e," ")){if("center"===a||"top"===a||"right"===a||"bottom"===a||"left"===a){t+=1;continue}if(!a.startsWith("var(")){if(tE(a)||tj(a)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let a of tt(e,",")){if("cover"===a||"contain"===a){t+=1;continue}let e=tt(a," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||tE(e)||tj(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let a of tt(e,","))if(!a.startsWith("var(")){if(tg(a)||tv.test(a)||tf.test(a)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let a of tt(e,",")){let e=a.charCodeAt(0);if(e>=48&&e<=57)return!1;a.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return tk.test(e)},vector:function(e){return tN.test(e)},named:()=>!0},th=/^url\(.*\)$/;function tg(e){return th.test(e)}let tf=/^(?:element|image|cross-fade|image-set)\(/,tv=/^(repeating-)?(conic|linear|radial)-gradient\(/,tx=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,tb=new RegExp("^".concat(tx.source,"$")),ty=new RegExp("^".concat(tx.source,"%$"));function tj(e){return ty.test(e)||tr(e)}let tw=new RegExp("^".concat(tx.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function tE(e){return tw.test(e)||tr(e)}let tk=new RegExp("^".concat(tx.source,"(").concat("deg|rad|grad|turn",")$")),tN=new RegExp("^".concat(tx.source," +").concat(tx.source," +").concat(tx.source,"$"));class tC extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let t_=(e,t,a)=>{if("color"===t.type){let s=tc()(a,e.split("-").join("."));if(!s)throw new tC(t.ns,e);return"object"==typeof s&&s.DEFAULT&&(s=s.DEFAULT),{value:s,kind:t.type,class:t.class,raw:e}}let s=a[e];if(!s)throw new tC(t.ns,e);return{value:s,class:t.class,raw:e,kind:t.type}};var tS=a(50967);let tT=a.n(tS)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e8()(e||{}).theme});var tA=a(88430);let tP=e=>{let t=(0,tA.Vi)(e),a=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==a?a.toString():void 0}},tI=(e,t)=>{if(!e)return!1;for(let[a,s]of Object.entries(t)){if(("#fff"===s||"#000"===s)&&(0,tA.Vi)(e).isEqual(s))return a;for(let[t,l]of Object.entries(s))if(l===e)return"".concat(a,"-").concat(t)}return!1};class tM{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,a)=>e.indexOf(t.type)-e.indexOf(a.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+tM.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let tL=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return tM.makeArbitrary(e);for(let[a,s]of Object.entries(t))if(a==e||s==e)return a;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?tM.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?tM.makeArbitrary(e):""},tD=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let a=tT(t),s={important:!1,negative:!1},l=tt(e,":"),n=l.pop(),r=[];for(let e=l.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):ti(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:tl.get(e)||"misc",value:e}}(l[e],a.screens);null!==t&&r.push(t)}"!"===n[0]&&(s.important=!0,n=n.slice(1)),"-"===n[0]&&(s.negative=!0,n=n.slice(1));let i=ts.get(n);if(i)return{root:n,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:n,kind:"named",value:i.value},variants:r,modifier:null,important:s.important,negative:s.negative,arbitrary:!1};let[o,c]=function(e,t){if(t.has(e))return[e,null];let a=e.lastIndexOf("-");if(-1===a)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let s=e.slice(0,a);if(t.has(s))return[s,e.slice(a+1)];a=e.lastIndexOf("-",a-1)}while(a>0);return[null,null]}(n,ta);if(!o)return{root:n,kind:"error",message:"Tailwindcss core plugin not found"};let d=ta.get(o),u=null,[p,m=null]=tt(c||"","/");if(m&&tp(p.replace(/[\[\]]/g,""),a)&&(u=tL(m,a.opacity)),p&&"["===p[0]&&"]"===p[p.length-1]){let e=p.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let s of t){var a;if(null===(a=tm[s])||void 0===a?void 0:a.call(tm,e))return s}return null}(e,Array.from(d.values()).map(e=>{let{type:t}=e;return t})),l=d.find(e=>e.type===t);if("color"===t){let t=tP(e);if(!t)return{root:n,kind:"error",message:"Color is not correct"};p=tI(t.hex,a[(null==l?void 0:l.scaleKey)||"colors"])||t.hex}else d.length>0&&(l=d.find(e=>e.type===t)||d.find(e=>"color"!==e.type));return e=ti(e),{root:o,kind:"functional",property:l.ns,value:e,valueDef:{value:e,class:l.class,raw:p,kind:t||"named"},variants:r,modifier:u,arbitrary:!0,important:s.important,negative:s.negative}}c||(c="DEFAULT");let h=d.find(e=>{let{scaleKey:t}=e;return c.split("-")[0]in a[t]||p in a[t]});if(!h)return{root:n,kind:"error",message:'found "'.concat(d.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(c,'".')};let g=t_("color"===h.type?p:c,h,a[h.scaleKey]);return{root:o,kind:"functional",property:h.ns,value:g.value,valueDef:g,variants:r,modifier:u,important:s.important,negative:s.negative,arbitrary:!1}};class tR extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let tz=(e,t)=>{let a=tT(t),s=new tM,l=e.negative||!1;s.appendVariants(...e.variants||[]),e.important&&s.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),l=!0);let[n]=Array.from(ts.entries()).filter(t=>{let[,a]=t;return a.ns===e.property}).find(t=>{let[,a]=t;return a.value===e.value})||[];if(n)return s.addRoot(n).toString();let[r,i=[]]=Array.from(ta.entries()).find(t=>{let[,a]=t;return a.some(t=>t.ns===e.property)})||[];if(!r)throw new tR(e.property);if(s.addRoot(r),tp(e.value,a)){let t=i.find(e=>"color"===e.type);if(!t)throw new tR(e.property);let l=tc()(a[t.scaleKey||"colors"],e.value.split("-").join("."));if(l&&"object"!=typeof l)return s.appendModifier(tL(e.modifier,a.opacity)).addValue(e.value).toString();let n=tP(e.value);return n?s.appendModifier(tL(n.alpha||e.modifier,a.opacity)).addValue(tI(n.hex,a[t.scaleKey||"colors"])||tM.makeArbitrary(n.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new tR(e.property);let c=tO(e.value,a[o.scaleKey]);return c&&(s.addValue(c),o.supportNegative&&l&&s.makeNegative()),s.toString()},tO=(e,t)=>{if(e){for(let[a,s]of Object.entries(t))if(Array.isArray(s)&&(a===e||s.includes(e))||a===e||s===e)return"DEFAULT"!==a?a:void 0;return tM.makeArbitrary(e)}},tK=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},tZ=(e,t)=>e.findIndex(e=>{let[a]=e;return a===t}),tU=(e,t)=>e>=t,tF=(e,t,a,s)=>{var l,n;let r=Array.isArray(t)?t:[t],i=tK(a),o=r.map(e=>tD(e,a));if(o.some(e=>"error"===e.kind))return e;let c=e.split(/\s+/).filter(Boolean),d=c.filter(e=>{try{var t,l;let n=tD(e.trim(),a);if("error"===n.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===n.property)&&tU(tZ(i,(null===(l=n.variants)||void 0===l?void 0:null===(t=l.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),tZ(i,s||"default"))}catch(e){return!1}}),u=d.reduce((e,t)=>{var s,l,n,r;let o=tD(t.trim(),a),c=tD(e.trim(),a);return"error"===o.kind||"error"===c.kind?e:tZ(i,(null===(l=o.variants)||void 0===l?void 0:null===(s=l.find(e=>"media"===e.type))||void 0===s?void 0:s.value)||"default")<tZ(i,(null===(r=c.variants)||void 0===r?void 0:null===(n=r.find(e=>"media"===e.type))||void 0===n?void 0:n.value)||"default")?t:e},d[0])||"default",p=tD(u.trim(),a),m="error"!==p.kind&&(null===(n=p.variants)||void 0===n?void 0:null===(l=n.find(e=>"media"===e.type))||void 0===l?void 0:l.value)||"default";return[...c.filter(e=>{try{var t,s;let l=tD(e.trim(),a);if("error"===l.kind||!o.some(e=>"error"!==e.kind&&e.property===l.property))return!0;return((null===(s=l.variants)||void 0===s?void 0:null===(t=s.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(m||"default")}catch(e){return!0}}),m&&"default"!==m?r.map(e=>"".concat(m,":").concat(e)).join(" "):r.join(" ")].join(" ")},tW=(e,t,a,s)=>{let l=tK(a),n=e.split(/\s+/g).map(e=>{try{var n;let r=tD(e.trim(),a);if("error"===r.kind||r.property!==t)return null;let i=null===(n=r.variants)||void 0===n?void 0:n.find(e=>"media"===e.type);if(i&&s){let e=tZ(l,i.value),t=tZ(l,s);if(-1===t&&(t=l.length),e<t)return null}return{parsed:r,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===n.length)return null;if(!s)return n.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:tZ(l,t.breakpoint)<tZ(l,e.breakpoint)?t:e,n[0]).parsed;let r=tZ(l,s),i=n.filter(e=>"default"===e.breakpoint||tU(tZ(l,e.breakpoint),r));return 0===i.length?null:i.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:tZ(l,t.breakpoint)<tZ(l,e.breakpoint)?t:e,i[0]).parsed},tB=(e,t)=>{let a=tK(e);if(!a)return"default";let s=t.getBoundingClientRect().width;for(let[e,t]of a){let a="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==a&&s>=a)return e}return"default"},tH=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},tV=()=>{let{code:e}=(0,ef.v)(),t=(0,o.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,a]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,o.useMemo)(()=>tH(t)||e8()({content:[]}),[t])},tG=()=>{let e=tV(),{twi:t}=(0,e7.XM)({config:e,options:{merge:!0}}),a=(0,o.useCallback)((t,a)=>{let s=document.querySelector("iframe");if(!s)return t;let l=tB(e,s);return tF(t,a,e,l)},[e]),s=(0,o.useCallback)((t,a)=>{if(!t)return null;let s=document.querySelector("iframe");if(!s)return null;let l=tB(e,s);return tW(t,a,e,l)},[e]);return{theme:null==e?void 0:e.theme,parse:t=>tD(t,e),classname:t=>tz(t,e),updateTwClassname:a,classNameToStyle:t,getRelevantTwClass:s}};var tX=a(49340),tq=a(74991),tY=a(89651),tQ=a(1346),tJ=a(49360),t$=a(36710),t0=a(26034);let t1=e=>{let{disabled:t,onImagesUploaded:a,onUrlSubmitted:s,maxSize:l=20971520,className:n}=e,r=(0,t$.O)(),[c]=(0,tX.a)(),d=(0,o.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,tJ.Z)(),type:e.type}));return await Promise.all(t.map(async e=>{await (0,t0.c)(r,e.id,e.file);let{url:t}=await (0,t0.S)(r,{dir_name:c.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}))},[r,c]),{getInputProps:u,open:p,getRootProps:m,isDragActive:h}=(0,tQ.uI)({onDrop:async e=>{a(await d(e))},noClick:!0,noKeyboard:!0,maxSize:l,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,o.useEffect)(()=>{let e=async e=>{var t;let s=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);s.length&&a(await d(s))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[r,a,d,c]);let[g,f]=(0,o.useState)("");return(0,i.jsxs)("div",{className:(0,w.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},n),children:[h&&(0,i.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,i.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,i.jsx)("p",{children:"Drop images here"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",l/1048576,"MB"]})]})}),(0,i.jsxs)("div",{...m(),children:[(0,i.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:p,disabled:t,children:[(0,i.jsx)(y.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,i.jsx)("input",{...u()})]}),(0,i.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),s(e.target.elements.namedItem("image-url").value)},children:(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)(eH.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{f(e.target.value)},value:g}),(0,i.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,i.jsx)(T.z,{variant:"muted",type:"submit",size:"sm",className:(0,w.cn)("opacity-0 transition-opacity",g?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})},t2=e=>{let{title:t,children:a,disabled:s}=e;return(0,i.jsxs)("div",{className:(0,w.cn)("grid grid-cols-[100px_1fr]",{hidden:s}),children:[(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"py-2 text-sm font-semibold text-muted-foreground",children:t})}),(0,i.jsx)("div",{className:"flex flex-col gap-2",children:a})]})},t4=e=>{let{children:t,disabled:a}=e;return(0,i.jsx)("div",{className:(0,w.cn)("border-px flex flex-col gap-2",{hidden:a}),children:t})},t5=()=>{let e=Q(),{selectedElements:t}=eC(),{history:a,setHistory:s,currentClassName:l,setCurrentClassName:i}=(0,ef.v)(),c=(0,_.Eh)(e=>e.setSelectedElements),d=ek(),{updateTwClassname:u,classNameToStyle:p,classname:h}=tG(),g=(0,o.useCallback)(e=>{s(t=>[...t,e].slice(-100))},[s]),f=(0,o.useCallback)(e=>{switch(e.type){case r.TEXT_CHANGE:d(e.element,t=>(0,ey.Rw)(t,e.newText));break;case r.IMAGE_CHANGE:d(e.element,t=>(0,ey.R5)(t,{src:e.newUrl}));break;case r.REMOVE_NODE:d(e.element,(e,t)=>{t.remove()});break;case r.CLASS_NAME_UPDATE:case r.CLASS_NAME_SET:d(e.element,t=>(0,ey.R5)(t,{className:e.newClassName}));break;case r.DUPLICATE_NODE:d(e.element,(e,t)=>{t.insertAfter(e)})}g(e)},[d,g]),v=(0,o.useCallback)(a=>{switch(a.type){case r.TEXT_CHANGE:d(a.element,e=>(0,ey.Rw)(e,a.oldText)),e({type:n.SET_ELEMENT_CONTENT,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},content:a.oldText}}),c(t.map(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber?{...e,textContent:a.oldText}:e));break;case r.IMAGE_CHANGE:d(a.element,e=>(0,ey.R5)(e,{src:a.oldUrl})),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{src:a.oldUrl}}});break;case r.REMOVE_NODE:d(a.element,(e,t)=>{try{let e=JSON.parse(a.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:a},e)}}),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{style:""}}});break;case r.CLASS_NAME_UPDATE:case r.CLASS_NAME_SET:d(a.element,e=>(0,ey.R5)(e,{className:a.oldClassName})),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{style:p(a.oldClassName)}}}),t.some(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber)&&i(a.oldClassName);break;case r.DUPLICATE_NODE:d(a.element,(e,t)=>{let a=t.getNextSibling();a&&a.remove()})}},[d,e,c,t,p,i]),x=(0,o.useCallback)(()=>{let e=a[a.length-1];e&&(v(e),s(e=>e.slice(0,-1)))},[a,s,v]),b=(0,o.useCallback)((a,s)=>{let l=String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),i="";d(a,e=>{var t;i=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),i!==l&&(f({type:r.TEXT_CHANGE,element:a,oldText:i,newText:l}),e({type:n.SET_ELEMENT_CONTENT,payload:{id:{path:a.filePath,line:a.lineNumber.toString()},content:l}}),c(t.map(e=>e.filePath===a.filePath&&e.lineNumber===a.lineNumber?{...e,textContent:l}:e)))},[f,e,t,c,d]),y=(0,o.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l="";d(t,e=>{var t,a;l=(null===(a=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.value)||""}),f({type:r.IMAGE_CHANGE,element:t,oldUrl:l,newUrl:a}),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{src:s}}})},[f,d,e]),j=(0,o.useCallback)(t=>{m.ZP.capture("visual_edits:element_deleted");let a="";d(t,e=>{a=(0,ej.default)(e).code}),f({type:r.REMOVE_NODE,element:t,node:a}),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{style:"display: none;"}}}),c([])},[f,d,e,c]),w=(0,o.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=null;d(t,e=>{l=(0,ey.Xu)(e)}),f({type:r.CLASS_NAME_SET,element:t,oldClassName:l||"",newClassName:a}),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{style:p(a),...s?{class:a}:{}}}})},[p,f,d,e]),E=(0,o.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,o=null;return(d(t,e=>{null!==(i=(0,ey.Xu)(e))&&(o=u(i,a))}),null===i||null===o)?l:(s||f({type:r.CLASS_NAME_UPDATE,element:t,oldClassName:i,newClassName:o}),e({type:n.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{"data-lov-dirty":"true",style:p(o)+";"+p(a)}}}),o)},[p,l,f,d,e,u]),k=(0,o.useCallback)(e=>{f({type:r.DUPLICATE_NODE,element:e})},[f]),N=(0,o.useCallback)((e,t)=>{i((0,ey.EE)(e,t))},[i]),C=(0,o.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let s=Array.isArray(t)?t.map(e=>h(e)):[h(t)],l=E(e,s,a);return a||i(l),l}catch(e){return l}},[h,E,i,l]),S=(0,o.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];w(e,t,a),i(t)},[w,i]);return{handleTextChange:b,handleImageChange:y,handleRemoveNode:j,updateElementClassName:E,setElementClassName:w,handleDuplicateNode:k,undoLastOperation:x,initializeClassName:N,handleUpdateClassName:C,handleUpdateClassNameAdvanced:S}},t6=e=>{let t,a;if(!e)return;let s=1;if(e.modifier){var l,n;s=(null===(l=e.modifier)||void 0===l?void 0:l.startsWith("["))&&(null===(n=e.modifier)||void 0===n?void 0:n.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(s=0),e.valueDef.raw.startsWith("#")?a=e.valueDef.raw:(t=e.valueDef.raw,a=e.value);let r=eq(a);if(!r)return{name:t,hex:void 0};let i=eY(r.r,r.g,r.b,s);return{name:t||i,hex:i,hexWithoutAlpha:eY(r.r,r.g,r.b,1)}},t3={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},t9=e=>{var t,a,s,l,n,r,c,d,u;let{element:p,disabled:h}=e,[g]=(0,tX.a)(),{currentClassName:f,ast:v}=(0,ef.v)(),x=H(p),{handleImageChange:b,initializeClassName:j,handleUpdateClassName:E,handleUpdateClassNameAdvanced:k}=t5();(0,o.useEffect)(()=>{j(p,v)},[p,v,j]);let N=(0,eE.W)(e=>e.addUpload),{theme:C,getRelevantTwClass:_,parse:S,classname:A}=tG(),P=(0,o.useMemo)(()=>{var e,t,a,s,l,n,r,i,o,c,d,u;if(!f)return;let p=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},m=_(f,"padding"),h=_(f,"paddingY"),g=_(f,"paddingX");return{paddingTop:null!==(n=null!==(l=p(null===(e=_(f,"paddingTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:p(null==h?void 0:h.value))&&void 0!==n?n:p(null==m?void 0:m.value),paddingBottom:null!==(i=null!==(r=p(null===(t=_(f,"paddingBottom"))||void 0===t?void 0:t.value))&&void 0!==r?r:p(null==h?void 0:h.value))&&void 0!==i?i:p(null==m?void 0:m.value),paddingLeft:null!==(c=null!==(o=p(null===(a=_(f,"paddingLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:p(null==g?void 0:g.value))&&void 0!==c?c:p(null==m?void 0:m.value),paddingRight:null!==(u=null!==(d=p(null===(s=_(f,"paddingRight"))||void 0===s?void 0:s.value))&&void 0!==d?d:p(null==g?void 0:g.value))&&void 0!==u?u:p(null==m?void 0:m.value)}},[_,f]),I=(0,o.useMemo)(()=>{var e,t,a,s,l,n,r,i,o,c,d,u;if(!f)return;let p=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},m=_(f,"margin"),h=_(f,"marginY"),g=_(f,"marginX");return{marginTop:null!==(n=null!==(l=p(null===(e=_(f,"marginTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:p(null==h?void 0:h.value))&&void 0!==n?n:p(null==m?void 0:m.value),marginBottom:null!==(i=null!==(r=p(null===(t=_(f,"marginBottom"))||void 0===t?void 0:t.value))&&void 0!==r?r:p(null==h?void 0:h.value))&&void 0!==i?i:p(null==m?void 0:m.value),marginLeft:null!==(c=null!==(o=p(null===(a=_(f,"marginLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:p(null==g?void 0:g.value))&&void 0!==c?c:p(null==m?void 0:m.value),marginRight:null!==(u=null!==(d=p(null===(s=_(f,"marginRight"))||void 0===s?void 0:s.value))&&void 0!==d?d:p(null==g?void 0:g.value))&&void 0!==u?u:p(null==m?void 0:m.value)}},[_,f]),M=t6(_(f,"textColor")),L=t6(_(f,"backgroundColor")),[D,z]=(0,tY.Z)("lov_vis_advancedOpen",{defaultValue:!1}),O=(0,o.useRef)({}),[K,Z]=(0,o.useState)({}),U=(0,o.useCallback)(e=>{var t;let a=e.property,s=Date.now();Z(t=>({...t,[a]:e.value})),O.current[a]&&cancelAnimationFrame(O.current[a].rafId);let l=()=>{let e=O.current[a];if(e){let t=S(A(e.immediateValue));if("error"===t.kind)return;let l=t.valueDef.raw,n=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===x&&l.split("-").length>1){let[e,t]=l.split("-"),a=parseInt(t)-100;if((a=100*Math.floor(a/100))>0){let t="".concat(e,"-").concat(a);n.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}E(p,n),O.current[a].lastUpdateTime=s,delete O.current[a]}};O.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=O.current[a])||void 0===t?void 0:t.lastUpdateTime)||0},O.current[a].rafId=requestAnimationFrame(()=>{l()})},[A,p,E,S]),F=(0,o.useCallback)((e,t)=>{var a;return null!==(a=K[e])&&void 0!==a?a:t},[K]),W=null===(t=_(f,"textAlign"))||void 0===t?void 0:t.value;return(0,i.jsxs)("div",{children:[null===f?(0,i.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,i.jsx)("p",{className:"text-sm",children:"This element can't be styled. You can edit it by resetting the styling or chatting."}),(0,i.jsx)(T.z,{onClick:()=>k(p,"",!0),variant:"secondary",children:"Reset styling"})]}):(0,i.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[(0,i.jsxs)(t4,{disabled:"img"===x,children:[(0,i.jsx)(t2,{title:"Margin",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(e6.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(r=null==I?void 0:I.marginLeft)&&void 0!==r?r:0,placeholder:"X margin",disabled:h,onChange:e=>(null==I?void 0:I.marginLeft)!==e&&U({property:"marginX",value:"".concat(e,"px")}),leftIcon:(0,i.jsx)(eR.Z,{className:"size-4 fill-muted-foreground"})}),(0,i.jsx)(e6.R,{max:240,value:null!==(c=null==I?void 0:I.marginTop)&&void 0!==c?c:0,className:"flex-grow rounded-md bg-input",placeholder:"Y margin",disabled:h,onChange:e=>(null==I?void 0:I.marginTop)!==e&&U({property:"marginY",value:"".concat(e,"px")}),leftIcon:(0,i.jsx)(eD.Z,{className:"size-4 fill-muted-foreground"})})]})}),(0,i.jsx)(t2,{title:"Padding",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(e6.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(d=null==P?void 0:P.paddingLeft)&&void 0!==d?d:0,placeholder:"X padding",disabled:h,onChange:e=>(null==P?void 0:P.paddingLeft)!==e&&U({property:"paddingX",value:"".concat(e,"px")}),leftIcon:(0,i.jsx)(ez.Z,{className:"size-4 fill-muted-foreground"})}),(0,i.jsx)(e6.R,{max:240,value:null!==(u=null==P?void 0:P.paddingTop)&&void 0!==u?u:0,className:"flex-grow rounded-md bg-input",placeholder:"Y padding",disabled:h,onChange:e=>(null==P?void 0:P.paddingTop)!==e&&U({property:"paddingY",value:"".concat(e,"px")}),leftIcon:(0,i.jsx)(eO.Z,{className:"size-4 fill-muted-foreground"})})]})})]}),(0,i.jsxs)(t4,{disabled:"text"!==x&&"button"!==x,children:[(0,i.jsx)(t2,{title:"Font size",children:(0,i.jsxs)(e3.Ph,{disabled:h,onValueChange:e=>{e&&(console.log("font size changed"),m.ZP.capture("visual_edits:font_size_changed"),U({property:"fontSize",value:e}))},onOpenChange:e=>{if(!e){var t;E(p,[{property:"fontSize",value:(null===(t=_(f,"fontSize"))||void 0===t?void 0:t.valueDef.raw)||"base"}])}},value:(null===(a=_(f,"fontSize"))||void 0===a?void 0:a.valueDef.raw)||"base",children:[(0,i.jsx)(e3.i4,{className:"bg-input",children:(0,i.jsx)(e3.ki,{placeholder:"Select font size"})}),(0,i.jsx)(e3.Bw,{children:Object.entries((null==C?void 0:C.fontSize)||{}).map(e=>{var t;let[a,s]=e;return(0,i.jsx)(e3.Ql,{onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{E(p,{property:"fontSize",value:t},!0)})},value:a,"data-value":a,children:null!==(t=t3.fontSize[a])&&void 0!==t?t:a},a)})})]})}),(0,i.jsx)(t2,{title:"Font weight",children:(0,i.jsxs)(e3.Ph,{disabled:h,onValueChange:e=>{e&&(m.ZP.capture("visual_edits:font_weight_changed"),U({property:"fontWeight",value:e}))},onOpenChange:e=>{if(!e){var t;E(p,[{property:"fontWeight",value:(null===(t=_(f,"fontWeight"))||void 0===t?void 0:t.valueDef.raw)||"normal"}])}},value:null===(s=_(f,"fontWeight"))||void 0===s?void 0:s.valueDef.raw,children:[(0,i.jsx)(e3.i4,{className:"bg-input",children:(0,i.jsx)(e3.ki,{placeholder:"Select weight"})}),(0,i.jsx)(e3.Bw,{children:Object.entries((null==C?void 0:C.fontWeight)||{}).filter(e=>"black"!==e[0]).map(e=>{let[t,a]=e;return(0,i.jsx)(e3.Ql,{"data-value":t,value:t,onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{E(p,{property:"fontWeight",value:t},!0)})},children:(0,i.jsx)("span",{className:"capitalize",children:t})},t)})})]})}),(0,i.jsx)(t2,{title:"Color",children:(0,i.jsx)(e5,{disabled:h,presetColors:null==C?void 0:C.colors,color:F("textColor",null==M?void 0:M.hex)||"transparent",onChange:e=>{e&&(m.ZP.capture("visual_edits:text_color_changed"),U({property:"textColor",value:e||"inherit"}))},children:(0,i.jsxs)(T.z,{variant:"outline",disabled:h,className:"flex h-9 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,i.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(eB,{})}),(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==M?void 0:M.hexWithoutAlpha}}),(0,i.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==M?void 0:M.hex}})]}),(0,i.jsx)("span",{className:"truncate",children:(null==M?void 0:M.name)||"Inherit"})]})},"".concat(p.filePath,":").concat(p.lineNumber))}),(0,i.jsx)(t2,{title:"Alignment",children:(0,i.jsxs)(tq.E,{className:"flex flex-row justify-end gap-2",value:W,onValueChange:e=>U({property:"textAlign",value:e}),children:[(0,i.jsxs)(eV._,{title:"Left",children:[(0,i.jsx)(tq.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,i.jsx)(T.z,{variant:"outline",className:(0,w.cn)("bg-input p-2",{"bg-accent":"left"===W}),onClick:()=>U({property:"textAlign",value:"left"}),children:(0,i.jsx)(eU.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,i.jsxs)(eV._,{title:"Center",children:[(0,i.jsx)(tq.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,i.jsx)(T.z,{variant:"outline",className:(0,w.cn)("bg-input p-2",{"bg-accent":"center"===W}),onClick:()=>U({property:"textAlign",value:"center"}),children:(0,i.jsx)(eK.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,i.jsxs)(eV._,{title:"Right",children:[(0,i.jsx)(tq.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,i.jsx)(T.z,{variant:"outline",className:(0,w.cn)("bg-input p-2",{"bg-accent":"right"===W}),onClick:()=>U({property:"textAlign",value:"right"}),children:(0,i.jsx)(eF.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,i.jsxs)(eV._,{title:"Justify",children:[(0,i.jsx)(tq.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,i.jsx)(T.z,{variant:"outline",className:(0,w.cn)("bg-input p-2",{"bg-accent":"justify"===W}),onClick:()=>U({property:"textAlign",value:"justify"}),children:(0,i.jsx)(eZ.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,i.jsxs)(t4,{disabled:"div"!==x&&"button"!==x,children:[(0,i.jsx)(t2,{title:"Background",children:(0,i.jsx)(e5,{disabled:h,color:F("backgroundColor",null==L?void 0:L.hex)||"transparent",onChange:e=>{e&&(m.ZP.capture("visual_edits:background_color_changed"),U({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==C?void 0:C.colors,children:(0,i.jsxs)(T.z,{variant:"outline",disabled:h,className:"flex h-9 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,i.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(eB,{})}),(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==L?void 0:L.hexWithoutAlpha}}),(0,i.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==L?void 0:L.hex}})]}),(0,i.jsx)("span",{className:"truncate",children:(null==L?void 0:L.name)||"Inherit"})]})},"".concat(p.filePath,":").concat(p.lineNumber))}),(0,i.jsx)(t2,{title:"Border radius",children:(0,i.jsxs)(e3.Ph,{disabled:h,onValueChange:e=>e&&U({property:"borderRadius",value:e}),value:(null===(l=_(f,"borderRadius"))||void 0===l?void 0:l.valueDef.raw)||"none",children:[(0,i.jsx)(e3.i4,{className:"bg-input hover:bg-input",children:(0,i.jsx)(e3.ki,{placeholder:"Select border radius"})}),(0,i.jsx)(e3.Bw,{children:Object.entries((null==C?void 0:C.borderRadius)||{}).map(e=>{var t;let[a,s]=e;return(0,i.jsx)(e3.Ql,{value:a,children:null!==(t=t3.borderRadius[a])&&void 0!==t?t:"Default"},a)})})]})})]}),(0,i.jsxs)(t4,{disabled:"img"!==x,children:[(0,i.jsx)(t2,{title:"Image",children:(0,ey.cB)(p,v,"src")?(0,i.jsx)(t1,{disabled:h||!(0,ey.cB)(p,v,"src"),onUrlSubmitted:e=>b(p,e),onImagesUploaded:e=>{e.length>0&&(m.ZP.capture("visual_edits:image_uploaded"),N({dir_name:g.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),b(p,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,i.jsx)(t2,{title:"Resize",children:(0,i.jsxs)(e3.Ph,{disabled:h,onValueChange:e=>e&&U({property:"objectFit",value:e}),value:((null===(n=_(f,"objectFit"))||void 0===n?void 0:n.valueDef.raw)||"object-none").replace("object-",""),children:[(0,i.jsx)(e3.i4,{className:"bg-input",children:(0,i.jsx)(e3.ki,{placeholder:"Select border radius"})}),(0,i.jsxs)(e3.Bw,{className:"bg-popover",children:[(0,i.jsx)(e3.Ql,{value:"contain",children:"Contain"}),(0,i.jsx)(e3.Ql,{value:"cover",children:"Cover"}),(0,i.jsx)(e3.Ql,{value:"fill",children:"Fill"}),(0,i.jsx)(e3.Ql,{value:"none",children:"None"}),(0,i.jsx)(e3.Ql,{value:"scale-down",children:"Scale down"})]})]})})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex flex-row justify-between pb-2",children:[(0,i.jsxs)(T.z,{variant:"ghost",size:"sm",className:(0,w.cn)("h-6 py-0.5 pl-0.5 text-xs transition duration-300 hover:bg-secondary",{"!opacity-0":null===f}),onClick:()=>{z(!D),m.ZP.capture("visual_edits:advanced_clicked")},disabled:null===f,children:[(0,i.jsx)(y.Z,{name:"chevron_right",size:"small",className:(0,w.cn)("transition-transform duration-150 ease-in-out",{"rotate-90":D})}),"Advanced"]}),(0,i.jsx)("div",{className:(0,w.cn)("flex flex-row gap-2",{"opacity-0":!D}),children:(0,i.jsxs)(J.u,{delayDuration:0,children:[(0,i.jsx)(J.aJ,{children:(0,i.jsx)(y.Z,{name:"help",size:"small",className:"text-muted-foreground"})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:"Enter custom Tailwind classes"})})]})})]}),(0,i.jsx)(R.E.div,{initial:{opacity:0,height:0},animate:{opacity:D?1:0,height:D?"auto":0},transition:{duration:.15,bounce:0},className:"flex flex-row gap-2",children:(0,i.jsx)("div",{className:"w-full pb-12 pt-2",children:(0,i.jsx)(eM.g,{disabled:h,value:f||"",className:"w-full bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",onChange:e=>k(p,e.target.value)})})})]})},t8=e=>{var t,a;let{element:s,disabled:l=!1}=e,r=H(s),{handleTextChange:c,handleRemoveNode:d,handleDuplicateNode:u,undoLastOperation:p,initializeClassName:m}=t5(),{ast:h,currentClassName:g,hasInitialCode:f}=(0,ef.v)(),v=(0,o.useMemo)(()=>(0,ey.H2)(s,h),[s,h]);(0,o.useEffect)(()=>{m(s,h)},[s,h,m]),(0,o.useEffect)(()=>{let e=e=>{if(e.data.type===n.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,u,d,p]);let x=null!==(a=W[H(s)])&&void 0!==a?a:null,{status:b}=(0,eL.N)(),j=(null==b?void 0:b.dev_server.state)!=="started",E=Q(),k=(0,_.Eh)(e=>e.selectedElements[0]),N=(0,i.jsxs)(J.u,{delayDuration:0,children:[(0,i.jsx)(eA.aJ,{className:"w-fit",children:(0,i.jsxs)(eI.C,{variant:"outline",className:"group relative flex w-fit cursor-pointer flex-row items-center gap-2 px-3 py-1 text-base font-medium",onClick:()=>{E({type:n.GET_PARENT_ELEMENT,payload:{id:{path:k.filePath,line:k.lineNumber.toString()}}})},children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(eP.Z,{className:"absolute left-0 top-0 size-4 opacity-0 transition-opacity duration-200 group-hover:opacity-100"}),(0,i.jsx)(x,{className:(0,w.cn)("size-4 fill-foreground","transition-opacity duration-200 group-hover:opacity-0")})]}),(null===(t=s.attrs)||void 0===t?void 0:t["data-component-name"])||s.elementType]})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:"Select parent"})})]});return j||!f?(0,i.jsx)("div",{className:"overflow-hidden px-1",children:(0,i.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[N,(0,i.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for Sandbox to start..."})})]})}):(0,i.jsx)("div",{className:"overflow-hidden px-1",children:(0,i.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[N,v?(0,i.jsxs)(t2,{title:"Content",disabled:"text"!==r&&"button"!==r,children:[(0,i.jsx)(eM.g,{value:String(s.textContent||"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),disabled:!v||l,className:(0,w.cn)("resize-none bg-inherit text-base leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!v&&"hidden"),placeholder:"Enter text here",onChange:e=>c(s,e.target.value)}),(0,i.jsx)("p",{className:(0,w.cn)("text-xs text-muted-foreground",{hidden:v}),children:"This element contains dynamic elements so its text cannot be manually edited. Use the chat to change the text."})]}):("text"===r||"button"===r)&&(0,i.jsx)(t2,{title:"Content",children:(0,i.jsxs)("div",{className:"my-auto flex items-center justify-between",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the text by prompting in the chat box, only static text can be edited instantly"}),(0,i.jsxs)(J.u,{delayDuration:0,children:[(0,i.jsx)(eA.aJ,{children:(0,i.jsx)(y.Z,{name:"help",size:"small",className:"inline-block-translate-y-[1px] ml-auto text-muted-foreground"})}),(0,i.jsx)(J._v,{children:"Content linked to backend or code. Ask AI to edit."})]})]})}),(0,i.jsx)(t9,{element:s,disabled:l||null===g})]})})};var t7=e=>{let{onChangeActive:t}=e,{selectedElements:a,canEdit:s,togglePickAndEdit:l}=eC(),r=(0,_.Eh)(e=>e.setSelectedElements),c=a[0],{syncCode:d,generateAst:u,hasUnsavedChanges:p,refreshPreview:h}=(0,ef.v)(),{undoLastOperation:g,handleRemoveNode:f}=t5(),v=(0,eE.W)(e=>e.clearPendingChanges),x=(0,eE.W)(e=>e.clearUploads),[b,j]=(0,o.useState)(!1),E=(0,o.useCallback)(()=>(m.ZP.capture("visual_edits:save_clicked"),j(!0),d(eE.W.getState().pendingChanges).then(()=>{j(!1),r([]),t(!1)})),[r,d,t]);(0,X.y1)("meta+z",e=>{e.preventDefault(),s&&g()}),(0,X.y1)("meta+enter",e=>{e.preventDefault(),s&&E().finally(()=>{t(!1)})}),(0,X.y1)("escape",()=>{p?E().finally(()=>{t(!1),r([])}):(t(!1),r([]))});let[k,N]=(0,o.useState)(!1),C=(0,o.useCallback)(()=>{m.ZP.capture("visual_edits:discard_clicked"),v(),x(),h(),u(),t(!1)},[v,x,u,t,h]);(0,o.useEffect)(()=>{let e=e=>{if(e.data.type===n.KEYBIND){let{compositeKey:a}=e.data.payload;switch(a){case"Meta+z":s&&g();break;case"Meta+Enter":s&&E();break;case"Escape":p?E().finally(()=>{t(!1),r([])}):(t(!1),r([]))}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,E,C,p,t,r,g]);let S=(0,o.useCallback)(()=>{m.ZP.capture("visual_edits:discard_clicked"),v(),x(),h(),r([]),u(),t(!1)},[v,x,u,t,h,r]);return(0,i.jsx)("div",{className:"pb-2",children:(0,i.jsxs)("div",{className:"relative flex h-full w-full flex-col rounded-xl border border-muted-border bg-muted p-2",children:[(0,i.jsxs)("div",{className:"pointer-events-none absolute left-0 right-0 top-0 flex flex-row justify-end gap-1 p-2",children:[(0,i.jsxs)(ea.Vq,{children:[(0,i.jsx)(ea.hg,{children:(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"ghost",disabled:!s||b,className:(0,w.cn)("pointer-events-auto inline-flex items-center gap-2 hover:bg-secondary",{hidden:!c}),children:(0,i.jsx)(eS.Z,{className:"size-4 scale-[0.8]"})})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:"Delete element"})})]})}),(0,i.jsx)(ea.cZ,{className:"pointer-events-auto max-w-sm p-4",children:(0,i.jsxs)(ea.fK,{children:[(0,i.jsx)(ea.$N,{children:"Delete Element"}),(0,i.jsx)(ea.Be,{children:"Are you sure you want to delete this element?"}),(0,i.jsxs)(ea.cN,{className:"flex justify-end gap-2 pt-4",children:[(0,i.jsx)(e_.GG,{className:"text-sm",children:"Cancel"}),(0,i.jsx)(e_.GG,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"destructive",onClick:()=>f(c),children:"Delete"})})]})]})})]}),(0,i.jsxs)(ea.Vq,{open:k,onOpenChange:N,children:[(0,i.jsx)(ea.hg,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"ghost",className:"duration-125 pointer-events-auto transition ease-out hover:bg-secondary",onClick:e=>{p||(e.preventDefault(),e.stopPropagation(),t(!1),r([]))},disabled:b,children:(0,i.jsx)(eT.Z,{className:"size-4"})})}),(0,i.jsx)(ea.cZ,{className:"pointer-events-auto max-w-sm p-4",children:(0,i.jsxs)(ea.fK,{children:[(0,i.jsx)(ea.$N,{children:"Discard Changes"}),(0,i.jsx)(ea.Be,{children:"Are you sure you want to discard your changes?"}),(0,i.jsxs)(ea.cN,{className:"flex justify-end gap-2 pt-4",children:[(0,i.jsx)(e_.GG,{className:"text-sm",children:"Cancel"}),(0,i.jsx)(e_.GG,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"destructive",onClick:S,children:"Discard"})})]})]})})]})]}),(0,i.jsx)(D.M,{children:(0,i.jsx)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},exit:{opacity:0,y:20},children:!!c&&(0,i.jsx)(t8,{element:c,disabled:b||!s})})}),!c&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,i.jsx)(y.Z,{name:"my_location",className:"h-4 w-4"})," Edit"]}),(0,i.jsx)("div",{className:"flex h-full flex-col items-center justify-center pb-14 text-muted-foreground opacity-80",children:(0,i.jsx)("p",{className:"pt-4 text-center text-sm",children:"Select to edit or ask Lovable to modify"})})]}),(0,i.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 flex flex-row gap-4 p-3",children:(0,i.jsx)("div",{className:"flex w-full items-center justify-end gap-2 pt-2",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 transition-all duration-300",children:[(0,i.jsx)(T.z,{variant:"ghost",onClick:C,disabled:!p||b,className:"pointer-events-auto hover:bg-secondary",children:"Discard"}),(0,i.jsx)(T.z,{onClick:E,loading:b,disabled:!p,className:"pointer-events-auto",variant:"accent",children:"Save"})]})})})]})})};let ae=()=>{let{handleDeactivatePickAndEdit:e}=eC(),{enableServer:t}=(0,ef.v)(),a=(0,_.Eh)(e=>e.setIsPickAndEditActive);return(0,o.useEffect)(()=>(t(),a(!0),()=>{e()}),[t,e,a]),null},at=e=>{let{isActive:t,onChangeActive:a}=e;return(0,o.useEffect)(()=>{let e=e=>{if(e.data.type===n.KEYBIND){let{compositeKey:s}=e.data.payload;switch(s){case"Alt+S":case"Alt+\xdf":a(!t)}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,a]),(0,i.jsxs)(i.Fragment,{children:[!!t&&(0,i.jsx)(ae,{}),(0,i.jsx)(D.M,{children:t&&(0,i.jsx)(R.E.div,{initial:{height:0,opacity:0},animate:{height:t?"auto":0,opacity:t?1:0},transition:{type:"spring",duration:.5,bounce:0},exit:{height:0,opacity:0},children:(0,i.jsx)(t7,{onChangeActive:a})},"design-panel")})]})};var aa=a(44831);let as=e=>{let{chatPanelRef:t}=e,a=(0,c.D)(),s=(0,_.Eh)(e=>e.activeEdit),l=eg(),{tab:n="chat"}=(0,p.useParams)(),r=(0,u.NL)(),d=(0,_.Eh)(e=>e.userProjectPermissions),g=(0,aa.m)({projectId:a,onRepoInaccessible:()=>{r.setQueryData(ed.V.repoAccessibility({projectId:a,userProjectPermissions:d}).queryKey,()=>({accessibility:eu.T.accessibility.REPO_NOT_ACCESSIBLE}))},localStorageKey:a}),{userData:f}=(0,h.v)(),[v,x]=(0,o.useState)(!1),b=(0,em.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),y=(0,o.useCallback)(async e=>{var t,s,l;let{body:n,options:r}=e;null==r||null===(t=r.clear)||void 0===t||t.call(r),m.ZP.capture(ec.S.CHAT.MESSAGE_SENT,{project_id:a,selected_element:(null===(s=n.selected_elements)||void 0===s?void 0:s.length)||null});let i=null==b?void 0:b.supabase_organization_id,o=null==f?void 0:null===(l=f.supabase)||void 0===l?void 0:l.find(e=>e.supabase_org_id===i);if(b&&o&&!o.has_analytics_scope){x(!0);return}await g.mutateAsync({body:n,restore:null==r?void 0:r.restore,clear:null==r?void 0:r.clear})},[a,g]);return(0,i.jsxs)(L.x,{localStorageKey:a,onSendChatMessage:y,hasActiveLock:l,children:["history"===n?(0,i.jsx)(ar,{activeEdit:s,projectId:a}):(0,i.jsx)(an,{chatPanelRef:t}),(0,i.jsx)(el,{open:v,onOpenChange:x})]})},al=e=>e.charAt(0).toUpperCase()+e.slice(1),an=(0,o.memo)(e=>{let{chatPanelRef:t}=e,a=(0,ep.ZP)(e=>e.setSelectedImageUrl),{hasUnsavedChanges:s}=(0,ef.v)(),l=(0,c.v)(),n=(0,_.Eh)(e=>e.isDesignActive),r=(0,_.Eh)(e=>e.setIsDesignActive),{dropzoneElement:o,openFileUpload:d,getInputProps:u}=(0,en.B)(t),p=n&&s,h=(0,_.Eh)(e=>{var t;return null===(t=e.selectedElements)||void 0===t?void 0:t[0]}),f=ei("alt+s",()=>{p||r(e=>!e)},{enabled:!0}),v=eo();return(0,i.jsxs)("div",{className:"flex max-h-[calc(100%-37px)] shrink-0 flex-col overflow-auto",children:[(0,i.jsx)(at,{isActive:n,onChangeActive:r}),(0,i.jsxs)(g.x,{className:"relative mr-2 md:mr-0",children:[(0,i.jsx)(M.T,{setSelectedImageUrl:a}),!n&&(0,i.jsx)(G,{}),(0,i.jsx)(J.pn,{children:(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsx)("div",{children:(0,i.jsx)(ee.E,{autoSize:!0,minHeight:40,disabled:p,forceShowPlaceholder:!1,placeholder:h?"Ask Lovable to modify ".concat(al(h.elementType),"..."):"Ask Lovable..."})})}),(0,i.jsx)(J._v,{hidden:!n||!s,children:(0,i.jsx)("p",{children:"Save to continue"})})]})}),(0,i.jsx)(et.y,{}),(0,i.jsxs)(N.s,{children:[(0,i.jsx)("input",{id:"file-upload",className:"hidden",...u()}),o,(0,i.jsx)(k,{className:"ml-1.5 mr-1",projectId:l}),(0,i.jsxs)(T.z,{variant:"ghost",size:"sm",onClick:d,type:"button",className:"h-fit px-1.5 py-0.5 font-normal",children:[(0,i.jsx)(y.Z,{name:"add_photo_alternate",className:"h-4 w-4"}),"Attach"]}),!v&&(0,i.jsx)(J.pn,{children:(0,i.jsxs)(J.u,{delayDuration:p?0:300,children:[(0,i.jsx)(J.aJ,{className:"flex py-0",type:"button",asChild:!0,children:(0,i.jsx)("div",{children:(0,i.jsxs)(T.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{m.ZP.capture("visual_editor_toggled",{state:!n,project_id:l}),r(e=>!e)},disabled:p,className:(0,w.cn)("h-fit gap-1 px-1.5 py-0.5 font-normal",{"bg-accent":n}),children:[(0,i.jsx)(y.Z,{name:"my_location",className:"h-4 w-4"}),"Edit"]})})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:p?"Save or discard to exit":"Select to edit (".concat(f,")")})})]})}),(0,i.jsx)(P,{}),(0,i.jsx)($.t,{className:"ml-auto",disabled:p})]})]}),(0,i.jsx)("div",{className:"z-10 h-2 w-full bg-background"})]})});an.displayName="ChatInputV2NormalContent";let ar=(0,o.memo)(e=>{let{activeEdit:t,projectId:a}=e;return(0,i.jsxs)(g.x,{className:"relative mb-2 mr-2 flex flex-row items-center justify-between md:mr-0",children:[(0,i.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Previewing"}),(0,i.jsxs)(N.s,{children:[(0,i.jsx)(ev.k,{size:"sm",projectId:a}),(0,i.jsx)(ex.q,{activeEdit:t,size:"sm"})]})]})});ar.displayName="ChatInputV2HistoryContent";var ai=a(85460);let ao=e=>{let[t,a]=(0,o.useState)(!1),s=(0,o.useRef)(0);return(0,o.useEffect)(()=>{s.current=e.length},[]),(0,o.useEffect)(()=>{e.length>s.current&&a(!0)},[e.length]),{shouldShowExtraSpace:t,hideExtraSpace:(0,o.useCallback)(()=>{a(!1),s.current=e.length},[e.length])}},ac=e=>{let{sortedMessageIds:t,listRef:a}=e,s=(0,p.useSearchParams)().get("messageId");(0,o.useLayoutEffect)(()=>{if(!a.current||0===t.length)return;let e=t.length-1;if(s){let e=t.indexOf(s);e>=0&&a.current.scrollToIndex(e,{align:"start"})}else a.current.scrollToIndex(e,{align:"end"})},[])},ad=e=>{let{sortedMessageIds:t}=e,[a,s]=(0,o.useState)(-1),l=(0,ep.ZP)(e=>e.getMessage);return(0,o.useEffect)(()=>{for(let e=t.length-1;e>=0;e--){let a=l(t[e]);if((null==a?void 0:a.type)==="userMessage"){s(e);return}}},[t.length]),a},au=e=>{let[t,a]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let t=e.current;if(!t)return;let s=()=>{a(t.offsetHeight)};s();let l=new ResizeObserver(s);return l.observe(t),window.addEventListener("resize",s),()=>{l.disconnect(),window.removeEventListener("resize",s)}},[e]),t},ap=e=>{let{listRef:t,containerRef:a,itemIndex:s,messagesLength:l}=e,[n,r]=(0,o.useState)(0);return(0,o.useEffect)(()=>{if(s<0||!t.current)return;let e=()=>{if(t.current&&s>=0){let e=t.current.getItemOffset(s);e&&r(e)}};e();let l=a.current,n=null;return l&&(n=new ResizeObserver(e)).observe(l),window.addEventListener("resize",e),()=>{n&&l&&n.disconnect(),window.removeEventListener("resize",e)}},[t,a,s,l]),n},am=e=>{let{shouldShowExtraSpace:t,listRef:a,containerRef:s,lastUserMessageIndex:l,lastMessageIndex:n,messageCount:r}=e,i=au(s),c=ap({listRef:a,containerRef:s,itemIndex:l,messagesLength:r}),d=ap({listRef:a,containerRef:s,itemIndex:n,messagesLength:r})-c,u=(0,o.useRef)(0);return(0,o.useMemo)(()=>{let e=u.current,a=i-d;return t?a>0?e=a:a<0&&(e=0):e=0,u.current=e,e},[t,i,d])},ah=e=>{let{listRef:t,containerRef:a}=e,[s,l]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!0),i=(0,o.useCallback)(()=>setTimeout(()=>{if(!t.current)return;let e=t.current.scrollSize-t.current.viewportSize-t.current.scrollOffset<20,a=t.current.scrollSize>t.current.viewportSize;r(e),l(a)},0),[t]),c=(0,o.useCallback)(()=>{t.current&&t.current.scrollTo(t.current.scrollSize)},[t]);return(0,o.useEffect)(()=>{let e=a.current;if(!e)return;let t=new MutationObserver(i);t.observe(e,{childList:!0,subtree:!0});let s=new ResizeObserver(i);return s.observe(e),i(),()=>{t.disconnect(),s.disconnect()}},[a,i]),{isScrollable:s,isScrolledToEnd:n,checkScrollPosition:i,scrollToEnd:c}},ag=e=>{let{sortedMessageIds:t,listRef:a,containerRef:s}=e,l=t.length-1,n=ad({sortedMessageIds:t}),r=(0,o.useCallback)(()=>{l===n&&setTimeout(()=>{a.current&&a.current.scrollToIndex(l,{smooth:!0})},0)},[l,n,a]);(0,o.useEffect)(()=>{r()},[t.length,r]);let{shouldShowExtraSpace:i,hideExtraSpace:c}=ao(t),d=am({shouldShowExtraSpace:i,listRef:a,containerRef:s,lastUserMessageIndex:n,lastMessageIndex:l,messageCount:t.length});ac({sortedMessageIds:t,listRef:a});let{isScrollable:u,isScrolledToEnd:p,checkScrollPosition:m,scrollToEnd:h}=ah({listRef:a,containerRef:s}),g=(0,_.Eh)(e=>e.isDesignActive);return(0,o.useEffect)(()=>{g&&!i&&h(),g||c()},[g]),{newMessageMinHeight:d,scrollToEnd:h,isScrollable:u,isScrolledToEnd:p,checkScrollPosition:m}},af=e=>{let{sortedMessageIds:t,listRef:a}=e,s=(0,ep.ZP)(e=>e.getUserCommitMessageByShortCommitHash),l=(0,ep.ZP)(e=>e.getMessageByEditId);return(0,o.useCallback)(e=>{let n,{type:r,value:i}=e;if("editId"===r){let e=l(i);e&&(n=t.indexOf(e.id))}else if("shortCommitHash"===r){let e=s(i);e&&(n=t.indexOf(e.id))}a.current&&void 0!==n&&n>=0&&a.current.scrollToIndex(n,{align:"start"})},[t,l,s,a])};var av=e=>{let{isScrollable:t,isScrolledToEnd:a,scrollToEnd:s}=e;return(0,i.jsx)(D.M,{children:t&&!a&&(0,i.jsx)(R.E.button,{className:"pointer-events-auto z-[1000] flex size-7 items-center justify-center rounded-full border border-muted-border bg-muted shadow-md transition-colors hover:bg-muted-hover","aria-label":"Scroll to bottom",initial:{translateY:8,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:0,opacity:0},transition:{duration:.15,bounce:0},onClick:s,children:(0,i.jsx)(y.Z,{name:"arrow_downward",size:"small"})})})},ax=a(23664),ab=a(91576),ay=a(72116),aj=a(42503),aw=a(28538),aE=e=>{let{onClick:t,isBookmarked:a,className:s}=e;return(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"ghost",size:"icon",className:(0,w.cn)("group/bookmark h-auto w-auto shrink-0 hover:bg-transparent",s),onClick:t,children:(0,i.jsx)(y.Z,{name:a?"bookmark_fill":"bookmark",className:(0,w.cn)("duration-125 text-muted-foreground transition-colors ease-in-out group-hover/bookmark:opacity-75",a?"text-accent":"")})})}),(0,i.jsx)(J._v,{children:a?"Remove from history":"Save in history"})]})},ak=a(21770),aN=a(85472),aC=a(64040),a_=a(49131);let aS=e=>{let t=(0,ep.ZP)(e=>e.updateEdit),a=(0,p.useRouter)(),{project_id:s}=(0,p.useParams)(),l=(0,ak.D)({mutationFn:async t=>{let{editId:a,bookmarked:s,previousValue:l}=t;try{let t=(0,a_.S)();return await t.put("/projects/".concat(e,"/bookmark/").concat(a),{bookmarked:s}),{editId:a,bookmarked:s}}catch(e){throw e}},onError:(e,a)=>{if(t(a.editId,{bookmarked:a.previousValue}),e instanceof aN.H){let t=a.bookmarked?"bookmark":"unbookmark";q.Am.error("Failed to ".concat(t," edit"),{description:e.message||"Please try again"});return}(0,aC.Eo)(e)},onSuccess:e=>{q.Am.success(e.bookmarked?"Saved in history":"Removed from history",{action:{label:"View history",onClick:()=>a.push("/projects/".concat(s,"/history"))}})}});return{toggleBookmark:(0,o.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!a;t(e,{bookmarked:s}),l.mutate({editId:e,bookmarked:s,previousValue:a})},[l,t]),isToggling:l.isPending}};var aT=a(76906);let aA=(0,o.memo)(e=>{let{messageId:t,edit:a,simplified:s=!1}=e,{commit_sha:l}=null!=a?a:{},n=(0,_.Eh)(e=>e.setActiveEdit),r=(0,_.Eh)(e=>e.activeEdit),c=(0,em.iZ)(e=>e.project),d=(0,_.Eh)(e=>e.setActiveMessageId),u=(0,_.Eh)(e=>e.setShowConsole),p=(0,_.Eh)(e=>e.consoleContentType),m=(0,_.Eh)(e=>e.setConsolePreviewContent),h=(0,_.Eh)(e=>e.exitConsole),g=!!l&&l===(null==c?void 0:c.latest_commit_sha),{toggleBookmark:f}=aS((null==c?void 0:c.id)||""),v=(0,o.useMemo)(()=>{if(l&&c)return(0,aT.t)({projectId:null==c?void 0:c.id,sha:l})},[l,c]),x=a&&(null==r?void 0:r.id)===(null==a?void 0:a.id)&&"preview"===p||g&&!r&&!p,b=(0,o.useMemo)(()=>{if(!(null==a?void 0:a.created_at))return null;let e=new Date(1e3*a.created_at.seconds);return{relative:(0,aj.l)(e,new Date),absolute:(0,aw.WU)(e,"MMM d, yyyy, h:mm a")}},[a]),y=(0,o.useCallback)(e=>{if(e.altKey){window.open(v,"_blank");return}if(x||g){h();return}u("preview"),d(t),m(v),n(null!=a?a:void 0)},[a,h,x,g,t,v,n,d,m,u]),j=(0,o.useCallback)(e=>{e.stopPropagation(),(null==a?void 0:a.id)&&f(a.id,!!a.bookmarked)},[a,f]),E=(0,o.useMemo)(()=>{if(a){let{commit_message:e,reverted:t}=null!=a?a:{};return(0,i.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[(0,i.jsx)("span",{className:"flex items-center gap-1 truncate",children:e}),(g||t)&&!s&&(0,i.jsx)(eI.C,{className:"border-0 py-0",variant:g?"default":"destructive",children:g?"Current":"Reverted"})]}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:b?(0,i.jsx)(i.Fragment,{children:b.absolute}):x?"Click to Exit Preview":"Click to Preview"})]})}return(0,i.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",children:[(0,i.jsx)("span",{children:"No preview available"}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:"\xa0"})]})},[a,x,g,b,s]);return(0,i.jsxs)(T.z,{onClick:y,disabled:!a,className:(0,w.cn)("mb-2 flex h-auto w-full cursor-pointer items-start gap-2 rounded-lg p-3 text-left text-sm font-medium transition-colors duration-150 ease-in-out","border border-muted-border bg-muted text-foreground","hover:border-border hover:bg-muted-hover",{"border-border bg-muted-active":x},{"hover:cursor-auto hover:border-border hover:bg-muted-active":x&&g}),children:[(0,i.jsx)(aE,{onClick:j,isBookmarked:!!a&&!!a.bookmarked&&(null==a?void 0:a.bookmarked),className:"mt-[3px]"}),E]})});aA.displayName="PreviewCard";var aP=a(59512);let aI={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",overflow:"auto",background:"var(--muted)"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}},aM=e=>{let{codeContent:t}=e,[a,s]=(0,o.useState)(!1),l=async()=>{await navigator.clipboard.writeText(String(t)),s(!0),setTimeout(()=>s(!1),2e3)};return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("button",{className:"hover:bg-card-hover absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors",onClick:l,children:(0,i.jsx)(y.Z,{name:a?"check":"content_copy",className:"h-4 w-4 text-foreground transition-all duration-300"})}),(0,i.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,i.jsx)(aP.Z,{children:String(t).replace(/\n$/,""),style:aI,language:"sql",wrapLongLines:!0,PreTag:"div"})})]})};var aL=a(50835),aD=a(62809),aR=a(55214),az=a.n(aR);let aO=(0,o.memo)(e=>{let{children:t,className:a,components:s}=e;return(0,i.jsx)("div",{className:a,children:(0,i.jsx)(aL.UG,{components:s,children:t})})});aO.displayName="MemoizedReactMarkdown";let aK=e=>{let{match:t,codeContent:a}=e,[s,l]=(0,o.useState)(!1),n=async()=>{await navigator.clipboard.writeText(String(a)),l(!0),setTimeout(()=>l(!1),2e3)};return(0,i.jsxs)("div",{className:"relative my-2 rounded-md bg-muted",children:[(0,i.jsx)("button",{className:"absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors hover:bg-muted-hover",onClick:n,children:(0,i.jsx)(y.Z,{name:s?"check":"content_copy",className:"h-4 w-4 text-primary transition-all duration-300"})}),(0,i.jsx)("div",{className:"max-w-full overflow-x-auto font-mono",children:(0,i.jsx)(aP.Z,{children:String(a).replace(/\n$/,""),style:aI,language:t[1],wrapLongLines:!0,PreTag:"div",customStyle:{background:"var(--muted)",padding:"1em",margin:0}})})]})},aZ={code(e){let{node:t,className:a,children:s}=e,l=/language-(\w+)/.exec(a||"");return l?(0,i.jsx)(aK,{match:l,codeContent:s}):(0,i.jsx)("span",{className:"rounded px-1.5 py-0.5 font-mono text-sm",children:s})}},aU=(0,o.memo)(e=>{let{children:t,displayCursor:a,persisted:s}=e,l=!(0,o.useRef)(s).current,n=(0,aD.C)(t);return(0,i.jsxs)(R.E.div,{initial:{opacity:l?0:1},animate:{opacity:1},transition:{duration:1,ease:"easeOut"},className:"relative max-w-full",children:[l?(0,i.jsx)(aO,{className:(0,w.cn)("prose prose-zinc prose-markdown absolute inset-x-0 top-0 max-w-full dark:prose-invert prose-h1:mb-2 prose-h1:text-xl prose-h1:font-bold prose-h2:text-lg prose-h2:font-bold prose-h3:text-base prose-h3:font-bold prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",az().customProse,a&&az().cursor),components:aZ,children:n}):null,(0,i.jsx)(aO,{className:(0,w.cn)("prose prose-zinc prose-markdown max-w-full dark:prose-invert prose-h1:mb-2 prose-h1:text-xl prose-h1:font-bold prose-h2:text-lg prose-h2:font-bold prose-h3:text-base prose-h3:font-bold prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",az().customProse,a&&az().cursor,l&&"pointer-events-none opacity-0"),components:aZ,children:t})]})});aU.displayName="PromptBox";var aF=a(82718),aW=a(33145),aB=a(72384),aH=a(32935);let aV=e=>{let{messageId:t,runState:a}=e,s=(0,c.D)(),{mutateAsync:l,isPending:n}=(0,aa.m)({projectId:s}),r=async()=>{await l({body:{message:"I have reviewed the SQL and it looks good. Please run it.",id:(0,aH.dX)(),mode:aB.S.INSTANT,run_sql_in_message_with_id:t},projectId:s})};return(0,i.jsx)("div",{children:(0,i.jsx)(T.z,{variant:"default",size:"sm",className:"gap-2 py-2",onClick:r,disabled:void 0!==a&&"not_started"!==a||n,children:"not_started"===a||void 0===a?"Apply changes":"running"===a?"Applying changes...":"failed"===a?"Failed to apply changes":"SQL already executed"})})};var aG=()=>{let e=(0,c.D)(),[t,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)(""),n=(0,t$.O)(),r=(0,em.iZ)(e=>e.project);o.useEffect(()=>{(null==r?void 0:r.custom_instructions)&&l(r.custom_instructions)},[r]);let d=async()=>{try{await n.put("/projects/".concat(e,"/custom_instructions"),{custom_instructions:s}),m.ZP.capture(ec.S.KNOWLEDGE.SAVED),q.Am.success("Custom instructions updated",{description:"Your custom instructions have been saved successfully."}),a(!1)}catch(e){q.Am.error("Error",{description:"Failed to update custom instructions. Please try again."})}};return(0,i.jsxs)(ea.Vq,{open:t,onOpenChange:a,children:[(0,i.jsx)(ea.hg,{asChild:!0,children:(0,i.jsxs)(T.z,{className:"gap-2 whitespace-nowrap",variant:"outline",size:"sm",onClick:()=>a(!0),children:[(0,i.jsx)(y.Z,{name:"school",className:"text-muted-foreground"}),"Manage knowledge"]})}),(0,i.jsxs)(ea.cZ,{className:"sm:max-w-[1000px]",children:[(0,i.jsx)(ea.fK,{children:(0,i.jsx)(ea.$N,{children:"Manage Knowledge"})}),(0,i.jsxs)(ea.Be,{children:["Add custom context and instructions for your project. Lovable will use it in every edit. Use it to:",(0,i.jsxs)("ul",{className:"mt-2 list-disc pl-5",children:[(0,i.jsx)("li",{children:"Define project-specific rules or guidelines"}),(0,i.jsx)("li",{children:"Set coding style preferences (e.g., indentation, naming conventions)"}),(0,i.jsx)("li",{children:"Include external documentation or style guides"})]})]}),(0,i.jsx)(eM.g,{value:s,onChange:e=>l(e.target.value),placeholder:"Enter your custom instructions and context here...",className:"resize-none",rows:16}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(T.z,{onClick:d,children:"Save"})})]})]})},aX=a(13590),aq=a(29501),aY=a(31229),aQ=a(15681);let aJ=e=>{let t=e.reduce((e,t)=>(e[t.key]=aY.Z_().min(1,{message:"".concat(t.name," is required")}),e),{});return aY.Ry(t)},a$=e=>e.toLowerCase().split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ").replace(/api/i,"API"),a0=(0,o.memo)(e=>{let{secretFormActions:t,isMostRecentMessage:a}=e,[s,l]=(0,o.useState)(!1),n=(0,c.D)(),{mutate:r}=(0,aa.m)({projectId:n}),d=(0,t$.O)(),u=(0,o.useMemo)(()=>t.map(e=>({key:e.name,name:a$(e.name)})),[t]),p=(0,o.useMemo)(()=>aJ(u),[u]),m=(0,aq.cI)({resolver:(0,aX.F)(p),defaultValues:t.reduce((e,t)=>(e[t.name]="",e),{})});(0,o.useEffect)(()=>{s&&m.reset()},[s,m]);let h=(0,ak.D)({mutationFn:async e=>{let t={secrets:Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}})};await d.post("/projects/".concat(n,"/supabase/secrets"),t)},onSuccess:()=>{q.Am.success("API Keys added successfully"),l(!1),r({body:{id:(0,aH.dX)(),message:"I have now added the API keys you asked for."}})},onError:e=>{var t;q.Am.error("Failed to add API Keys",{description:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.detail})}}),g=(0,o.useCallback)(async e=>{await h.mutateAsync(e)},[h]);return(0,i.jsxs)(ea.Vq,{open:s,onOpenChange:l,children:[(0,i.jsx)(ea.hg,{children:(0,i.jsxs)(T.z,{disabled:!a,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,i.jsx)(y.Z,{name:"key",size:"small"}),"Add API Key",1===t.length?"":"s"]})}),(0,i.jsxs)(ea.cZ,{className:"sm:max-w-[425px]",children:[(0,i.jsxs)(ea.fK,{children:[(0,i.jsx)(ea.$N,{asChild:!0,children:(0,i.jsxs)("h1",{className:"text-2xl font-bold",children:["Add API Key",1===t.length?"":"s"]})}),(0,i.jsxs)(e_.Be,{className:"text-muted-foreground",children:["Enter your API Key",1===t.length?"":"s"," to continue. Manage this later from the Supabase menu."," ",(0,i.jsx)(v.default,{href:"https://docs.lovable.dev/integrations/supabase#storing-secrets-with-supabase",className:"text-primary underline hover:no-underline",target:"_blank",children:"Learn more"})]})]}),(0,i.jsx)(aQ.l0,{...m,children:(0,i.jsxs)("form",{onSubmit:m.handleSubmit(g),className:"space-y-4",children:[u.map(e=>(0,i.jsx)(aQ.Wi,{control:m.control,name:e.key,render:t=>{let{field:a}=t;return(0,i.jsxs)(aQ.xJ,{children:[(0,i.jsx)(aQ.lX,{children:e.name}),(0,i.jsx)(aQ.NI,{children:(0,i.jsx)(eH.I,{placeholder:"Enter API Key",type:"password",...a})}),(0,i.jsx)(aQ.zG,{})]})}},e.key)),(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,i.jsx)(e_.GG,{asChild:!0,children:(0,i.jsx)(T.z,{type:"button",disabled:h.isPending,variant:"outline",children:"Cancel"})}),(0,i.jsx)(T.z,{loading:h.isPending,type:"submit",children:"Submit"})]})]})})]})]})});a0.displayName="AddApiKeysButton";let a1=e=>e.startsWith("https://supabase.com/dashboard/project/")?(0,i.jsx)(aW.default,{width:16,height:16,src:"/icons/supabase_logo.svg",alt:"Supabase"}):(0,i.jsx)(y.Z,{name:"arrow_outward"});function a2(e){let{linkActions:t}=e;return t&&0!==t.length?(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.map(e=>(0,i.jsx)(T.z,{asChild:!0,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,i.jsxs)(v.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[a1(e.url),(0,i.jsx)("span",{className:"truncate",children:e.text})]})},e.url))}):null}function a4(e){let{messagePromptActions:t}=e,a=(0,em.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}),s=(0,_.Eh)(e=>e.chatMode),l=(0,_.Eh)(e=>e.setChatMode),{mutate:n,isPending:r}=(0,aa.O)({projectId:a});return t&&0!==t.length?(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.map(e=>(0,i.jsx)(T.z,{asChild:!0,variant:"outline",size:"sm",disabled:r,onClick:()=>{s===_.jE.CHAT_ONLY&&l(_.jE.DEFAULT),n({body:{id:(0,tJ.Z)(),message:e.message}})},className:"flex cursor-pointer items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[(0,i.jsx)(aF.Z,{size:16}),(0,i.jsx)("span",{className:"truncate",children:e.text})]})},e.message))}):null}let a5=e=>{var t;let{messageId:a,lovActions:s,sqlRunState:l,persisted:n}=e,r=(0,ep.ZP)(e=>e.isMostRecentMessage(a)),{migrateActions:c,linkActions:d,knowledgeAction:u,messagePromptActions:p,secretFormActions:m}=(0,o.useMemo)(()=>{let e=null==s?void 0:s.filter(e=>"lov_action__migrate"===e.type&&e.done),t=null==s?void 0:s.filter(e=>"lov_action__link"===e.type),a=null==s?void 0:s.filter(e=>"lov_action__message_prompt"===e.type),l=null==s?void 0:s.filter(e=>"lov_action__secret_form"===e.type);return{migrateActions:e,linkActions:t,knowledgeAction:null==s?void 0:s.find(e=>"lov_action__knowledge"===e.type),messagePromptActions:a,secretFormActions:l}},[s]);return(0,i.jsxs)(R.E.div,{className:"flex max-w-full flex-1 flex-wrap gap-2 overflow-hidden",initial:{opacity:n?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:[(null!==(t=null==c?void 0:c.length)&&void 0!==t?t:0)>0&&(0,i.jsx)(aV,{messageId:a,runState:l},"migrate"),(0,i.jsx)(a2,{linkActions:d}),(0,i.jsx)(a4,{messagePromptActions:p}),m&&m.length>0&&(0,i.jsx)(a0,{secretFormActions:m,isMostRecentMessage:r}),u&&(0,i.jsx)(aG,{})]})};var a6=a(39484);let a3=e=>{let{commitSha:t,previewBuildStatus:a}=e,s=(0,em.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),{project_id:l}=(0,p.useParams)(),n=(0,em.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.name}),r=t===s,i=(0,o.useMemo)(()=>{if(t&&n)return(0,aT.t)({projectName:n,sha:r?void 0:t})},[t,n,r]),{isDisabled:c,disabledReason:d}=(0,o.useMemo)(()=>"pending"===a?{isDisabled:!0,disabledReason:"Preview is being built..."}:"failed"===a?{isDisabled:!0,disabledReason:"Failed to build preview"}:i?{isDisabled:!1,disabledReason:void 0}:{isDisabled:!0,disabledReason:"There is no preview available for this version"},[i,a]),u=(0,o.useCallback)(e=>{let{eventName:a}=e;m.ZP.capture(a,{commit_sha:t,disabled:c,disabled_reason:d,is_latest_commit:r,preview_url:i,project_id:l})},[t,d,c,r,i,l]);return{previewUrl:i,isLatestCommit:r,isDisabled:c,disabledReason:d,onPreview:u}},a9=e=>{let{commitSha:t,previewBuildStatus:a}=e,{previewUrl:s,isDisabled:l,disabledReason:n,onPreview:r}=a3({commitSha:t,previewBuildStatus:a});if(l||!s){let e=(0,i.jsxs)(T.z,{size:"sm",className:"duration-125 hover:bg-card-hover h-5 gap-1 px-1.5 py-0.5 text-xs transition-all ease-in-out",variant:"ghost",disabled:!0,children:[(0,i.jsx)(y.Z,{name:"arrow_outward",size:"small"}),(0,i.jsx)("span",{children:"Preview"})]});return n?(0,i.jsx)(J.pn,{children:(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsx)("span",{className:"flex items-center",tabIndex:0,children:e})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:n})})]})}):e}return(0,i.jsx)(T.z,{size:"sm",className:"duration-125 h-5 gap-1 px-1.5 py-0.5 text-xs font-normal transition-all ease-in-out hover:bg-muted-hover",variant:"ghost",asChild:!0,children:(0,i.jsxs)(v.default,{href:s,target:"_blank",rel:"noreferrer",onClick:()=>r({eventName:ec.S.CODE_CARD.PREVIEW_CLICKED}),children:[(0,i.jsx)(y.Z,{name:"arrow_outward",size:"small"}),(0,i.jsx)("span",{children:"Preview"})]})})};var a8=a(2925),a7=a(92039);let se=e=>{let{editId:t,commitSha:a}=e,s=(0,a7.I)(),l=(0,em.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),n=(0,a8.u)(e=>e.setCurrentPage),r=(0,a8.u)(e=>e.currentPage),{project_id:i}=(0,p.useParams)(),c=(0,_.Eh)(e=>e.shouldBlockActions()),d=(0,ep.ZP)(e=>t?e.getEdit(t):null),u=a===l,{isDisabled:h,disabledReason:g}=(0,o.useMemo)(()=>a?u?{isDisabled:!0,disabledReason:"Already active"}:s.isPending?{isDisabled:!0,disabledReason:"Restore is in progress"}:c?{isDisabled:!0,disabledReason:"Other changes are currently being applied"}:{isDisabled:c||s.isPending||u||!a,disabledReason:"Disabled"}:{isDisabled:!0,disabledReason:"Not a valid restore target"},[c,s.isPending,u,a]),f=(0,o.useCallback)(e=>{let{eventName:l}=e;t&&(d&&d.pages&&d.pages.length>0&&!d.pages.find(e=>e.name===r)&&n("index"),m.ZP.capture(l,{edit_id:t,commit_sha:a,disabled:h,disabled_reason:g,is_latest_commit:u,project_id:i}),s.mutateAsync({edit:{id:t}}))},[a,r,g,d,t,h,u,i,s,n]);return{onRevert:t?f:void 0,isLatestCommit:u,isDisabled:h,isPending:s.isPending,disabledReason:g}},st=e=>{let{editId:t,commitSha:a}=e,{onRevert:s,isDisabled:l,isPending:n,disabledReason:r}=se({editId:t,commitSha:a}),o=(0,i.jsxs)(T.z,{size:"sm",className:"transition-color duration-125 h-5 gap-1 px-1.5 py-0.5 text-xs font-normal ease-in-out hover:bg-muted-hover",variant:"ghost",onClick:()=>s&&s({eventName:ec.S.CODE_CARD.RESTORE_CLICKED}),disabled:l||n,children:[(0,i.jsx)(y.Z,{name:"restart_alt",size:"small",className:n?"animate-spin-reverse":""}),(0,i.jsx)("span",{children:"Restore"})]});return l&&r?(0,i.jsx)(J.pn,{children:(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsx)("span",{className:"flex items-center",tabIndex:0,children:o})}),(0,i.jsx)(J._v,{children:(0,i.jsx)("p",{children:r})})]})}):o},sa=(0,o.memo)(e=>{let{editId:t,commitSha:a,previewBuildStatus:s}=e;return(0,i.jsx)("div",{className:"absolute -right-2 bottom-0",children:(0,i.jsxs)("div",{className:"flex translate-y-1/2 items-center gap-1 rounded-lg border border-muted-border bg-muted p-0.5",children:[(0,i.jsx)(st,{editId:t,commitSha:a}),(0,i.jsx)(a9,{commitSha:a,previewBuildStatus:s})]})})});sa.displayName="CodeCardActions";var ss=a(51904);let sl=e=>{var t,a;let{edit:s,handleToggleBookmark:l,handleOnClick:n,isActive:r,code:o,messageStopped:c,status:d,thinkingTimeMs:u,revertCard:p}=e,m=p||(null==o?void 0:o.done)||"running"!==d,h=(0,ay.zL)(o);return(0,i.jsxs)("div",{className:"flex w-full items-start gap-1",children:[(null==s?void 0:s.id)&&(0,i.jsx)("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center",children:(0,i.jsx)(aE,{onClick:l,isBookmarked:!!s&&!!s.bookmarked&&(null==s?void 0:s.bookmarked),className:"mt-3"})}),(0,i.jsxs)("div",{className:"relative w-full",children:[!!s&&(0,i.jsx)(sa,{editId:null!==(t=null==s?void 0:s.id)&&void 0!==t?t:void 0,commitSha:null!==(a=null==s?void 0:s.commit_sha)&&void 0!==a?a:void 0}),(0,i.jsxs)(T.z,{onClick:n,variant:"outline",className:(0,w.cn)("flex h-auto w-full max-w-56 cursor-pointer items-center gap-2 rounded-lg p-3 text-sm font-medium sm:max-w-xs","border border-muted-border bg-muted text-foreground","hover:border-border hover:bg-muted-hover","duration-125 transition-all ease-in-out",{"border-muted-active bg-muted-active":r},{"items-start":m}),children:[h>0&&(0,i.jsx)(y.Z,{name:"code"}),m?(0,i.jsx)(si,{isActive:r,hasEdit:!!s,commitMessage:null==s?void 0:s.commit_message,status:d,editedFilesCount:h,thinkingTimeMs:u}):o&&(0,i.jsx)(sr,{isActive:r,code:o,messageStopped:c}),(0,i.jsx)(y.Z,{name:"chevron_right"})]})]})]})},sn=(0,o.memo)(e=>{let{messageId:t,code:a,edit:s,messageStopped:l,persisted:n,status:r,thinkingTimeMs:c}=e,d=(0,_.Eh)(e=>e.setActiveMessageId),u=(0,_.Eh)(e=>e.setConsoleCodeContent),p=(0,_.Eh)(e=>e.setShowConsole),m=(0,_.Eh)(e=>e.consoleContentType),h=(0,_.Eh)(e=>e.activeMessageId),g=(0,_.Eh)(e=>e.setCodeViewType),f=(0,_.Eh)(e=>e.setActiveEdit),v=(0,em.iZ)(e=>e.project),x=h===t&&"code"===m,b=(0,_.Eh)(e=>e.exitConsole),{toggleBookmark:y}=aS((null==v?void 0:v.id)||"");(0,o.useEffect)(()=>{x&&f(null!=s?s:void 0)},[x,s,f]);let j=(0,o.useCallback)(()=>{if(x)b();else{var e;u(a),p("code"),d(t),f(null!=s?s:void 0),g((null==s?void 0:null===(e=s.diff)||void 0===e?void 0:e.length)?_.es.DIFF:_.es.RAW)}},[x,b,d,u,p,g,f,s,t,a]),w=(0,o.useCallback)(e=>{e.stopPropagation(),(null==s?void 0:s.id)&&y(s.id,!!s.bookmarked)},[s,y]);return(0,i.jsx)(R.E.div,{className:"relative flex w-5/6 max-w-xs pb-4",initial:{opacity:n?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,i.jsx)(sl,{edit:null!=s?s:null,handleToggleBookmark:w,handleOnClick:j,isActive:x,code:a,messageStopped:l,status:r,thinkingTimeMs:c,revertCard:!1})})});sn.displayName="CodeCardV2";let sr=(0,o.memo)(e=>{let{isActive:t,code:a,messageStopped:s}=e,[l,n]=(0,o.useState)(""),r=!s;(0,o.useEffect)(()=>{a.parts.length>0&&n(e=>sc(a)||e)},[a]);let c=r?l||"...":l;return(0,i.jsx)("div",{className:"min-h-[1.375rem] min-w-0 flex-1",children:(0,i.jsx)(D.M,{mode:"popLayout",children:(0,i.jsx)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("span",{className:(0,w.cn)("truncate text-muted-foreground",{"text-foreground":t}),children:c}),r&&(0,i.jsx)(a6.T,{text:"",className:"mt-0"})]})},c)})})});sr.displayName="EditingTitle";let si=(0,o.memo)(e=>{let{isActive:t,hasEdit:a,commitMessage:s,status:l,editedFilesCount:n,thinkingTimeMs:r}=e,{title:c,body:d}=(0,o.useMemo)(()=>{if(a)return{title:"".concat(null!=s?s:"no commit message"),body:"View code"};if(0===n&&void 0!==r){let e=sd(r);return{title:"Thought for ".concat(e),body:"View more"}}return{title:"Edited ".concat(n," file").concat(1===n?"":"s"),body:"completed"===l?"Failed to save changes":"stopped"===l?"Generation stopped":"Saving changes..."}},[a,s,l,n,r]);return(0,i.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden text-left",children:[(0,i.jsx)("span",{className:(0,w.cn)("truncate",{"text-foreground":t}),children:c}),(0,i.jsx)("span",{className:"truncate font-normal",children:d})]})});si.displayName="FinishedEditingTitle";let so=e=>{if(!e)return"";let t=e.split(/[\/\\]/);return t[t.length-1]},sc=e=>{for(let t=e.parts.length-1;t>=0;t--){let a=e.parts[t];if("writing_file"===a.type||"edit"===a.type)return"Writing ".concat(so(a.file_path));if("delete"===a.type)return"Deleting ".concat(so(a.file_path));if("rename"===a.type)return"Renaming ".concat(so(a.original_file_path));else if("add_dependency"===a.type)return"Installing ".concat(a.dependency);else if("remove_dependency"===a.type)return"Uninstalling ".concat(a.removed_dependency);else if("tool_use"===a.type){let e=(0,ss.fi)(a.name||"",a.parsedData,!1);if(e)return e;{let e=a.name||"";return e.split("-").pop()||e}}}return"Thinking..."},sd=e=>{let t=Math.ceil(e/1e3);if(t<60)return"".concat(t,"s");{let e=t%60;return"".concat(Math.floor(t/60),"m").concat(e>0?" ".concat(e,"s"):"")}},su=e=>"parts"in e&&"done"in e,sp=e=>"lovSql"in e&&"done"in e,sm=e=>{let{messageId:t,content:a,editId:s,stopped:l,sqlRunState:n,persisted:r,status:c,thinkingTimeMs:d}=e,{tab:u="chat"}=(0,p.useParams)(),m=(0,ep.ZP)(e=>e.getEdit(s)),h=(0,o.useMemo)(()=>a?(0,ay.hP)(a):null,[a]);return a?"history"===u?m?(0,i.jsx)(aA,{edit:m,messageId:t,simplified:!0}):null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(sh,{content:a,parsed:h,editId:s,messageId:t,messageStopped:!l,persisted:r,status:c,thinkingTimeMs:d}),(0,i.jsx)(a5,{messageId:t,lovActions:null==h?void 0:h.lovActions,sqlRunState:n,persisted:r})]}):null},sh=e=>{let{messageId:t,messageStopped:a,content:s,parsed:l,editId:n,persisted:r,status:o,thinkingTimeMs:c}=e,d=(0,ep.ZP)(e=>e.getEdit(n));if(!l)return s.length>0?(0,i.jsx)(aU,{displayCursor:!1,persisted:r,children:s||""}):null;let u=[],p=[],m=()=>{p.length>0&&(u.push((0,i.jsx)(ss.el,{children:p},"tool-group-".concat(u.length))),p=[])};for(let e=0;e<l.parts.length;e++){let s=l.parts[e];if((0,ay.Cg)(s))p.push((0,i.jsx)(ss.Q6,{name:s.name,parsedData:s.parsedData,done:s.done},e));else{if(m(),"content"in s&&""===s.content.trim())continue;if(su(s))u.push((0,i.jsx)(sn,{code:s,messageId:t,messageStopped:a,edit:d,persisted:r,status:o,thinkingTimeMs:c},e));else if(sp(s))u.push((0,i.jsx)(aM,{codeContent:s.lovSql},e));else if("content"in s)u.push((0,i.jsx)(aU,{displayCursor:!1,persisted:r,children:s.content},e));else throw Error("Unknown part type")}}return m(),(0,i.jsx)(i.Fragment,{children:u})};var sg=a(16593),sf=a(33187),sv=a(19060);function sx(e){let{open:t,onOpenChange:a,onFeedbackSubmit:s,onSkip:l}=e,[n,r]=(0,o.useState)([]),[c,d]=(0,o.useState)(""),u=e=>{r(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,i.jsx)(ea.Vq,{open:t,onOpenChange:e=>{e||s({selectedOptions:[],comment:"",action:"close"}),a(e),r([]),d("")},children:(0,i.jsxs)(ea.cZ,{className:"max-w-[90vw] bg-background sm:max-w-[425px]",children:[(0,i.jsx)(ea.fK,{children:(0,i.jsx)(ea.$N,{className:"text-3xl font-bold",children:"Give feedback"})}),(0,i.jsx)("div",{className:"grid gap-4 py-4",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["We're sorry it didn't meet your expectations. ",(0,i.jsx)("br",{}),"Your feedback helps us improve Lovable and your experience. Please tell us what went wrong."]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("p",{className:"text-sm font-bold",children:"What happened?"}),(0,i.jsx)("div",{className:"space-y-2.5",children:[{id:"incorrect-solution",label:"Missunderstood the task"},{id:"missing-functionality",label:"Some functionalities were missing"},{id:"design-not-as-expected",label:"Design wasn't as expected"},{id:"other",label:"Other"}].map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(sv.X,{id:e.id,checked:n.includes(e.id),onCheckedChange:()=>u(e.id)}),(0,i.jsx)(eV._,{htmlFor:e.id,className:"cursor-pointer",children:e.label})]},e.id))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"feedback text-sm font-bold",children:"What can we improve?"}),(0,i.jsx)(eM.g,{id:"feedback",placeholder:"Your feedback...",className:"min-h-[100px]",value:c,onChange:e=>d(e.target.value)})]})]})}),(0,i.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,i.jsx)(T.z,{variant:"outline",onClick:()=>{l(),s({selectedOptions:[],comment:"",action:"skip"}),r([]),d("")},children:"Skip"}),(0,i.jsx)(T.z,{onClick:()=>{s({selectedOptions:n,comment:c,action:"submit"}),r([]),d("")},children:"Submit"})]})]})})}var sb=e=>{let{messageId:t}=e,[a,s]=(0,o.useState)(!1),[l,n]=(0,o.useState)(!1),[r,d]=(0,o.useState)(!1),u=(0,ep.ZP)(e=>e.sortedMessageIds),p=(0,c.D)(),h=u.length,{data:g,isLoading:f}=(0,sg.a)(sf.W.feedbackStatus({projectId:p})),v=(0,ak.D)({mutationFn:async()=>{let e=(0,a_.S)();return(await e.post("/user/feedback-status",{has_submitted_feedback:!0})).data},onError:e=>{(0,aC.Eo)(e)}}),x=(0,o.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thumbs_up";if(!l){try{await v.mutateAsync(),b({isPositive:e,selectedOptions:null==t?void 0:t.selectedOptions,comment:null==t?void 0:t.comment,action:a})}catch(e){}n(!0),s(!1)}},[l,v,n,s]);(0,o.useEffect)(()=>{!l&&(null==g?void 0:g.is_free_user)&&u.length>=3&&(x(!0,void 0,"continued_chat"),d(!0))},[u.length,l,null==g?void 0:g.is_free_user,x]);let b=e=>{m.ZP.capture("first_prompt_result_feedback",{messageId:t,...e})},j=async()=>{try{await v.mutateAsync(),b({isPositive:!1,action:"skip"})}catch(e){}n(!0),s(!1)};return f||!(null==g?void 0:g.is_free_user)||(null==g?void 0:g.has_submitted_feedback)||r||h>2?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"relative flex max-w-full flex-row items-center justify-between gap-2 rounded-lg border border-muted-border p-3",children:l?(0,i.jsx)("p",{className:"text-sm",children:"Thank you for your feedback! It helps make Lovable better."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-sm",children:"Did Lovable build what you wanted?"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(T.z,{variant:"outline",size:"sm",className:"h-7 w-7 flex-1 cursor-pointer border-neutral-700 bg-gray-900 py-1 text-xs hover:border-gray-300 hover:bg-gray-600",onClick:()=>x(!0),children:(0,i.jsx)(y.Z,{name:"thumb_up-fill",className:"h-3.5 w-3.5",fill:"white"})}),(0,i.jsx)(T.z,{variant:"outline",size:"sm",className:"h-7 w-7 flex-1 cursor-pointer border-neutral-700 bg-gray-900 py-1 text-xs hover:border-gray-300 hover:bg-gray-600",onClick:()=>s(!0),children:(0,i.jsx)(y.Z,{name:"thumb_down-fill",className:"h-3.5 w-3.5",fill:"white"})})]})]})}),(0,i.jsx)(sx,{open:a,onOpenChange:e=>{s(e),e||n(!0)},onFeedbackSubmit:e=>x(!1,e,e.action),onSkip:j})]})};let sy=e=>{var t;let{message:a,isFirstAIMessage:s}=e,l=(0,ax.dl)("feedback_form_first_prompt"),{tab:n="chat"}=(0,p.useParams)();return(0,i.jsxs)("div",{className:(0,w.cn)("flex flex-col space-y-4 overflow-auto text-left text-base leading-[22px]"),style:{overflowWrap:"anywhere"},children:[(0,i.jsx)(sm,{content:a.content,messageId:a.id,editId:a.editId,stopped:!a.stopped,sqlRunState:a.sqlRunState,persisted:a.persisted,status:a.status,thinkingTimeMs:a.thinkingTimeMs}),"history"!==n&&(0,i.jsx)(i.Fragment,{children:a.errors&&(0,i.jsx)(ab.mL,{errors:null!==(t=a.errors)&&void 0!==t?t:null})}),l&&s&&"completed"==a.status&&(0,i.jsx)(sb,{messageId:a.id})]})},sj=e=>{let{branchName:t}=e;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{children:"Switched branch to"}),(0,i.jsx)("div",{className:"ml-2 flex items-center gap-2 rounded-full border bg-card p-1 px-2",children:(0,i.jsx)("p",{children:t})})]})};var sw=a(97822),sE=a(49968),sk=a(46366);let sN=e=>{let{messageId:t,langsmithUrl:a,editId:s}=e,l=(0,c.D)(),n=(0,sk.c)(),r=(0,_.Eh)(e=>e.setActiveMessageId),o=(0,_.Eh)(e=>e.setShowConsole);return n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.VD,{}),(0,i.jsxs)(b.Xi,{className:"w-full gap-2",onClick:()=>{r(t),o("debug")},children:[(0,i.jsx)(y.Z,{name:"bug_report",size:"small"}),(0,i.jsx)("span",{children:"Debug"}),(0,i.jsx)(sw.s,{className:"ml-auto"})]}),a&&(0,i.jsx)(b.Xi,{className:"w-full gap-2",asChild:!0,children:(0,i.jsxs)("a",{href:a,target:"_blank",rel:"noreferrer",children:[(0,i.jsx)(y.Z,{name:"arrow_outward",size:"small"}),(0,i.jsx)("span",{children:"See in Langsmith"}),(0,i.jsx)(sw.s,{className:"ml-auto"})]})}),(0,i.jsx)(b.Xi,{className:"w-full gap-2",asChild:!0,children:(0,i.jsxs)("a",{href:(0,sE.pr)(l,t),target:"_blank",rel:"noreferrer",children:[(0,i.jsx)(y.Z,{name:"arrow_outward",size:"small"}),(0,i.jsx)("span",{children:"Firestore: Message"}),(0,i.jsx)(sw.s,{className:"ml-auto"})]})}),s&&(0,i.jsx)(b.Xi,{className:"w-full gap-2",asChild:!0,children:(0,i.jsxs)("a",{href:(0,sE.oo)(l,s),target:"_blank",rel:"noreferrer",children:[(0,i.jsx)(y.Z,{name:"arrow_outward",size:"small"}),(0,i.jsx)("span",{children:"Firestore: Edit"}),(0,i.jsx)(sw.s,{className:"ml-auto"})]})})]}):null};var sC=a(6478);let s_=e=>{let{messageId:t}=e,a=(0,c.D)(),s=(0,sC.F)(),l=(0,o.forwardRef)((e,t)=>(0,i.jsx)(b.Xi,{ref:t,...e,children:(0,i.jsxs)("div",{className:"flex w-full justify-between gap-4",onClick:()=>{m.ZP.capture(ec.S.ELLIPSIS.COPY_LINK_CLICKED)},children:[(0,i.jsx)("span",{children:"Copy message link"}),(0,i.jsx)(y.Z,{name:"link",size:"small",className:"ml-auto"})]})}));l.displayName="TriggerComponent";let n=s({TriggerComponent:l,textToCopy:"".concat(window.location.origin,"/projects/").concat(a,"?messageId=").concat(t)});return(0,i.jsx)(J.pn,{children:(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:n}),(0,i.jsx)(J._v,{children:"Copy link to clipboard"})]})})},sS=e=>{let{commitSha:t,previewBuildStatus:a}=e,{previewUrl:s,isDisabled:l,onPreview:n}=a3({commitSha:t,previewBuildStatus:a});return(0,i.jsx)(b.Xi,{asChild:!0,disabled:l,children:(0,i.jsxs)("a",{className:"w-full",href:s,target:"_blank",rel:"noreferrer",onClick:()=>n({eventName:ec.S.ELLIPSIS.PREVIEW_CLICKED}),children:["Preview",(0,i.jsx)(y.Z,{name:"arrow_outward",className:"ml-auto",size:"small"})]})})},sT=e=>{let{editId:t,commitSha:a}=e,{onRevert:s,isDisabled:l}=se({editId:t,commitSha:a});return(0,i.jsxs)(b.Xi,{className:"w-full",onClick:()=>s&&s({eventName:ec.S.ELLIPSIS.RESTORE_CLICKED}),disabled:l,children:["Restore",(0,i.jsx)(y.Z,{name:"restart_alt",className:"ml-auto",size:"small"})]})},sA=e=>{let{messageId:t,editId:a,langsmithUrl:s,className:l}=e,n=(0,ep.ZP)(e=>e.getEdit(a));return(0,i.jsxs)(b.h_,{children:[(0,i.jsx)(b.$F,{asChild:!0,className:l,children:(0,i.jsx)(T.z,{variant:"ghost",size:"icon-sm",children:(0,i.jsx)(y.Z,{name:"more_horiz",size:"small"})})}),(0,i.jsxs)(b.AW,{align:"end",children:[(0,i.jsx)(s_,{messageId:t}),(0,i.jsx)(sS,{commitSha:null==n?void 0:n.commit_sha}),(0,i.jsx)(sT,{editId:a,commitSha:null==n?void 0:n.commit_sha}),(0,i.jsx)(sN,{messageId:t,langsmithUrl:s,editId:a})]})]})},sP=e=>"userCommit"!==e.type&&"userMessage"!==e.type,sI=e=>{let{previousMessageId:t}=e,a=(0,ep.ZP)(e=>t?e.getMessage(t):void 0);return a&&"revertSuccessv2"!==a.type&&!sP(a)?(0,i.jsx)(sL,{className:"mb-2"}):null},sM=e=>{let{message:t}=e,{tab:a="chat"}=(0,p.useParams)();return"history"===a?null:(0,i.jsxs)("div",{className:"mb-2 flex shrink-0 items-center gap-2",children:[(0,i.jsx)(sL,{className:"shrink-0"}),(0,i.jsx)("span",{className:"flex-shrink translate-y-[1px] overflow-hidden text-ellipsis text-nowrap text-xs text-muted-foreground opacity-0 transition-opacity duration-150 ease-out group-hover:opacity-100",children:(0,aw.WU)(t.createdAt,"HH:mm 'on' MMM dd, yyyy")}),(0,i.jsx)(sA,{className:"ml-auto",messageId:t.id,editId:t.editId,langsmithUrl:t.langsmithUrl})]})},sL=e=>{let{className:t}=e;return(0,i.jsxs)("div",{className:(0,w.cn)("flex items-center gap-2 pl-2",t),children:[(0,i.jsx)(aW.default,{alt:"lovable logo",src:"/img/lovable-logo.svg",width:"20",height:"20"}),(0,i.jsx)("span",{className:"whitespace-nowrap text-sm font-medium",children:"Lovable"})]})},sD=e=>{let{message:t,previousMessageId:a}=e,[s]=(0,tX.a)(),l=(0,ax.dl)("collaboration")||!1,n=(0,ep.ZP)(e=>e.getCollaborator(t.userId)),r=(0,ep.ZP)(e=>e.getMessage(a));return l&&n&&(!r||"userMessage"!==r.type||r.userId!==t.userId)&&n?(0,i.jsxs)("div",{className:"max-w-full self-end truncate text-xs font-medium text-muted-foreground",children:["From"," ",(0,i.jsx)(v.default,{className:"hover:underline",href:"/@".concat(n.username),children:(null==s?void 0:s.uid)===n.id?"You":n.display_name===n.id?n.email:n.display_name})]}):null},sR=e=>{let{message:t,previousMessageId:a}=e;switch(t.type){case"userCommit":return null;case"userMessage":return(0,i.jsx)(sD,{message:t,previousMessageId:a});case"branchSwitched":case"revertSuccess":case"revertSuccessv2":return(0,i.jsx)(sI,{message:t,previousMessageId:a});case"aiMessage":return(0,i.jsx)(sM,{message:t})}};var sz=a(96771);let sO=e=>{var t;let{shortCommitHash:a,scrollToEdit:s,newUI:l=!1}=e,n=(0,ep.ZP)(e=>e.getEditByShortCommitHash(a)),r=(0,_.Eh)(e=>e.setCodeViewType),c=(0,_.Eh)(e=>e.setActiveEdit),d=(0,_.Eh)(e=>e.setShowConsole),u=(0,em.iZ)(e=>e.project),{toggleBookmark:h}=aS(null!==(t=null==u?void 0:u.id)&&void 0!==t?t:""),g=(0,_.Eh)(e=>e.consoleContentType),f=(0,_.Eh)(e=>e.activeMessageId)===(null==n?void 0:n.id)&&"code"===g,v=(0,_.Eh)(e=>e.exitConsole),x=(0,_.Eh)(e=>e.setActiveMessageId),{tab:b="chat"}=(0,p.useParams)();(0,o.useEffect)(()=>{f&&c(null!=n?n:void 0)},[f,n,c]);let y=(0,o.useCallback)(()=>{n&&(f?(m.ZP.capture(ec.S.CONSOLE.EXITED_VIA_CARD),v()):(m.ZP.capture(ec.S.CODE_CARD.VIEW_CODE_CLICKED),x(n.id),r(_.es.DIFF),c(n),d("code")))},[n,f,v,x,r,c,d]),j=(0,o.useCallback)(e=>{e.stopPropagation(),(null==n?void 0:n.id)&&h(n.id,!!n.bookmarked)},[n,h]);return n?l?"history"===b?(0,i.jsx)(aA,{edit:n,simplified:!0}):(0,i.jsx)("div",{className:"flex flex-col gap-2 leading-[22px]",style:{overflowWrap:"anywhere"},children:(0,i.jsx)(R.E.div,{className:"relative mb-6 mt-3 flex w-5/6 max-w-sm",initial:{opacity:1},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,i.jsx)(sl,{edit:null!=n?n:null,handleToggleBookmark:j,handleOnClick:y,isActive:f,code:void 0,messageStopped:!1,status:"completed",revertCard:!0})})}):(0,i.jsxs)("button",{className:"flex items-center",onClick:()=>{n.type===sz.I.type.DEVELOPER_UPDATE?s({type:"shortCommitHash",value:a}):s({type:"editId",value:n.id})},children:[(0,i.jsx)("span",{className:"mr-2 text-sm text-muted-foreground",children:"Restored"}),(0,i.jsx)("div",{className:"flex items-center gap-2 rounded-full border border-emerald-500/20 bg-emerald-500/10 px-2.5 py-1.5 transition-colors group-hover:border-emerald-500/30 group-hover:bg-emerald-500/15",children:(0,i.jsx)("span",{className:"text-sm text-emerald-500",children:n.commit_message})})]}):null},sK=e=>{var t;let{shortCommitHash:a}=e,s=(0,ep.ZP)(e=>e.getEditByShortCommitHash(a)),{tab:l="chat"}=(0,p.useParams)();return s?"history"===l?(0,i.jsx)(aA,{edit:s,simplified:!0}):(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border bg-muted p-3",children:[(0,i.jsx)("div",{className:"flex w-full items-baseline gap-2",children:(0,i.jsx)("h4",{children:"External Commit"})}),(0,i.jsx)("p",{className:"whitespace-pre-line text-xs",style:{overflowWrap:"anywhere"},children:s.commit_message})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,i.jsx)(st,{editId:s.id,commitSha:s.commit_sha}),(0,i.jsx)(a9,{commitSha:s.commit_sha,previewBuildStatus:null!==(t=s.previewBuildStatus)&&void 0!==t?t:void 0})]})]}):null},sZ=e=>{let{message:t}=e,{tab:a="chat"}=(0,p.useParams)(),s=(0,ep.ZP)(e=>e.getEdit(t.editId));if("chat"===a){var l;return(null==s?void 0:null===(l=s.diff)||void 0===l?void 0:l.length)?(0,i.jsx)(sn,{code:{done:!0,parts:s.diff.map(e=>({type:"writing_file",file_path:e.file_path,done:!0,content:e.new_content}))},messageId:t.id,edit:s,messageStopped:!1,persisted:!1,status:"completed"}):(0,i.jsx)("div",{className:"relative w-5/6 max-w-xs",children:(0,i.jsx)(aA,{edit:s,messageId:t.id,simplified:!0})})}return(0,i.jsx)(aA,{edit:s,messageId:t.id,simplified:!0})};var sU=a(51817);let sF=async(e,t)=>{let a={dir_name:t.dir_name,file_name:t.file_name};return await e.post("/generate-file-download-url",a)},sW=e=>{let t=(0,t$.O)(),[a,s]=(0,o.useState)(void 0),l=(0,ep.ZP)(e=>e.imageUrlCache),n=(0,ep.ZP)(e=>e.cacheImageUrl),r="".concat(e.dir_name,"/").concat(e.file_name),i=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{i.current||(i.current=!0,(async()=>{if(l[r]){s(l[r]);return}let{url:a}=await sF(t,e);s(a),n(r,a)})())},[t,e,r,l,n]),a},sB=e=>{var t;let{images:a,optimistImageUrls:s}=e,l=a.length+(null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0)===1;return(0,i.jsxs)("div",{className:"mb-2 ml-auto flex max-w-[160px] flex-wrap justify-end gap-2",children:[null==s?void 0:s.map((e,t)=>(0,i.jsx)(sV,{imageUrl:e,singleImage:l},t)),a.map((e,t)=>(0,i.jsx)(sH,{image:e,singleImage:l},t))]})},sH=e=>{let{image:t,singleImage:a}=e,s=sW(t);return(0,i.jsx)(sV,{imageUrl:s,singleImage:a})},sV=e=>{let{imageUrl:t,singleImage:a}=e,s=(0,ep.ZP)(e=>e.setSelectedImageUrl),l=(0,o.useCallback)(()=>{t&&s(t)},[t,s]);return(0,i.jsx)(T.z,{variant:"ghost",className:(0,w.cn)("group relative inline-block p-0 hover:bg-transparent",a?"h-[90px] w-[160px]":"h-12 w-12"),type:"button",disabled:!t,onClick:l,children:t?(0,i.jsx)("img",{loading:"lazy",src:t,alt:"chat image",className:"h-full w-full rounded-lg border object-cover"}):(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg border bg-background/80",children:(0,i.jsx)(sU.Z,{className:"h-4 w-4 animate-spin"})})})};var sG=a(74928);function sX(e){let t=e.match(/([\s\S]+)```([\s\S]+)```\n+$/);return t?{error:t[2].trim(),text:t[1].trim()}:(Y.PW.error("no_error_message_found_in_input",{input:e}),{error:"",text:e})}let sq=e=>{let{content:t,open:a,onOpenChange:s,openText:l,closedText:n}=e;return(0,i.jsxs)(sG.zF,{open:a,onOpenChange:s,children:[(0,i.jsx)(sG.wy,{asChild:!0,children:(0,i.jsx)(T.z,{variant:"link",className:"mt-2 pl-0 font-semibold",children:a?l:n})}),(0,i.jsx)(sG.Fw,{className:"mt-4",children:(0,i.jsx)("pre",{className:"mt-2 rounded-md bg-secondary p-4 text-sm",children:(0,i.jsx)("code",{className:"block max-h-[300px] overflow-x-auto overflow-y-auto whitespace-pre-wrap",children:t})})})]})},sY=e=>{let{messageContent:t}=e,{error:a}=sX(t);return(0,i.jsx)(sQ,{errorContent:a})},sQ=e=>{let{errorContent:t}=e,[a,s]=(0,o.useState)(!1);return(0,i.jsx)(sq,{content:t,open:a,onOpenChange:s,openText:"Hide error",closedText:"Show error"})},sJ=e=>{let{content:t}=e,[a,s]=(0,o.useState)(!1);return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Write the code to create a new integration or update the existing integration with Supabase."}),(0,i.jsx)(sq,{content:t,open:a,onOpenChange:s,openText:"Hide detailed instructions",closedText:"Show detailed instructions"})]})},s$=e=>{let{content:t,selectedElements:a,containsError:s,tags:l}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(s2,{selectedElements:a}),(0,i.jsx)(s4,{content:t,containsError:s}),(0,i.jsx)(s0,{content:t,tags:l})]})},s0=e=>{let{content:t,tags:a}=e;return a.includes("supabase-integration-update")?(0,i.jsx)(sJ,{content:t}):null},s1=e=>{let{elementType:t}=e,a=B(t);return a?(0,i.jsx)(a,{fill:"white",className:"size-4"}):null},s2=e=>{let{selectedElements:t}=e;return 0===t.length?null:(0,i.jsx)(J.pn,{children:(0,i.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:t.map((e,t)=>{var a,s;return(0,i.jsxs)(J.u,{children:[(0,i.jsx)(J.aJ,{asChild:!0,children:(0,i.jsxs)("div",{className:(0,w.cn)((0,T.d)({variant:"outline",size:"sm"}),"flex items-center gap-2 text-xs"),children:[(0,i.jsx)(s1,{elementType:e.elementType}),(0,i.jsx)("span",{children:e.elementType})]})}),(0,i.jsxs)(J._v,{side:"top",children:["Line ",e.lineNumber," in"," ",null===(s=e.filePath)||void 0===s?void 0:null===(a=s.split)||void 0===a?void 0:a.call(s,"/").pop()]})]},t)})})})},s4=e=>{let{content:t,containsError:a}=e,{text:s,error:l}=(0,o.useMemo)(()=>a?sX(t):{text:t,error:null},[t,a]);return(0,i.jsxs)(i.Fragment,{children:[s,l&&(0,i.jsx)(sY,{messageContent:t})]})},s5=e=>{let{message:t}=e;return(0,i.jsxs)("div",{className:(0,w.cn)("align-end flex flex-col"),children:[(0,i.jsx)(sB,{images:t.images,optimistImageUrls:t.optimistImageUrls}),(0,i.jsx)("div",{className:(0,w.cn)("break-anywhere jus ml-auto max-w-[80%] overflow-auto whitespace-pre-wrap rounded-lg bg-secondary p-3 text-base leading-[22px]"),children:(0,i.jsx)(s$,{content:t.content,selectedElements:t.selectedElements,containsError:t.containsError,tags:t.tags})})]})},s6=(0,o.memo)(e=>{let{messageId:t,previousMessageId:a,isLastMessage:s=!1,newMessageMinHeight:l,scrollToEdit:n}=e,r=(0,ep.ZP)(e=>e.getMessage(t)),c=(0,ep.ZP)(e=>e.sortedMessageIds).indexOf(t),{tab:d="chat"}=(0,p.useParams)(),u=(0,o.useMemo)(()=>(null==r?void 0:r.type)==="aiMessage"&&(1===c||c<2),[r,c]),m=(0,o.useMemo)(()=>{if(!r)return null;switch(r.type){case"userMessage":return(0,i.jsx)(s5,{message:r});case"userCommit":return(0,i.jsx)(sK,{shortCommitHash:r.shortCommitHash});case"aiMessage":return(0,i.jsx)(sy,{message:r,isFirstAIMessage:u});case"branchSwitched":return(0,i.jsx)(sj,{branchName:r.branchName});case"revertSuccessv2":return(0,i.jsx)(sO,{shortCommitHash:r.shortCommitHash,newUI:!0,scrollToEdit:n});case"revertSuccess":return(0,i.jsx)(sO,{shortCommitHash:r.shortCommitHash,scrollToEdit:n});case"manualEdit":return(0,i.jsx)(sZ,{message:r});default:return Y.PW.error("Unknown message role",{message:r}),null}},[r,s,u]);return r&&("history"!==d||["aiMessage","manualEdit","revertSuccessv2","userCommit"].includes(r.type))?(0,i.jsxs)("div",{className:(0,w.cn)("ChatMessageContainer","group flex flex-col pr-2",{"pb-4":"history"!==d}),"data-message-id":r.id,"data-message-edit-id":s3(r),"data-langsmith-url":s9(r),style:{minHeight:s&&l?l+"px":"auto"},children:["history"!==d&&(0,i.jsx)(sR,{message:r,previousMessageId:a}),(0,i.jsx)("div",{className:(0,w.cn)({"pl-2":"userMessage"!==r.type}),children:m})]}):null});s6.displayName="ChatItemV2";let s3=e=>{if("aiMessage"===e.type)return e.editId},s9=e=>{if("aiMessage"===e.type)return e.langsmithUrl};var s8=a(56942),s7=a(31303);let le=e=>{let{messageId:t,messageDate:a,todaysIds:s,yesterdaysIds:l,previousIds:n}=e,r=(0,s8.b)(new Date),i=(0,s8.b)(a),o=(0,s7.j)(r,i);o<1?s.push(t):o<2?l.push(t):n.push(t)},lt=(0,o.memo)(e=>{var t,a,s,l;let{messageIds:n,scrollToEdit:r}=e,c=(0,em.iZ)(e=>e.project),d=(0,ep.ZP)(e=>e.messages),u=(0,ep.ZP)(e=>e.getEditByShortCommitHash),p=(0,ep.ZP)(e=>e.getEdit),m=(0,o.useMemo)(()=>[...n].reverse(),[n]),h=(0,o.useMemo)(()=>{let e=[],t=[],a=[],s=[];return u(null==c?void 0:c.latest_commit_sha)?(m.forEach(l=>{let n=d[l];if("manualEdit"!==n.type&&"aiMessage"!==n.type&&"revertSuccessv2"!==n.type&&"userCommit"!==n.type)return;let r=!1;if("userCommit"===n.type){let e=u(n.shortCommitHash);r=!!(null==e?void 0:e.bookmarked)}else if(n.editId){let e=p(n.editId);r=!!(null==e?void 0:e.bookmarked)}if(r){s.push(l);return}(null==n?void 0:n.createdAt)&&le({messageId:l,messageDate:n.createdAt,todaysIds:e,yesterdaysIds:t,previousIds:a})}),{todaysMessageIds:null!=e?e:[],yesterdaysMessageIds:null!=t?t:[],previousMessageIds:null!=a?a:[],bookmarkedMessageIds:null!=s?s:[]}):null},[p,u,d,null==c?void 0:c.latest_commit_sha,m]);return h?(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsxs)(ai.dM,{overscan:5,children:[(null==h?void 0:null===(t=h.bookmarkedMessageIds)||void 0===t?void 0:t.length)>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"ml-2 mt-1 text-xs font-semibold uppercase text-muted-foreground",children:"Saved"}),null==h?void 0:h.bookmarkedMessageIds.map(e=>(0,i.jsx)(s6,{messageId:e,previousMessageId:m[0],scrollToEdit:r},e))]}),(null==h?void 0:null===(a=h.todaysMessageIds)||void 0===a?void 0:a.length)>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"ml-2 mt-1 text-xs font-semibold uppercase text-muted-foreground",children:"Today"}),null==h?void 0:h.todaysMessageIds.map(e=>(0,i.jsx)(s6,{messageId:e,previousMessageId:m[0],scrollToEdit:r},e))]}),(null==h?void 0:null===(s=h.yesterdaysMessageIds)||void 0===s?void 0:s.length)>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"ml-2 mt-1 text-xs font-semibold uppercase text-muted-foreground",children:"Yesterday"}),null==h?void 0:h.yesterdaysMessageIds.map(e=>(0,i.jsx)(s6,{messageId:e,previousMessageId:m[0],scrollToEdit:r},e))]}),(null==h?void 0:null===(l=h.previousMessageIds)||void 0===l?void 0:l.length)>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"ml-2 mt-1 text-xs font-semibold uppercase text-muted-foreground",children:"Previous"}),null==h?void 0:h.previousMessageIds.map(e=>(0,i.jsx)(s6,{messageId:e,previousMessageId:m[0],scrollToEdit:r},e))]})]})}):null});lt.displayName="HistoryPanel";var la=a(97318);let ls=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:t,onResult:a,...s}=e,l=(0,t$.O)(),n=(0,c.D)();return(0,sg.a)({...s,queryKey:la.iZ.collaborators(n),queryFn:async()=>{try{let e=await l.get("/projects/".concat(n,"/collaborators"));return null==a||a(e),e}catch(t){e.onError&&e.onError(t),Y.PW.error("Failed to fetch collaborators",{error:t})}},enabled:t})},ll=()=>{let e=(0,ep.ZP)(e=>e.setCollaboratorsInitialized),t=(0,ep.ZP)(e=>e.collaboratorsInitialized),a=(0,ax.dl)("collaboration"),s=void 0===a||a,l=(0,ep.ZP)(e=>e.setCollaborators);return ls({enabled:s,onError(t){Y.PW.error("Error loading collaborators",{error:t}),e(!0)},onResult(t){l(t),e(!0)}}),{isInitialized:!s||t}};var ln=a(5978),lr=a(78099);let li=(e,t)=>{let a={};return e.forEach((e,s)=>{var l,n,r,i,o,c,d,u;let p=e.data(),m={id:p.id,commit_sha:null!==(l=p.commit_sha)&&void 0!==l?l:"unknown",commit_message:null!==(n=p.commit_message)&&void 0!==n?n:"unknown",number:s+t+1,created_at:p.created_at,reverted:null!==(r=p.reverted)&&void 0!==r&&r,type:p.type,diff:null!==(i=p.diff)&&void 0!==i?i:null,status:null!==(o=p.status)&&void 0!==o?o:null,previewBuildStatus:null!==(c=p.preview_build_status)&&void 0!==c?c:null,bookmarked:null!==(d=p.bookmarked)&&void 0!==d&&d,pages:null!==(u=p.pages)&&void 0!==u?u:[]};a[m.id]=m}),a},lo=()=>{let e=(0,ep.ZP)(e=>e.mergeEdits),[t,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)(),n=(0,c.D)(),r=(0,o.useMemo)(()=>(0,ln.IO)((0,ln.hJ)(lr.db,"projects",n,"edits"),(0,ln.Xo)("bookmarked","desc"),(0,ln.Xo)("created_at","desc"),(0,ln.ar)("type","in",[sz.I.type.MANUAL_UPDATE,sz.I.type.AI_UPDATE,sz.I.type.DEVELOPER_UPDATE,sz.I.type.REVERT])),[n]);return(0,o.useEffect)(()=>{(async()=>{try{let e=(await (0,ln.Yp)(r)).data().count;l(Math.max(0,e-1e3))}catch(e){Y.PW.error("Error fetching edit count",{error:e})}})()},[r]),(0,o.useEffect)(()=>{if(void 0===s)return;let t=(0,ln.cf)((0,ln.IO)(r,(0,ln.b9)(1e3)),t=>{e({edits:li([...t.docs].reverse(),s)}),a(!0)},e=>{Y.PW.error("Error loading edits",{error:e})});return()=>t()},[s,r]),{isInitialized:t}},lc=()=>{let e=(0,ep.ZP)(e=>e.mergeMessages),t=(0,c.D)(),[a,s]=(0,o.useState)(!1),l=(0,o.useMemo)(()=>(0,ln.IO)((0,ln.hJ)(lr.db,"projects",t,"trajectory"),(0,ln.Xo)("created_at","desc"),(0,ln.b9)(1e3)),[t]);return(0,o.useEffect)(()=>{let t=(0,ln.cf)(l,t=>{let a=[...t.docs].reverse();e({messages:(0,aH.Oh)(a,{persisted:!0})}),s(!0)},e=>{Y.PW.error("Error loading messages",{error:e})});return()=>t()},[l]),{isInitialized:a}},ld=()=>{let{isInitialized:e}=lc(),{isInitialized:t}=lo(),{isInitialized:a}=ll();return{isInitialized:e&&t&&a}},lu=e=>{let{show:t}=e;return(0,i.jsx)(R.E.div,{initial:{scale:0,opacity:0},animate:{scale:t?1:0,opacity:t?1:0},transition:{duration:.2,ease:"easeOut"},className:"ml-2 flex h-auto w-5 justify-center pt-1",children:(0,i.jsx)(lh,{})})},lp=e=>{let{children:t}=e;return(0,i.jsx)(R.E.div,{className:"group pointer-events-none absolute inset-x-0 bottom-0 -mt-8 flex min-h-8 items-center justify-start bg-gradient-to-b from-transparent to-background pr-2 text-sm text-card-foreground",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},children:t})},lm=e=>{let{scrolledToEnd:t}=e,a=(0,_.Eh)(e=>e.isSendChatMessageMutationPending),s=eg(),l=(0,_.Eh)(e=>e.isSomeRevertMutationPending),n=a&&s||l,r=!t||n;return(0,i.jsx)(D.M,{children:r&&(0,i.jsx)(lp,{children:(0,i.jsx)(lu,{show:n})})})},lh=e=>{let{size:t=12,...a}=e;return(0,i.jsxs)(R.E.svg,{width:t,height:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",variants:{beat:{scale:[1,1.2,1],transition:{duration:1.2,repeat:1/0,bounce:.5,times:[0,.15,.3]}}},animate:"beat",...a,children:[(0,i.jsx)("g",{clipPath:"url(#clip0_429_60)",children:(0,i.jsx)("circle",{cx:50,cy:50,r:50,fill:"#f4f4f5"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_429_60",children:(0,i.jsx)("rect",{width:100,height:100,fill:"#f4f4f5"})})})," "]})},lg=(0,o.memo)(()=>{let{isInitialized:e}=ld();return e?(0,i.jsx)(lf,{}):(0,i.jsx)("div",{className:"flex h-full flex-grow items-center justify-center gap-2 text-sm",children:(0,i.jsx)(y.Z,{className:"animate-spin",name:"progress_activity",size:"small"})})});lg.displayName="ChatV2";let lf=(0,o.memo)(()=>{let{tab:e="chat"}=(0,p.useParams)(),t=(0,ep.ZP)(e=>e.sortedMessageIds),a=(0,o.useRef)(null),s=(0,o.useRef)(null),{newMessageMinHeight:l,scrollToEnd:n,isScrollable:r,isScrolledToEnd:c,checkScrollPosition:d}=ag({sortedMessageIds:t,listRef:a,containerRef:s}),u=af({sortedMessageIds:t,listRef:a});return(0,i.jsxs)("div",{className:"flex-shrink-1 relative flex min-h-0 w-full flex-grow",ref:s,children:[(0,i.jsx)("div",{className:"w-full overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground",children:"history"===e?(0,i.jsx)(lt,{messageIds:t,scrollToEdit:u}):(0,i.jsx)(ai.dM,{keepMounted:[t.length-1],ref:a,overscan:10,onScroll:()=>{d()},children:t.map((e,a)=>(0,i.jsx)(s6,{messageId:e,previousMessageId:t[a-1],isLastMessage:a===t.length-1,newMessageMinHeight:l,scrollToEdit:u},e))})}),(0,i.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 mb-4 flex w-full items-center justify-center",children:(0,i.jsx)(av,{scrollToEnd:n,isScrolledToEnd:c,isScrollable:r})}),(0,i.jsx)(lm,{scrolledToEnd:c})]})});lf.displayName="InnerChatV2";var lv=a(95033);let lx=()=>{let e=(0,c.D)(),t=(0,o.useRef)(null);!function(e){let t=function(e){let{data:t}=(0,sg.a)({queryKey:la.iZ.initialPrompt(e),staleTime:1/0,initialData:null});return t}(e),a=(0,u.NL)(),s=(0,o.useRef)(!1),l=(0,aa.O)({projectId:e});(0,o.useEffect)(()=>{var n,r;if(!t||s.current)return;s.current=!0;let i={id:t.id,message:t.message};(null===(n=t.selectedElements)||void 0===n?void 0:n.length)&&(i.selected_elements=t.selectedElements),(null===(r=t.images)||void 0===r?void 0:r.length)&&(i.optimisticImageContentFiles=t.images.map(e=>e.file),i.images=t.images.map(e=>({image_id:e.id,type:lv.V.USER_UPLOAD}))),t.chatOnly&&(i.chat_only=t.chatOnly),t.agentModeEnabled&&(i.agent_mode_enabled=t.agentModeEnabled),t.builderToken&&(i.builder_token=t.builderToken),l.mutate({body:i,isCreation:!0}),a.removeQueries({queryKey:la.iZ.initialPrompt(e)})},[t,e,l,a])}(e);let a=(0,d.m)();return(null==a?void 0:a.edit)?(0,i.jsxs)("div",{className:"flex h-full w-full flex-col pl-2",ref:t,children:[(0,i.jsx)(lg,{}),(0,i.jsx)(as,{chatPanelRef:t})]}):null}},62809:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var s=a(69367),l=a(2265);function n(e){let[t,a]=(0,l.useState)(0),[n,r]=(0,l.useState)(0),[i,o]=(0,l.useState)(e);return i!==e&&(o(e),r(t)),(0,l.useEffect)(()=>{let t=e.split("").length-n,l=(0,s.j)(n,e.split("").length,{duration:Math.max(.1,t/200),bounce:0,onUpdate(e){a(Math.floor(e))}});return()=>l.stop()},[n,e]),e.split("").slice(0,t).join("")}},3097:function(e,t,a){"use strict";a.d(t,{U:function(){return c},b:function(){return o}});var s=a(5978),l=a(2265),n=a(78099),r=a(82246);let i=e=>{if(e.created_at&&!(e.created_at instanceof s.EK)){let{seconds:t,nanoseconds:a}=e.created_at;e.created_at=new s.EK(t,a)}return e},o=()=>{let e=(0,r.Eh)(e=>e.latestStreamedMessage);return e?i(e):null},c=e=>{let{projectId:t,messageId:a}=e,[r,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!t||!a)return;let e=(0,s.JU)(n.db,"projects",t,"trajectory",a);return(0,s.cf)(e,e=>{e.exists()?i(e.data()):i(null)})},[t,a]),r}},22529:function(e,t,a){"use strict";a.d(t,{x:function(){return c}});var s=a(57437),l=a(30166),n=a(94508),r=a(13673),i=a(70060);let o=(0,l.default)(()=>Promise.all([a.e(1668),a.e(4584)]).then(a.bind(a,74584)).then(e=>e.OutOfCreditsDialog),{loadableGenerated:{webpack:()=>[74584]},ssr:!1});function c(e){let{children:t,className:a}=e,l=(0,r.ZP)(e=>e.isOutOfCreditsDialogOpen),{AuthDialogComponent:c,sendChatMessage:d}=(0,i.mp)();return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d()},className:(0,n.cn)("duration-125 focus-within:bg-card-hover group flex flex-col gap-2 rounded-xl border border-muted-border bg-muted p-2 transition-colors ease-in-out",a),children:[t,l&&(0,s.jsx)(o,{}),c]})}},11536:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(57437),l=a(94508);let n=e=>{let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex items-center gap-1",a),children:t})}},70122:function(e,t,a){"use strict";a.d(t,{T:function(){return i}});var s=a(57437),l=a(2265),n=a(82246),r=a(57346);let i=e=>{let{setSelectedImageUrl:t}=e,a=(0,n.Eh)(e=>e.images),r=(0,n.Eh)(e=>e.setImages),i=(0,l.useCallback)(e=>{r(t=>t.filter(t=>t.url!==e))},[r]);return 0===a.length?null:(0,s.jsx)("div",{className:"flex flex-nowrap gap-2 overflow-x-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:a.map(e=>(0,s.jsx)(o,{setSelectedImageUrl:t,image:e,removeImage:i},e.url))})},o=e=>{let{image:t,removeImage:a,setSelectedImageUrl:n}=e,i=(0,l.useCallback)(()=>{n&&n(t.url)},[t.url,n]),o=n?"button":"div";return(0,s.jsxs)("div",{className:"group/attached-image relative flex flex-wrap gap-2",children:[(0,s.jsx)(o,{className:"h-12 w-12 p-0",type:"button",onClick:i,children:(0,s.jsx)("img",{src:t.url,alt:"Uploaded image preview",className:"h-full w-full rounded-md object-cover"})}),t.uploading&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-md bg-background",children:(0,s.jsx)(r.Z,{name:"progress_activity",className:"animate-spin"})}),(0,s.jsx)("button",{className:"absolute right-0 top-0 z-[10001] flex items-center justify-center rounded-full bg-primary text-xs text-primary-foreground opacity-0 shadow shadow-background/25 transition-opacity duration-150 ease-out group-hover/attached-image:opacity-100",onClick:()=>a(t.url),children:(0,s.jsx)(r.Z,{name:"close_small",size:"small"})})]},t.url)}},29162:function(e,t,a){"use strict";a.d(t,{O:function(){return r},x:function(){return i}});var s=a(57437),l=a(2265);let n=(0,l.createContext)(null),r=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useChatInputContext must be used within a ChatInputProvider");return e},i=e=>{let{children:t,onSendChatMessage:a,localStorageKey:r,hasActiveLock:i}=e,o=(0,l.useRef)(null),c=(0,l.useMemo)(()=>({sendChatMessage:a,chatInputFormRef:o,localStorageKey:r,hasActiveLock:i}),[a,o,r,i]);return(0,s.jsx)(n.Provider,{value:c,children:t})}},62475:function(e,t,a){"use strict";a.d(t,{t:function(){return h}});var s=a(57437),l=a(2265),n=a(21770),r=a(14438),i=a(36710),o=a(82246),c=a(3097),d=a(65666),u=a(94508),p=a(57346),m=a(70060);let h=e=>{let{className:t,iconSize:a="large",disabled:h=!1}=e,g=(0,d.v)(),{sendingDisabled:f}=(0,m.mp)(),{showStopAction:v,mutation:x}=function(e){let{projectId:t}=e,a=(0,i.O)(),s=(0,c.b)(),[d,u]=(0,l.useState)(void 0),p=(0,o.Eh)(e=>e.setLatestStreamedMessage),m=(0,o.Eh)(e=>e.addStoppedMessageId),h=(0,n.D)({mutationFn:async()=>{if(!s)throw Error("No currently streaming message found");if(!t)throw Error("No projectId found");if(!("content"in s))throw Error("Invalid message type");return p({...s,stopped:!0}),await a.post("/projects/".concat(t,"/chat/").concat(s.id,"/cancel"))},onSuccess:()=>{m(null==s?void 0:s.id),u(null==s?void 0:s.id),p(void 0)},onError:()=>{r.Am.error("Failed to stop message",{description:"Please try again"})}});return{showStopAction:!!s&&!s.stopped&&s.id!==d,mutation:h}}({projectId:null!=g?g:void 0}),b=(0,l.useCallback)(async()=>{await x.mutateAsync()},[x]);return g&&(v||x.isPending)?(0,s.jsx)("button",{type:"button",className:(0,u.cn)(t,"transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50"),disabled:x.isPending,onClick:b,children:(0,s.jsx)(p.Z,{name:"stop_circle",size:a})}):(0,s.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,u.cn)(t,"transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50"),disabled:f||h,children:(0,s.jsx)(p.Z,{name:"arrow_circle_up",size:a})})}},4586:function(e,t,a){"use strict";a.d(t,{E:function(){return u}});var s=a(57437),l=a(2265),n=a(44481),r=a(94311),i=a(27132),o=a(94508),c=a(76818),d=a(29162);let u=e=>{let{autoSize:t,minHeight:a=40,className:u,autoFocus:m,placeholder:h,forceShowPlaceholder:g,disabled:f}=e,{chatInputFormRef:v,localStorageKey:x}=(0,d.O)(),{chatMessage:b,setChatMessage:y}=(0,r.b)({localStorageKey:x}),j=(0,l.useCallback)(e=>{y(e.target.value)},[y]);p({autoSize:t,value:b,textareaRef:v,minHeight:a}),(0,n.y1)("t",e=>{e.preventDefault(),v.current&&v.current.focus()});let w=(0,i.Z)("md");return(0,l.useEffect)(()=>{(null==v?void 0:v.current)&&!w&&v.current.focus()},[b,v,w]),(0,s.jsx)(c.g,{id:"chatinput",autoFocus:m,ref:null!=v?v:void 0,disabled:f,value:g?"":b,onChange:j,className:(0,o.cn)("resize-none bg-inherit text-[16px] leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap md:text-base","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground","bg-transparent focus:bg-transparent",u),style:{minHeight:a},placeholder:h,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=e.currentTarget.closest("form");t&&t.requestSubmit(),e.currentTarget.blur()}}})},p=e=>{let{autoSize:t,value:a,textareaRef:s,minHeight:n=0}=e;(0,l.useLayoutEffect)(()=>{if(!s.current||!t)return;let e=s.current,l=document.createElement("div");l.style.visibility="hidden",l.style.position="absolute",l.style.overflow="hidden",l.style.whiteSpace="pre-wrap",l.style.wordBreak="break-word",document.body.appendChild(l);let r=window.getComputedStyle(e);l.style.width=r.width,l.style.padding=r.padding,l.style.lineHeight=r.lineHeight,l.style.fontSize=r.fontSize,l.style.fontFamily=r.fontFamily,l.style.boxSizing=r.boxSizing,l.textContent=a+"\n";let i=Math.max(l.scrollHeight,n);e.style.height!=="".concat(i,"px")&&(e.style.height="".concat(i,"px")),document.body.removeChild(l)},[a,s,n,t])}},58135:function(e,t,a){"use strict";a.d(t,{y:function(){return o}});var s=a(57437),l=a(94508),n=a(82246),r=a(70060);let i=e=>(0,r.L0)(e)?"Message is too long. Exceeded by ".concat(e.length-r.mh," character")+(e.length-r.mh==1?"":"s"):r.mh-e.length<1e3?"".concat(r.mh-e.length," character")+(r.mh-e.length==1?"":"s")+" left":"",o=()=>{let e=(0,n.Eh)(e=>e.chatMessage),t=i(e),a=(0,r.L0)(e);return t?(0,s.jsx)("div",{className:(0,l.cn)("mx-2 flex items-center text-sm text-muted-foreground",{"text-destructive":a}),children:t}):null}},70060:function(e,t,a){"use strict";a.d(t,{mh:function(){return f},L0:function(){return v},mp:function(){return x}});var s=a(57437),l=a(2265),n=a(94311),r=a(32935),i=a(99376),o=a(62869),c=a(26110);function d(e){let{open:t,onOpenChange:a}=e,l=(0,i.useRouter)();return(0,s.jsx)(c.Vq,{open:t,onOpenChange:a,children:(0,s.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(c.fK,{children:[(0,s.jsx)(c.$N,{children:"Sign in to continue"}),(0,s.jsx)(c.Be,{children:"Create an account or sign in to send messages"})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,s.jsx)(o.z,{onClick:()=>l.push("/login"),className:"w-full",variant:"outline",children:"Sign In"}),(0,s.jsx)(o.z,{onClick:()=>l.push("/signup"),className:"w-full",children:"Sign up for free"})]})]})})}var u=a(49340),p=a(21288),m=a(95033),h=a(82246),g=a(29162);let f=5e4,v=e=>e.length>f,x=()=>{let{sendChatMessage:e,localStorageKey:t,hasActiveLock:a}=(0,g.O)(),{clearChatMessage:i,restoreChatMessage:o}=(0,n.b)({localStorageKey:t}),[c]=(0,u.a)(),[f,x]=(0,l.useState)(!1),b=(0,h.Eh)(e=>e.images),y=(0,h.Eh)(e=>e.setImages),j=(0,h.Eh)(e=>e.chatMessage),w=(0,h.Eh)(e=>e.selectedElements),E=(0,h.Eh)(e=>e.setSelectedElements),[k,N]=(0,l.useState)(!1),C=(0,h.Eh)(e=>e.chatMode),_=(0,h.Eh)(e=>e.setChatMode),S=(0,h.Eh)(e=>e.shouldBlockActions()),T=(0,l.useMemo)(()=>b.some(e=>e.uploading),[b]),A=(0,l.useMemo)(()=>S||a||k,[S,a,k]),P=(0,l.useMemo)(()=>A||0===j.length||T||v(j),[A,j,T]),I=(0,l.useCallback)(async()=>{if(P)return;if(C===h.jE.CHAT_ONLY&&j.toLowerCase().includes("lov-action")&&_(h.jE.DEFAULT),!c){x(!0);return}let t={images:b,selectedElements:w},a={id:(0,r.dX)(),message:j,images:b.map(e=>({image_id:e.id,type:m.V.USER_UPLOAD})),selected_elements:w,optimisticImageContentFiles:b.map(e=>e.file),chat_only:C===h.jE.CHAT_ONLY,agent_mode_enabled:C===h.jE.AGENT};try{await e({body:a,options:{clear:()=>{i(),y([]),E([])},restore:()=>{y(t.images),o(),E(t.selectedElements)}}})}catch(e){p.PW.warn("Error when sending chat message",{error:e})}},[e,j,b,i,o,y,w,E,C,_,c,x,P]);return{sendChatMessage:(0,l.useCallback)(async()=>{if(!k){N(!0);try{await I()}catch(e){p.PW.warn("Error when sending chat message",{error:e})}finally{N(!1)}}},[I,k]),sendingDisabled:P,isLocked:A,AuthDialogComponent:(0,s.jsx)(d,{open:f,onOpenChange:x})}}},74928:function(e,t,a){"use strict";a.d(t,{Fw:function(){return r},wy:function(){return n},zF:function(){return l}});var s=a(66534);let l=s.fC,n=s.wy,r=s.Fw},9259:function(e,t,a){"use strict";a.d(t,{R:function(){return i}});var s=a(57437),l=a(2265),n=a(95186),r=a(94508);let i=l.forwardRef((e,t)=>{let{value:a,onChange:i,min:o=0,max:c=100,step:d=1,className:u,scrubSensitivity:p=.5,direction:m="horizontal",icon:h,leftIcon:g,disabled:f=!1,...v}=e,[x,b]=l.useState(a),[y,j]=l.useState(!1),w=l.useRef(!1),E=l.useRef(0),k=l.useRef(0),N=l.useRef(a),C=l.useMemo(()=>{if(!Number.isFinite(d))return 0;let e=d.toString().split(".")[1];return e?e.length:0},[d]);function _(e){return parseFloat(Math.max(o,Math.min(Math.round(e/d)*d,c)).toFixed(C))}function S(e){f||0!==e.button||(j(!0),w.current=!0,E.current=e.clientX,k.current=e.clientY,N.current=x,document.addEventListener("pointermove",T),document.addEventListener("pointerup",A))}function T(e){if(!w.current)return;let t=e.clientX-E.current,a=-e.clientY+k.current,s=N.current+("horizontal"===m?t:a)*d*p;b(s=_(s)),i(s)}function A(){j(!1),w.current=!1,document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",A)}return l.useEffect(()=>{b(a)},[a]),(0,s.jsxs)("div",{className:(0,r.cn)("group relative w-fit",u,{"opacity-50":f}),children:[g&&(0,s.jsx)("div",{className:(0,r.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground","horizontal"===m?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:S,children:g}),(0,s.jsx)(n.I,{ref:t,type:"number",className:(0,r.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===m?"hover:cursor-ew-resize":"hover:cursor-ns-resize",g&&"pl-8"),disabled:f,step:d,value:x,onChange:function(e){let t=e.target.value;if(""===t){b(o),i(o);return}let a=parseFloat(t);if(isNaN(a)){b(o),i(o);return}let s=_(a);b(s),i(s)},onPointerDown:S,...v}),!!y&&(0,s.jsx)("div",{className:(0,r.cn)("fixed inset-0","horizontal"===m?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},48349:function(e,t,a){"use strict";a.d(t,{B:function(){return E}});var s=a(57437),l=a(29162),n=a(2265),r=a(54887);let i={JPEG:{mimeType:"image/jpeg",extensions:[".jpg",".jpeg"],displayName:"JPG"},PNG:{mimeType:"image/png",extensions:[".png"],displayName:"PNG"},WEBP:{mimeType:"image/webp",extensions:[".webp"],displayName:"WEBP"}},o=()=>Object.values(i).reduce((e,t)=>({...e,[t.mimeType]:t.extensions}),{}),c=e=>Object.values(i).some(t=>t.mimeType===e),d=()=>{let e=Object.values(i).map(e=>e.displayName),t=e.pop();return"".concat(e.join(", "),", or ").concat(t)},u=()=>20971520,p=e=>c(e.type),m=e=>{var t;let a=null===(t=e.clipboardData)||void 0===t?void 0:t.items;return a?Array.from(a).filter(e=>"file"===e.kind).map(e=>e.getAsFile()).filter(Boolean).filter(p):[]};var h=a(94508),g=a(57346);let f=e=>{let{getRootProps:t,portalTargetRef:a,isDragReject:l}=e,[i,o]=(0,n.useState)(!1),c=(0,n.useRef)(0),u=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),p=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c.current--,c.current>0||o(!1)},[]),m=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c.current+=1,null!==e.dataTransfer&&e.dataTransfer.types.includes("Files")&&o(!0)},[]),f=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o(!1),null!==e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(c.current=0)},[]),v=(null==a?void 0:a.current)||window.document.body;(0,n.useEffect)(()=>{if(v)return v.addEventListener("dragenter",m),v.addEventListener("dragleave",p),v.addEventListener("dragover",u),v.addEventListener("drop",f),function(){v.removeEventListener("dragenter",m),v.removeEventListener("dragleave",p),v.removeEventListener("dragover",u),v.removeEventListener("drop",f)}},[v,m,p,u,f]),(0,n.useEffect)(()=>{if(v)return i&&(v.style.overflow="hidden"),()=>{v.style.overflow="auto"}},[i,v]);let[x,b]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{b(!0)},[]),v)?(0,s.jsx)(s.Fragment,{children:x&&(0,r.createPortal)((0,s.jsx)("div",{...t(),className:(0,h.cn)("inset-0 z-30 flex items-center justify-center bg-black/80 transition-opacity duration-75",(null==a?void 0:a.current)?"absolute pl-3":"fixed",i?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg bg-muted p-5",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23333' stroke-width='2' stroke-dasharray='10%2c 10' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")"},children:[(0,s.jsx)(g.Z,{name:"add_photo_alternate",className:"h-8 w-8"}),(0,s.jsx)("h1",{className:"text-center text-primary",children:l?"Invalid file type":"Upload images"}),(0,s.jsx)("p",{className:"text-center text-sm",children:l?"Some files will not be accepted":"Drop ".concat(d()," files here")})]})}),v)}):null};var v=a(36710),x=a(26034),b=a(82246),y=a(1346),j=a(14438),w=a(49360);let E=e=>{let t=(0,v.O)(),{chatInputFormRef:a}=(0,l.O)(),r=(0,b.Eh)(e=>e.setImages),i=(0,b.Eh)(e=>e.images),c=(0,n.useCallback)(async e=>{let a=e.map(async e=>{let a=await (0,x.c)(t,e.id,e.file);return{file:e.file,url:a,id:e.id}}),s=await Promise.allSettled(a),l=s.filter(e=>"rejected"===e.status);l.length>0&&j.Am.error("Image upload failed",{description:"Failed to upload ".concat(l.length," file").concat(l.length>1?"s":"",".")}),r(t=>{let a=new Set(s.filter(e=>"fulfilled"===e.status).map(e=>e.value.id)),l=new Set(e.map(e=>e.id).filter(e=>!a.has(e)));return t.filter(e=>!l.has(e.id)).map(e=>({...e,uploading:!1}))})},[r,j.Am,t]),d=(0,n.useCallback)(e=>{if(i.length+e.length>20){j.Am.error("Too many images",{description:"You can't add this many images in one message."});return}let t=e.map(e=>({file:e,url:URL.createObjectURL(e),uploading:!0,id:(0,w.Z)()}));r(e=>[...e,...t]),c(t)},[c,r,i]),{getInputProps:p,open:h,getRootProps:g,isDragReject:E}=(0,y.uI)({onDrop:d,onDropAccepted:()=>{var e;null==a||null===(e=a.current)||void 0===e||e.focus()},noClick:!0,noKeyboard:!0,maxSize:u(),maxFiles:20-i.length,accept:o(),onDropRejected:e=>{let t=!1;for(let a of e)if(a.errors.length>0){let s=a.errors[0].message,l=a.errors[0].code;if("file-too-large"===a.errors[0].code)l="File too large",s="File is too large. Max size is 20MB";else if("too-many-files"===a.errors[0].code){if(t)continue;i.length,e.length,l="Too many images",s="You can't add this many images in one message.",t=!0}j.Am.error(l,{description:s})}}});return(0,n.useEffect)(()=>{let e=e=>{let t=m(e);if(t.length>0){var s;d(t),null==a||null===(s=a.current)||void 0===s||s.focus()}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[d,a]),{dropzoneElement:(0,s.jsx)(f,{getRootProps:g,portalTargetRef:e,isDragReject:E}),openFileUpload:h,getInputProps:p}}},95033:function(e,t,a){"use strict";var s,l;a.d(t,{V:function(){return s}}),(l=s||(s={})).USER_UPLOAD="user_upload",l.IFRAME_SNAPSHOT="iframe_snapshot"}}]);