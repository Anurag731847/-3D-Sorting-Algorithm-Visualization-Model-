try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="871356ec-d370-49e4-8d11-b5065c4c0426",e._sentryDebugIdIdentifier="sentry-dbid-871356ec-d370-49e4-8d11-b5065c4c0426")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8729],{62380:function(e,t,n){"use strict";var s,r,a,i,l=n(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(null,arguments)}t.Z=function(e){return l.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:109,height:113,fill:"none"},e),s||(s=l.createElement("path",{fill:"url(#supabase_logo_svg__a)",d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),r||(r=l.createElement("path",{fill:"url(#supabase_logo_svg__b)",fillOpacity:.2,d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),a||(a=l.createElement("path",{fill:"#3ECF8E",d:"M45.317 2.071c2.86-3.601 8.657-1.628 8.726 2.97l.442 67.251H9.83c-8.19 0-12.759-9.46-7.665-15.875z"})),i||(i=l.createElement("defs",null,l.createElement("linearGradient",{id:"supabase_logo_svg__a",x1:53.974,x2:94.163,y1:54.974,y2:71.829,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#249361"}),l.createElement("stop",{offset:1,stopColor:"#3ECF8E"})),l.createElement("linearGradient",{id:"supabase_logo_svg__b",x1:36.156,x2:54.484,y1:30.578,y2:65.081,gradientUnits:"userSpaceOnUse"},l.createElement("stop",null),l.createElement("stop",{offset:1,stopOpacity:0})))))}},15495:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var s=n(2265),r=n(25134);let a=()=>{let{userData:e,isInitialized:t}=(0,r.v)(),n=(0,s.useMemo)(()=>{if(e&&t)return e.credits_granted-e.credits_used>0||e.daily_credits_used<e.daily_credits_limit||e.billing_period_credits_used<e.billing_period_credits_limit},[e,t]),a=null==e?void 0:e.daily_credits_limit,i=null==e?void 0:e.daily_credits_used,l=null==e?void 0:e.billing_period_credits_limit,o=null==e?void 0:e.billing_period_credits_used,c=void 0!==l&&void 0!==o&&l>0,d=void 0!==a&&void 0!==i&&a>0,u=c?"".concat(l-o,"/").concat(l):"",m=d?"".concat(a-i,"/").concat(a):"";return{dailyCreditLimit:a,dailyCreditsUsed:i,billingPeriodCreditLimit:l,billingPeriodCreditsUsed:o,hasBillingPeriodCredits:c,hasDailyCreditsLimit:d,billingPeriodCreditsFormatted:u,dailyCreditsFormatted:m,bonusCredits:(null==e?void 0:e.credits_granted)!==void 0&&(null==e?void 0:e.credits_used)!==void 0?e.credits_granted-e.credits_used:void 0,areCreditsAvailable:n,billingPeriodEndDate:null==e?void 0:e.billing_period_end_date}}},32429:function(e,t,n){"use strict";n.d(t,{G:function(){return c},h:function(){return o}});var s=n(57437),r=n(16593),a=n(2265),i=n(51408);let l=(0,a.createContext)(null);function o(e){let{children:t,user:n}=e,{data:o,isLoading:c}=(0,r.a)(i.V.experimentalFeatures({user:n})),d=(0,a.useMemo)(()=>({features:o||null,isLoading:c}),[o,c]);return(0,s.jsx)(l.Provider,{value:d,children:t})}function c(){let e=(0,a.useContext)(l);if(!e)throw Error("LabsFeaturesContext not found");return e}},51904:function(e,t,n){"use strict";n.d(t,{Q6:function(){return d},el:function(){return c},fi:function(){return l}});var s=n(57437),r=n(57346),a=n(62380);let i=(e,t)=>{switch(e){case"read_file":case"lov-view":return t?"Read":"Reading";case"lov-rename":return t?"Renamed":"Renaming";case"lov-delete":return t?"Deleted":"Deleting";case"lov-write":case"lov-search-replace":return t?"Edited":"Editing";case"lov-add-dependency":return t?"Installed":"Installing";case"lov-remove-dependency":return t?"Uninstalled":"Uninstalling";case"lov-list-dir":return t?"Listed":"Listing";case"scrape_website":case"lov-scrape-website":return t?"Scraped":"Scraping";case"url_screenshot":case"lov-url-screenshot":return t?"Took screenshot of":"Taking screenshot of";case"supabase_read_query":case"supabase_analytics_query":case"lov-supabase-read-query":case"lov-supabase-analytics-query":return"Supabase";default:return e}},l=(e,t,n)=>{if("string"==typeof t)return"";try{switch(e){case"read_file":case"scrape_website":case"url_screenshot":return(null==t?void 0:t.arg0)||"";case"lov-view":case"lov-delete":case"lov-write":case"lov-search-replace":return(null==t?void 0:t.file_path)||"";case"lov-rename":return(null==t?void 0:t.original_file_path)&&(null==t?void 0:t.new_file_path)?"".concat(t.original_file_path," to ").concat(t.new_file_path):"";case"lov-add-dependency":case"lov-remove-dependency":return(null==t?void 0:t.package)||"";case"lov-list-dir":return(null==t?void 0:t.dir_path)||"";case"lov-scrape-website":case"lov-url-screenshot":return(null==t?void 0:t.url)||"";case"supabase_read_query":case"lov-supabase-read-query":return n?"read from database":"reading from database";case"supabase_analytics_query":case"lov-supabase-analytics-query":return n?"retrieved logs":"retrieving logs";default:return""}}catch(e){return""}},o=e=>{switch(e){case"read_file":return"notes";case"lov-view":case"lov-write":case"lov-rename":case"lov-delete":case"lov-add-dependency":case"lov-remove-dependency":case"lov-search-replace":case"lov-list-dir":return"code";case"scrape_website":case"lov-scrape-website":return"language";case"url_screenshot":case"lov-url-screenshot":return"preview";case"supabase_read_query":return"table";case"supabase_analytics_query":return"history";default:return"info"}},c=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"my-2 space-y-2 px-2",children:t})},d=e=>{let{name:t,parsedData:n,done:c=!0}=e,d=i(t,c),u=l(t,n,c),m=o(t);return(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[(0,s.jsx)("div",{className:"flex shrink-0 items-center",children:t.includes("supabase")?(0,s.jsx)(a.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}):(0,s.jsx)(r.Z,{name:m,size:"small",className:"text-muted-foreground/70"})}),(0,s.jsx)("span",{className:"text-sm font-semibold text-popover-foreground/90",children:d}),u&&(0,s.jsx)("span",{className:"flex min-h-5 items-center justify-center break-all rounded-md bg-secondary px-2 py-0.5 text-xs font-normal text-muted-foreground shadow-sm",children:u}),!c&&(0,s.jsx)(r.Z,{name:"progress_activity",size:"small",className:"ml-auto shrink-0 animate-spin text-muted-foreground"})]})}},52552:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var s=n(57437),r=n(99376),a=n(62869),i=n(82246);let l=e=>{let{size:t,projectId:n}=e,l=(0,i.Eh)(e=>e.exitConsole),o=(0,r.useRouter)();return(0,s.jsx)(a.z,{variant:"outline",type:"button",size:t,onClick:()=>{n&&o.replace("/projects/".concat(n)),l()},children:"Exit"})}},91576:function(e,t,n){"use strict";n.d(t,{Sv:function(){return I},UL:function(){return N},cb:function(){return w},eX:function(){return s},hw:function(){return y},mL:function(){return P},t6:function(){return S},v7:function(){return E}});var s,r=n(57437),a=n(2265),i=n(99478),l=n(66070),o=n(57346),c=n(90432),d=n(65666),u=n(21288),m=n(61062),p=n(72384),h=n(94508),x=n(82246),f=n(44831),v=n(32935);(s||(s={})).AI_FIX="AI Fix";let{AI_FIX:j}=s,g={[m.N.NO_CODE_CHANGE]:[j],[m.N.CODE_DIFF]:[],[m.N.FILE_EDITED_WITHOUT_PERMISSION]:[j],[m.N.EXCLUDED_FILE_EDITED]:[j],[m.N.DEPENDENCY_INSTALL]:[],[m.N.IMMEDIATE_RUNTIME]:[j],[m.N.RUNTIME]:[j],[m.N.BUILD]:[j],[m.N.HTTP_CLIENT_ERROR]:[j],[m.N.HTTP_SERVER_ERROR]:[],[m.N.SUPABASE_EDGE_FUNCTION_ERROR]:[j],[m.N.CORS_ERROR]:[],[m.N.DEPLOY_SUPABASE_FUNCTIONS]:[j],[m.N.SUPABASE_SQL_ERROR]:[j],[m.N.SEARCH_REPLACE_FAILED]:[],[m.N.SEARCH_REPLACE_MISSING_FILE]:[],[m.N.CHANGED_MISSING_FILE]:[]},b=e=>{let t=(0,c.H$)(e),n=t.length>1?e=>"# Error number ".concat(e+1,":\n#################\n\n"):()=>"";return t.map((e,t)=>"".concat(n(t)).concat(e.error_message,"\n").concat(e.meta_data?"\n"+JSON.stringify(e.meta_data,null,2):"")).join("\n\n").replace(/\x1B\[[0-9;]*[JKmsu]/g,"")},N=e=>{let{errors:t,roundedTop:n=!0}=e;return(0,r.jsx)("div",{className:n?"mt-4":"",children:(0,r.jsx)("pre",{className:(0,h.cn)("w-full rounded-b-md border border-border bg-card p-4 text-sm text-muted-foreground",n?"mt-2 rounded-t-md":""),children:(0,r.jsx)("code",{className:"block w-full overflow-x-auto overflow-y-auto whitespace-pre-wrap",children:b(t)})})})},_=e=>{let{primary:t,isPending:n,onClick:s,text:a,...l}=e,o=(0,x.Eh)(e=>e.isSendChatMessageMutationPending);return(0,r.jsx)(i.z,{variant:t?"default":"muted",className:"p-2",size:"sm",onClick:s,disabled:o,loading:n,...l,children:a})},y=e=>{let{projectId:t,errors:n}=e,{mutate:s,isPending:r}=(0,f.m)({projectId:t});return{onClick:()=>{s({body:{id:(0,v.dX)(),message:"For the code present, I get the error below.\n\nPlease think step-by-step in order to resolve it.\n```\n".concat(b(n),"\n```\n"),mode:p.S.INSTANT,contains_error:!0,error_ids:n.map(e=>e.id)},projectId:t})},isPending:r}},w={"AI Fix":e=>{let{errors:t,projectId:n,primary:s,...a}=e,{onClick:i,isPending:l}=y({projectId:n,errors:t});return(0,r.jsx)(_,{primary:s,isPending:l,onClick:i,text:"Try to fix it",hotkey:"F",showHotkey:!0,...a})}},E={[m.N.BUILD]:"Build unsuccessful",[m.N.CODE_DIFF]:"Changes couldn't be applied",[m.N.DEPLOY_SUPABASE_FUNCTIONS]:"Couldn't deploy Supabase functions",[m.N.DEPENDENCY_INSTALL]:"Couldn't install dependency",[m.N.FILE_EDITED_WITHOUT_PERMISSION]:"Tried editing file without permission",[m.N.EXCLUDED_FILE_EDITED]:"Unwanted changes",[m.N.IMMEDIATE_RUNTIME]:"Oops, it looks like our AI had a bit of a hiccup and broke the app",[m.N.NO_CODE_CHANGE]:"Changes already applied",[m.N.RUNTIME]:"The app encountered an error",[m.N.HTTP_CLIENT_ERROR]:"The app encountered an error",[m.N.HTTP_SERVER_ERROR]:"The app encountered an error",[m.N.SUPABASE_EDGE_FUNCTION_ERROR]:"The app encountered an error",[m.N.CORS_ERROR]:"The app encountered an error",[m.N.SUPABASE_SQL_ERROR]:"An error occurred while applying the migration",[m.N.SEARCH_REPLACE_FAILED]:"Failed search-replace",[m.N.SEARCH_REPLACE_MISSING_FILE]:"Search-replace on missing file",[m.N.CHANGED_MISSING_FILE]:"Tried deleting or renaming non-existent file"},C={[m.N.CODE_DIFF]:"I couldn't apply your changes because the edit strategy I chose failed.",[m.N.FILE_EDITED_WITHOUT_PERMISSION]:"I couldn't apply your changes because I tried to edit a file that I don't have permission to edit.",[m.N.EXCLUDED_FILE_EDITED]:"I couldn't apply your changes because it resulted in unwanted changes",[m.N.NO_CODE_CHANGE]:"I couldn't apply your changes because the code changes I suggested were the same as the previous code."},S={[m.N.BUILD]:!0,[m.N.CODE_DIFF]:!0,[m.N.SUPABASE_EDGE_FUNCTION_ERROR]:!0,[m.N.DEPENDENCY_INSTALL]:!0,[m.N.DEPLOY_SUPABASE_FUNCTIONS]:!0,[m.N.HTTP_CLIENT_ERROR]:!0,[m.N.HTTP_SERVER_ERROR]:!0,[m.N.CORS_ERROR]:!0,[m.N.FILE_EDITED_WITHOUT_PERMISSION]:!0,[m.N.EXCLUDED_FILE_EDITED]:!0,[m.N.IMMEDIATE_RUNTIME]:!0,[m.N.NO_CODE_CHANGE]:!0,[m.N.RUNTIME]:!0,[m.N.SUPABASE_SQL_ERROR]:!0,[m.N.SEARCH_REPLACE_FAILED]:!0,[m.N.SEARCH_REPLACE_MISSING_FILE]:!0,[m.N.CHANGED_MISSING_FILE]:!0},I=e=>{let t=Array.from(new Set(e.flatMap(e=>g[e.type])));return t.sort((e,t)=>"AI Fix"===e?-1:"AI Fix"===t?1:0),t},A=e=>{var t;let{errors:n,projectId:s}=e,i=(0,x.Eh)(e=>e.setShowConsole),d=(0,x.Eh)(e=>e.setConsoleErrorContent),u=(0,x.Eh)(e=>e.exitConsole),m=(0,x.Eh)(e=>e.setActiveMessageId),p=(0,x.Eh)(e=>e.activeMessageId),f=(0,c.qV)({projectId:s,errorIds:(null==n?void 0:n.map(e=>e.id))||[],setErrors:e=>{}}),v=(0,x.Eh)(e=>e.consoleContentType),j=null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.type,g=(0,a.useMemo)(()=>{let e=C[j];return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:e}),(0,r.jsx)("p",{children:"Please rephrase your request or provide more details."})]}):null},[j]);if(!n||!f)return null;let b=n[0].message_id||void 0,N="error"===v&&b===p;return(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,r.jsx)(l.Zb,{className:(0,h.cn)("duration-125 w-full cursor-pointer p-2 transition-colors ease-in-out","border border-muted-border bg-muted","hover:border-border hover:bg-muted-hover",{"border-border bg-muted-active":N}),onClick:()=>{N?u():(m(b),d(n),i("error"))},children:(0,r.jsx)(l.aY,{className:"p-1",children:(0,r.jsx)("div",{className:"flex w-full flex-col items-start justify-start",children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(o.Z,{name:"warning",size:"large",className:"mr-2 text-warning"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Error"}),(0,r.jsx)("p",{className:"text-sm",children:E[n[0].type]})]})]}),(0,r.jsx)(o.Z,{name:"chevron_right",size:"large",className:"text-muted-foreground"})]})})})}),g]})},P=e=>{let{errors:t}=e,n=(0,d.v)();return n?t?(0,r.jsx)(A,{errors:t,projectId:n}):null:(u.PW.error("Project ID is required, this should never happen"),null)}},77933:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var s=n(57437),r=n(33145),a=n(46214),i=n(23664),l=n(2265),o=n(15495),c=n(14438),d=n(25134),u=n(49968),m=n(95670),p=n(62869),h=n(55721),x=n(49340),f=n(36710),v=n(94023),j=e=>{let{open:t,setOpen:n,projectId:r}=e,[a]=(0,x.a)(),{userData:i}=(0,d.v)(),o=(0,v.iZ)(e=>e.project),[j,g]=(0,l.useState)(!1),b=(0,f.O)(),N=async()=>{g(!0);try{await b.post("/projects/".concat(r,"/clear-history")),c.Am.success("History Cleared",{description:"Chat history has been cleared successfully."})}catch(e){c.Am.error("Error",{description:"Failed to clear chat history. Please try again."})}finally{g(!1)}};return(0,s.jsxs)(h.h_,{open:t,onOpenChange:n,children:[(0,s.jsx)(h.$F,{asChild:!0,children:(0,s.jsx)("button",{className:"pointer-events-none absolute inset-x-0 select-none bg-transparent text-transparent"})}),(0,s.jsxs)(h.AW,{className:"z-[1001] flex min-w-[200px] max-w-[250px] flex-col gap-3 rounded-md border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h3",{className:"",children:"Advanced Settings"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Developer & debug options."})]}),(0,s.jsx)("div",{className:"flex flex-col gap-y-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Clear History"}),(0,s.jsx)(p.z,{variant:"destructive",size:"sm",onClick:N,loading:j,children:"Clear"})]})}),((null==i?void 0:i.is_admin)||!1)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{externalHref:(0,u.U1)(r),iconName:"language",title:"Firestore: Project"},"preview"),(null==o?void 0:o.user_id)&&(null==a?void 0:a.uid)!==(null==o?void 0:o.user_id)&&(0,s.jsx)(m.Z,{externalHref:(0,u.fA)(null==o?void 0:o.user_id),iconName:"language",title:"Firestore: User that created this project"},"firestore-user"),(null==a?void 0:a.uid)&&(0,s.jsx)(m.Z,{externalHref:(0,u.fA)(null==a?void 0:a.uid),iconName:"language",title:"Firestore: This user"},"firestore-current-user")]})]})]})},g=n(95475),b=n(29461),N=n(73571),_=n(57346),y=n(93022),w=n(35354),E=n(2043),C=n(51826),S=n(10207),I=n(44954),A=e=>{let{}=e,{openSettings:t}=(0,I.P7)(),[n,c,d]=(0,x.a)(),u=(0,v.iZ)(e=>e.project),p=null==u?void 0:u.visibility,f="public"===p,A="private"===p,{isMac:P}=(0,w.Z)(),{billingPeriodCreditsFormatted:R,hasBillingPeriodCredits:k,dailyCreditsFormatted:T,hasDailyCreditsLimit:O,bonusCredits:D}=(0,o.O)(),[F,z]=(0,l.useState)(!1),L=(0,i.dl)("teams"),Z=(0,S.Q)(e=>e.currentWorkspace);Z&&Z.name;let[U,H]=(0,l.useState)(!1),G=(0,E.m)(),M=(0,b.z)(g.Z);return(0,s.jsxs)("div",{className:"relative flex min-w-0 shrink",children:[(0,s.jsxs)(h.h_,{children:[(0,s.jsx)(h.$F,{asChild:!0,onPointerDown:e=>{e.altKey&&(e.preventDefault(),e.stopPropagation(),z(!0),a.ZP.capture(C.S.HEADER.SETTINGS_OPENED,{project_id:null==u?void 0:u.id}))},children:(0,s.jsxs)("button",{className:"group flex min-w-0 shrink items-center gap-2 border-none text-foreground outline-none duration-150 ease-in-out hover:opacity-80 focus:outline-none",children:[(0,s.jsx)(r.default,{alt:"",className:"shrink-0",src:"/img/lovable-logo.svg",width:"18",height:"18"}),u?(0,s.jsx)("p",{className:"hidden truncate text-sm font-medium md:block",children:null==u?void 0:u.name}):(0,s.jsx)(y.O,{className:"hidden h-3 w-[130px] md:flex"}),f&&(0,s.jsx)(_.Z,{name:"globe",size:"small",className:"hidden md:flex"}),A&&(0,s.jsx)(_.Z,{name:"lock",size:"small",className:"hidden md:flex"}),(0,s.jsx)(_.Z,{size:"small",name:"keyboard_arrow_down",className:"text-foreground/50 group-data-[state=open]:text-primary"})]})}),(0,s.jsxs)(h.AW,{className:"min-w-[200px] rounded-md border",align:"start",sideOffset:10,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 px-2.5 py-1.5",children:[(0,s.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium",children:"Monthly Credits"}),(0,s.jsx)("p",{children:R})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium",children:"Daily Limit"}),(0,s.jsx)("p",{children:T})]})]}),!k&&O&&(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium",children:"Daily Credits"}),(0,s.jsx)("p",{children:T})]}),D&&D>0&&(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium",children:"Bonus Credits"}),(0,s.jsx)("p",{children:D})]})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-3 text-xs text-muted-foreground",children:[(0,s.jsxs)("p",{className:"flex items-center gap-2 font-medium",children:[f?"Public project":"Private project",f&&(0,s.jsx)(_.Z,{name:"globe",size:"xsmall"}),A&&(0,s.jsx)(_.Z,{name:"lock",size:"xsmall"})]}),(0,s.jsx)("p",{children:f?"Anyone can view & remix":"Build and deploy in private"})]})]}),(0,s.jsx)(h.VD,{}),(0,s.jsx)(m.Z,{title:"Go to Dashboard",iconName:"dashboard",internalHref:"/"},"dashboard"),(null==G?void 0:G.edit)&&(0,s.jsx)(m.Z,{title:"Rename project",iconName:"edit_square",onClick:()=>M({childProps:{onSuccess:()=>M(!1)}})},"rename-project"),(null==G?void 0:G.edit)&&L&&(0,s.jsx)(m.Z,{title:"Move Project",iconName:"drive_file_move",onClick:()=>H(!0)},"move-project"),(null==G?void 0:G.edit)&&(0,s.jsxs)(h.Xi,{onClick:()=>t(),children:[(0,s.jsx)(_.Z,{name:"settings"}),(0,s.jsx)("p",{children:"Project Settings"}),P?(0,s.jsx)(h.KM,{className:"hidden sm:flex",children:"âŒ˜."}):(0,s.jsx)(h.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),(0,s.jsx)(h.VD,{}),n&&(0,s.jsx)(m.Z,{title:"Account Settings",iconName:"manage_accounts",internalHref:"/settings/account"},"account"),(0,s.jsx)(m.Z,{title:"Help",iconName:"support",internalHref:"/support"},"help")]})]}),u&&(0,s.jsx)(j,{open:F,setOpen:z,projectId:u.id}),L&&(0,s.jsx)(N.y,{projectId:null==u?void 0:u.id,currentWorkspaceId:null==u?void 0:u.workspace_id,open:U,setOpen:H,isRootDialog:!0})]})}},95475:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var s=n(57437),r=n(13590),a=n(2265),i=n(29501),l=n(31229),o=n(62869),c=n(19060),d=n(15681),u=n(95186),m=n(21288),p=n(94023);let h=l.z.object({newProjectName:l.z.string().min(1,"Project name is required").max(45,"Project name must be less than 45 characters").regex(/^[a-z0-9-]+$/,{message:"Project name can only contain lowercase letters, numbers, and hyphens."}).regex(/^(?!.*--).+$/,{message:"Project name cannot contain consecutive hyphens."}),renameRepository:l.z.boolean()}),x=e=>{let{project:t,onSuccess:n}=e,l=(0,i.cI)({resolver:(0,r.F)(h),defaultValues:{newProjectName:(null==t?void 0:t.name)||"",renameRepository:!0}});(0,a.useEffect)(()=>{t&&l.reset({newProjectName:t.name||"",renameRepository:!0})},[t,l]);let{renameProject:x}=(0,p.PY)(),[f,v]=(0,a.useState)(!1),j=async e=>{m.PW.info("project_rename_form_submitted",{data:e}),v(!0),await x({name:e.newProjectName,shouldRenameRepo:e.renameRepository}).then(()=>{null==n||n()}).finally(()=>v(!1))},g=!!l.formState.dirtyFields.newProjectName;return(0,s.jsx)(d.l0,{...l,children:(0,s.jsxs)("form",{onSubmit:l.handleSubmit(j),className:"flex w-full flex-col gap-4",children:[(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsx)(d.Wi,{control:l.control,name:"newProjectName",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.xJ,{children:[(0,s.jsx)(d.lX,{children:"Project Name"}),(0,s.jsx)(d.NI,{children:(0,s.jsx)(u.I,{placeholder:"Enter new project name",...t})}),(0,s.jsx)(d.zG,{})]})}}),(0,s.jsx)(d.Wi,{control:l.control,name:"renameRepository",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.xJ,{className:"flex flex-row items-start space-x-2 space-y-0",children:[(0,s.jsx)(d.NI,{children:(0,s.jsx)(c.X,{checked:t.value,onCheckedChange:t.onChange})}),(0,s.jsx)("div",{className:"space-y-1 leading-none",children:(0,s.jsx)(d.lX,{children:"Also rename repository"})})]})}})]}),(0,s.jsx)(o.z,{type:"submit",className:"ml-auto",disabled:!g||f,loading:f,children:"Save"})]})})};var f=n(26110),v=e=>{let{onSuccess:t}=e,n=(0,p.iZ)(e=>e.project);return(0,s.jsxs)(f.cZ,{children:[(0,s.jsx)(f.fK,{children:(0,s.jsx)(f.$N,{children:"Rename project"})}),(0,s.jsx)(x,{project:n,onSuccess:t})]})}},81004:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});var s=n(57437),r=n(2265),a=n(62869),i=n(82246),l=n(92039);let o=(0,r.memo)(function(e){let{activeEdit:t,size:n}=e,r=(0,i.Eh)(e=>e.exitConsole),o=(0,i.Eh)(e=>e.isSomeRevertMutationPending),{mutate:c,isPending:d}=(0,l.I)({onSuccess:r});return(0,s.jsxs)(a.z,{variant:"ghost",className:"bg-accent text-secondary-foreground",size:n,loading:d,disabled:!t||o,type:"button",onClick:()=>c({edit:t}),children:[(0,s.jsx)("span",{children:"Restore"})," ",(0,s.jsx)("span",{className:"hidden sm:flex",children:"this version"})]})});o.displayName="RestoreCommitButton"},1206:function(e,t,n){"use strict";var s=n(57437),r=n(52636),a=n(14970),i=n(2265),l=n(14438),o=n(62869),c=n(26110),d=n(57346),u=n(64040),m=n(49131),p=n(94023);t.Z=e=>{let{domain:t,showRemove:n,showIcon:h,refetchDomains:x}=e,[f,v]=(0,i.useState)(!1),[j,g]=(0,i.useState)(!1),[b,N]=(0,i.useState)(!1),_=(0,p.iZ)(e=>e.project),y=async e=>{N(!0);try{let t=(0,m.S)();await t.delete("/projects/".concat(null==_?void 0:_.id,"/domains/").concat(e)),null==x||x(),N(!1),v(!1),l.Am.success("Domain removed",{description:'Your custom domain "'.concat(e,'" was succesfully removed from the project.')})}catch(e){N(!1),(0,u.Eo)(e)}},w=()=>{g(!0),null==x||x(),setTimeout(()=>g(!1),1500)};return(0,s.jsxs)("li",{className:"mt-2 flex items-center text-sm",children:["active"!==t.status?(0,s.jsxs)("span",{className:"flex-grow truncate text-muted-foreground",title:"The domain ".concat(t.domain," is still being configured..."),onClick:()=>w(),children:[h&&(0,s.jsx)(d.Z,{name:"language",className:"mr-1 inline w-4 text-muted-foreground",size:"small"}),t.domain,(0,s.jsxs)("span",{className:"relative ml-2 inline-flex size-2",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-primary opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex size-2 rounded-full bg-primary"})]})]}):(0,s.jsxs)("span",{className:"flex-grow truncate",title:t.domain,children:[h&&(0,s.jsx)(d.Z,{name:"language",className:"mr-1 inline w-4 text-muted-foreground",size:"small"}),t.domain]}),n&&(0,s.jsxs)(c.Vq,{open:f,onOpenChange:v,children:[(0,s.jsx)(c.hg,{asChild:!0,children:(0,s.jsx)(o.z,{variant:"outline",size:"sm",type:"button",className:"mr-2 h-6 whitespace-nowrap",children:"Remove"})}),(0,s.jsxs)(c.cZ,{children:[(0,s.jsxs)(c.fK,{children:[(0,s.jsxs)(c.$N,{children:["Remove ",t.domain,"?"]}),(0,s.jsx)(c.Be,{children:"This will disconnect the domain from this project. You will need to reconfigure it if you will want to use it with this project in the future."})]}),(0,s.jsxs)(c.cN,{className:"gap-1.5",children:[(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>{v(!1)},children:"Cancel"}),(0,s.jsx)(o.z,{variant:"destructive",size:"sm",onClick:()=>{y(t.domain)},loading:b,children:"Remove"})]})]})]}),"active"!==t.status?(0,s.jsx)("span",{title:"Refresh status",className:"cursor-pointer",onClick:()=>w(),children:(0,s.jsx)(r.Z,{size:16,className:j?"animate-[spin_2s_linear_infinite_reverse]":""})}):(0,s.jsx)("a",{href:"https://".concat(t.domain),target:"_blank",title:"Open in a new tab",rel:"noopener noreferrer",children:(0,s.jsx)(a.Z,{size:16})})]})}},43310:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var s=n(57437),r=n(51817),a=n(75135),i=n(2265),l=n(62869),o=n(44895),c=n(33910),d=n(94508);let u=e=>{let{className:t}=e,{openConnectToGithubPopup:n}=(0,o.mA)(),{hasAccessToken:u,hasValidAccessToken:m,installationsQuery:p}=(0,c.D)(),[h,x]=(0,i.useState)(!1),[f,v]=(0,i.useState)(!1),[j,g]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=e=>{"githubAppInstalled"===e.data&&(g(null),x(!0)),"githubAppAuthenticated"===e.data&&(g(Date.now()),p.refetch({cancelRefetch:!1}))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[p]),(0,i.useEffect)(()=>{h&&j&&p.dataUpdatedAt>j&&x(!1)},[h,p.dataUpdatedAt,j]),(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.z,{variant:"outline",size:"sm",className:(0,d.cn)("gap-1.5",t),onClick:()=>{v(!0),n(u,m)},children:[(0,s.jsx)("span",{className:"inline-flex items-center justify-center",style:{width:"1.2em",height:"1.2em"},children:h?(0,s.jsx)(r.Z,{className:"animate-spin",size:"1.2em"}):(0,s.jsx)(a.Z,{size:"1.2em",className:"text-muted-foreground"})}),u?"Review GitHub permissions":"Set up GitHub for your account"]}),f&&!u&&!h&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Can't set up GitHub?"," ",(0,s.jsx)("span",{className:"cursor-pointer underline",onClick:()=>(0,o.yA)((0,o.Oq)()),children:"Re-authorize"})]})]})}},58672:function(e,t,n){"use strict";n.d(t,{h:function(){return E}});var s=n(57437),r=n(20653),a=n(2265),i=n(14438),l=n(62869),o=n(93022),c=n(44895),d=n(33910),u=n(36710),m=n(21288),p=n(94508),h=n(43310),x=n(94023),f=n(57346),v=n(46366),j=()=>{var e;let t=(0,v.c)(),n=(0,x.iZ)(e=>e.project);if(!t||(null==n?void 0:n.git_on_s3))return null;let r="https://github.com/".concat(null==n?void 0:null===(e=n.github_owner)||void 0===e?void 0:e.name,"/").concat(null==n?void 0:n.github_repo_name);return(0,s.jsxs)("a",{className:(0,p.cn)((0,l.d)({variant:"outline",size:"sm"}),"gap-1.5"),href:r,target:"_blank",children:[(0,s.jsx)(f.Z,{name:"arrow_outward",size:"small"}),"Admin: Open in Github"]})},g=n(75135),b=n(16831),N=n(51948);let _=e=>{let{installations:t,newTransferTarget:n,startTransfer:r}=e,{installationsQuery:i}=(0,d.D)(),[l,o]=(0,a.useState)(!1),u=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{"githubAppInstalled"===e.data&&(u.current=Date.now(),i.refetch(),o(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[i]),(0,a.useEffect)(()=>{l&&u.current&&i.dataUpdatedAt>u.current&&o(!1)},[i.dataUpdatedAt,l]),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Create in"}),t.map(e=>(0,s.jsx)("div",{className:"rounded-md border bg-background p-2 hover:bg-muted",onClick:()=>!n&&r(e.account.login),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n===e.account.login?(0,s.jsx)(f.Z,{name:"progress_activity",size:"small",className:"animate-spin"}):(0,s.jsx)(b.qE,{className:"h-4 w-4",children:(0,s.jsx)(b.F$,{src:e.account.avatar_url})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:e.account.login})]})},e.account.login)),l&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,s.jsx)(f.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Loading new account..."})]}),(0,s.jsxs)("div",{className:"-mx-2 flex select-none items-center justify-between rounded-sm p-2 hover:bg-muted",onClick:()=>{(0,c.yA)("https://github.com/apps/".concat(N.F,"/installations/new"))},children:[(0,s.jsx)(g.Z,{size:"1.2em",className:"text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:t.some(e=>"User"===e.target_type)?"Add another organization":"Add another account"}),(0,s.jsx)(f.Z,{name:"arrow_outward",size:"small",className:"text-muted-foreground"})]})]})};var y=n(4310);let w=(e,t)=>({title:"A GitHub Repository is now under your account ".concat(t),options:{description:(0,s.jsx)("a",{target:"_blank",href:(0,y.c_)(e,t),children:(0,y.c_)(e,t)})}}),E=e=>{let{projectId:t,className:n}=e,x=(0,u.O)(),[f,v]=(0,a.useState)(void 0),{installations:g,hasValidAccessToken:b,hasAccessToken:N}=(0,d.D)(),{openConnectToGithubPopup:y}=(0,c.mA)(),[E,C]=(0,a.useState)(!1),S=async e=>{if(v(e),e){var n,s,r,a;try{let s=null==g?void 0:null===(n=g.find(t=>t.account.login===e))||void 0===n?void 0:n.target_type;if(!s)throw Error("Owner type not found");let r=await x.post("/projects/".concat(t,"/github/transfer"),{new_owner:{name:e,type:s}}),{title:a,options:l}=w(r.new_repo_name,e);(0,i.Am)(a,l)}catch(e){if(401===e.status){y(N,b);return}m.PW.error("error_transfering_project",{error:e,detail:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.detail}),i.Am.error("Error",{description:null!==(a=null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.detail)&&void 0!==a?a:"Something went wrong"})}}v(void 0)};return(0,s.jsxs)("div",{className:(0,p.cn)("flex w-full flex-col items-start gap-2",n),children:[(0,s.jsx)(j,{projectId:t}),(0,s.jsx)("p",{className:"pb-2 text-sm text-muted-foreground",children:"Edit code with any editor by connecting to GitHub with 2-way sync."}),void 0===g?(0,s.jsx)(o.O,{className:"mb-4 h-7 w-full px-2 py-1"}):(0,s.jsx)(s.Fragment,{children:b&&g.length>0?E?(0,s.jsx)(_,{installations:g,newTransferTarget:f,startTransfer:S}):(0,s.jsxs)(l.z,{variant:"outline",size:"sm",className:(0,p.cn)("gap-1.5",n),onClick:()=>{C(!0)},children:[(0,s.jsx)(r.wGg,{className:"size-4 text-muted-foreground"}),"Transfer project to GitHub"]}):(0,s.jsx)(h.q,{})})]})}},78735:function(e,t,n){"use strict";function s(e,t){if(e.isLoading||!t||!e.supabaseOrganizations)return!1;if(e.noOrganizations)return!0;let n=e.supabaseOrganizations.find(e=>e.id===t.supabase_organization_id);return!n||"failed"===n.status}n.d(t,{Z:function(){return s}})},44954:function(e,t,n){"use strict";n.d(t,{rG:function(){return eK},P7:function(){return eB}});var s,r,a=n(57437),i=n(20653),l=n(20271),o=n(99376),c=n(23664),d=n(2265),u=n(54887),m=n(44481),p=n(77933),h=n(22048),x=n(16593),f=n(58912),v=n.n(f),j=n(46214),g=n(14438),b=n(25134),N=n(76678),_=n(29461),y=n(1206),w=n(6512),E=n(94508);let C={Title:e=>{let{title:t,description:n,className:s,...r}=e;return(0,a.jsxs)("div",{className:(0,E.cn)("flex flex-col",s),...r,children:[(0,a.jsx)("h2",{children:t}),n&&(0,a.jsx)("p",{className:"text-muted-foreground",children:n})]})},Item:e=>{let{label:t,description:n,children:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h3",{className:"text-base",children:t}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:n}),(0,a.jsx)("div",{className:"mt-2",children:s})]})},Entry:e=>{let{label:t,value:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1 text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:t}),"string"==typeof n?(0,a.jsx)("p",{className:"text-muted-foreground",children:n}):n]})},Separator:w.Separator};var S=n(62869),I=n(49131);let A=e=>{let t="development"===e?"185.158.133.10":"185.158.133.1";return{domain:[{type:"A",host:"@",value:t,ttl:300},{type:"A",host:"www",value:t,ttl:300}],subDomain:[{type:"A",host:"{SUBDOMAIN}",value:t,ttl:300}]}};var P=n(52274),R=n(97318);let k=e=>{let{projectId:t}=e;return(0,P.C)({queryKey:R.iZ.domains(t),queryFn:async()=>{let e=(0,I.S)();return await e.get("/projects/".concat(t,"/domains"))},refetchOnMount:!1,refetchOnWindowFocus:!1,enabled:!!t})};var T=n(74225),O=e=>{let{project:t}=e,{userData:n}=(0,b.v)(),{data:s,refetch:r}=(0,x.a)(k({projectId:t.id})),[i,l]=(0,d.useState)(null);(0,d.useEffect)(()=>{(async()=>{let e=(0,I.S)();l(await e.get("/entri/token"))})(),v().load()},[]);let o=(0,_.z)(N.g),u=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((null==n?void 0:n.plan)==="free"){o({childProps:{}});return}if((null==t?void 0:t.url)||(0,I.S)().post("/projects/".concat(null==t?void 0:t.id,"/deployments"),{}),null===i)return;let r={...i,dnsRecords:A("production"),userId:null==t?void 0:t.id,monitor:!0,sellVersion:"v3",whiteLabel:{customCopy:{initialScreen:{title:{en:"Use your domain with Lovable"}}},theme:{primary:"#000000",secondary:"#000000",onSecondary:"#FFFFFF",headerBackground:"#000000"},logo:"https://lovable.dev/apple-icon.png",sell:{partnerName:"Lovable",partnerLogo:"https://lovable.dev/img/lovable-logo-text-nav.png",partnerUrl:"https://lovable.dev",overlayScreenHeight:"75%",flowTarget:"_blank"}}};try{"buy"===e?(r.prefilledDomain=(null==t?void 0:t.name)+".com",v().purchaseDomain(r)):v().showEntri(r)}catch(t){if(!s){let t=(0,I.S)();l(await t.get("/entri/token")),u(e,!0)}}j.ZP.capture("domain_connecting_attempt",{mode:e})},m=async e=>{if(e.detail.success){let n=g.Am.success("Connecting domain...",{description:"Hold on while we were mapping ".concat(e.detail.domain," to your project.")});try{let n=(0,I.S)();await n.post("/projects/".concat(null==t?void 0:t.id,"/domains"),{domain:e.detail.domain}),r(),g.Am.success("Domain connected!",{description:"The domain ".concat(e.detail.domain," is now mapped to your project. It might take a few minutes to propagate.")}),j.ZP.capture("domain_connected",{mode:"purchase"===e.detail.setupType?"buy":"connect"})}catch(e){g.Am.info("Domain not connected",{description:"There was an error while connecting your domain. Please try again."}),h.Tb(e)}g.Am.dismiss(n)}};(0,d.useEffect)(()=>(window.addEventListener("onEntriClose",m,!1),()=>{window.removeEventListener("onEntriClose",m)}),[]);let p=(0,c.dl)("custom_domains_buy")||!1;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(C.Title,{title:"Domains",description:"Manage the domains connected to your project."}),(0,a.jsxs)("ul",{children:[(null==t?void 0:t.url)?(0,a.jsx)(y.Z,{showRemove:!1,showIcon:!1,domain:{domain:(0,T.P)(null==t?void 0:t.url),status:"active"}}):(0,a.jsx)("li",{className:"flex items-center",children:(0,a.jsxs)("span",{className:"flex-grow text-sm text-muted-foreground",title:"You have to publish your project for this domain to work",children:[null==t?void 0:t.name,".lovable.app"]})}),null==s?void 0:s.map((e,t)=>(0,a.jsx)(y.Z,{domain:e,showRemove:!0,showIcon:!1,refetchDomains:r},t))]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)(S.z,{variant:"outline",size:"sm",type:"button",onClick:()=>u("connect"),className:"whitespace-nowrap",children:s&&0===s.length?"Add a domain you own":"Add another domain"}),p&&(0,a.jsx)(S.z,{variant:"outline",size:"sm",type:"button",onClick:()=>u("buy"),className:"whitespace-nowrap",children:"Buy a domain"})]})]})},D=n(13781),F=n(40875),z=n(32429),L=n(51777),Z=n(29827),U=n(21770),H=n(39484),G=n(57346),M=n(95186),W=n(36710),V=n(94023);function q(e){let{projectId:t,onClose:n}=e,[s,r]=(0,d.useState)(""),i=(0,W.O)(),l=(0,Z.NL)(),o=(0,V.iZ)(e=>{var t;return(null===(t=e.project)||void 0===t?void 0:t.main_branch)||"main"}),c=(0,U.D)({mutationFn:async e=>{await i.post("/projects/".concat(t,"/branches/switch"),{branch_name:e,base_branch:o})},onSuccess:(e,s)=>{l.invalidateQueries({queryKey:R.iZ.branches(t)}),g.Am.success("Lovable is now using branch: ".concat(s)),r(""),n(),m&&m.length>=1e3&&g.Am.warning("Warning: You have a lot of branches. We have a limit (~1000) on how many we show here.")},onError:e=>{g.Am.error("Failed to switch branch. Please try again.")}}),u=e=>c.mutate(e),{data:m,isPending:p,error:h}=(0,x.a)({queryKey:R.iZ.branches(t),queryFn:async()=>i.get("/projects/".concat(t,"/branches"))}),f=(null==m?void 0:m.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())))||[],v=[...f.filter(e=>e.name===o),...f.filter(e=>e.name!==o)];return(0,a.jsxs)("div",{className:"relative flex flex-col gap-3 p-4",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)("h4",{children:"Switch or create branch"}),(0,a.jsx)(L.xp,{className:"absolute right-2 top-2",asChild:!0,children:(0,a.jsx)(S.z,{variant:"ghost",size:"icon-sm",children:(0,a.jsx)(G.Z,{name:"close",size:"small"})})})]}),(0,a.jsx)("div",{children:p?(0,a.jsx)(H.T,{className:"pb-4",text:"Loading branches from GitHub..."}):h?(0,a.jsx)("div",{className:"pb-4 text-destructive",children:"Error loading branches from GitHub"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(M.I,{type:"text",placeholder:"Find or create a branch...",value:s,onChange:e=>r(e.target.value)})}),(0,a.jsxs)("div",{className:"branches-list flex max-h-[40vh] flex-col gap-2 overflow-y-auto pt-2",children:[v.map(e=>(0,a.jsxs)(S.z,{className:"branch-item flex w-full items-center justify-between px-3 text-left",onClick:()=>u(e.name),variant:e.name===o?"default":"ghost",disabled:c.isPending||e.name===o,loading:c.isPending&&c.variables===e.name,children:[(0,a.jsx)("span",{children:c.isPending&&c.variables===e.name?"Switching to "+e.name:e.name}),e.name===o&&(0,a.jsx)(G.Z,{name:"check"})]},e.name)),s&&!f.some(e=>e.name===s)&&(0,a.jsxs)(S.z,{className:(0,E.cn)("h-auto w-full items-center justify-start py-1.5"),onClick:()=>u(s),variant:"outline",disabled:c.isPending,loading:c.isPending,children:[(0,a.jsx)(G.Z,{name:"add"}),(0,a.jsxs)("p",{className:"text-wrap text-left",children:["Create branch ",(0,a.jsx)("strong",{children:s})," from"," ",(0,a.jsx)("strong",{children:o})]})]})]})]})})]})}var B=n(58672),K=n(4310),Y=n(38190),X=n(35974),J=n(66070),Q=n(57054),$=n(49340),ee=n(82246),et=e=>{var t,n,s,r;let{project:l}=e,o=(0,ee.Eh)(e=>e.userProjectPermissions),[c,u]=(0,d.useState)(!1),m=null==l?void 0:l.id,p=(0,$.e)(),{features:h}=(0,z.G)(),x=((null==h?void 0:h.git_branch_switching)||!!(null==l?void 0:l.main_branch))&&(null==l?void 0:null===(t=l.github_owner)||void 0===t?void 0:t.name)!==K.aR;return(0,a.jsxs)("div",{children:[(0,a.jsx)(C.Title,{title:"GitHub",description:"Manage your connection to GitHub.",className:"mb-4"}),o.admin&&(l.is_github||l.git_on_s3?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.Ol,{children:[(0,a.jsxs)(J.ll,{className:"flex items-center",children:["GitHub",(null==l?void 0:null===(n=l.github_owner)||void 0===n?void 0:n.name)!==K.aR&&(0,a.jsxs)(X.C,{variant:"outline",className:"ml-auto flex h-6 items-center gap-2",hidden:(null==l?void 0:null===(s=l.github_owner)||void 0===s?void 0:s.name)===K.aR,children:[(0,a.jsx)("span",{className:"h-2 w-2 rounded-full bg-success"}),"Connected"]})]}),x&&(0,a.jsxs)(J.SZ,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"mb-4",children:["Lovable will make commits and watch for changes on the"," ",(0,a.jsx)("b",{children:(null==l?void 0:l.main_branch)||"main"})," branch."]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(Q.J2,{open:c,onOpenChange:u,children:[(0,a.jsx)(Q.xo,{children:(0,a.jsxs)(S.z,{variant:"outline",size:"sm",className:"items-center gap-2 px-3",children:[(0,a.jsx)(D.Z,{className:"h-4 w-4"}),(null==l?void 0:l.main_branch)||"main",(0,a.jsx)(F.Z,{className:"h-4 w-4"})]})}),(0,a.jsx)(Q.yk,{className:"p-0",align:"start",children:(0,a.jsx)(q,{projectId:m,onClose:()=>u(!1)})})]}),(0,a.jsx)(Y.c,{})]})]})]}),(0,a.jsx)(J.aY,{className:"flex justify-start",children:(null==l?void 0:null===(r=l.github_owner)||void 0===r?void 0:r.name)!==K.aR?(0,a.jsxs)("div",{className:"mt-1 flex flex-col gap-4",children:[(0,a.jsxs)("a",{href:(0,K.c_)(l.github_repo_name,l.github_owner.name),className:(0,E.cn)((0,S.d)({variant:"link",size:"sm"}),"flex items-center gap-2 whitespace-normal break-all px-0 font-medium"),target:"_blank",children:[(0,a.jsx)(i.wGg,{className:"shrink-0"}),(0,K.c_)(l.github_repo_name,l.github_owner.name)]}),x&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("b",{children:"Note:"})," Any changes made to the Supabase Project are shared across all branches."]})]}):(0,a.jsx)(B.h,{projectId:l.id,projectName:l.github_repo_name})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.Ol,{children:[(0,a.jsx)(J.ll,{children:"Git Guide"}),(0,a.jsx)(J.SZ,{children:'Access the Git repository for your project. You can use this to edit code locally, and sync with the AI Editor."'})]}),(0,a.jsx)(J.aY,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("ol",{className:"list-inside list-decimal",children:[(0,a.jsxs)("li",{children:["Clone the repository:",(0,a.jsxs)("pre",{className:"my-2 rounded-md bg-secondary p-2",children:["git clone ",l.name&&(0,K.c_)(l.name)]})]}),(0,a.jsxs)("li",{children:["Use ",(0,a.jsx)(X.C,{variant:"outline",children:p})," as username and a personal access token as password when prompted for credentials.",(0,a.jsx)("p",{className:"ml-5 text-sm text-muted-foreground",children:"Note: If the repository is public, you will first be prompted for credentials when pushing."})]})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Profit! Make changes to the code, and push them to the repository. The AI Editor will automatically update with your changes."})]})})]}))]})},en=n(76818),es=n(65666),er=n(51826),ea=()=>{let e=(0,es.D)(),[t,n]=(0,d.useState)(""),s=(0,W.O)(),r=(0,V.iZ)(e=>e.project);(0,d.useEffect)(()=>{(null==r?void 0:r.custom_instructions)&&n(r.custom_instructions)},[r]);let i=async()=>{try{await s.put("/projects/".concat(e,"/custom_instructions"),{custom_instructions:t}),j.ZP.capture(er.S.KNOWLEDGE.SAVED),g.Am.success("Custom instructions updated",{description:"Your custom instructions have been saved successfully."})}catch(e){g.Am.error("Error",{description:"Failed to update custom instructions. Please try again."})}};return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"mb-2 flex flex-col gap-2",children:[(0,a.jsx)(C.Title,{title:"Knowledge",description:"Add custom context and instructions for your project. Lovable will use it in every edit. Use it to:"}),(0,a.jsxs)("ul",{className:"list-disc pl-6 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"Define project-specific rules or guidelines"}),(0,a.jsx)("li",{children:"Set coding style preferences (e.g., indentation, naming conventions)"}),(0,a.jsx)("li",{children:"Include external documentation or style guides"})]})]}),(0,a.jsx)(en.g,{value:t,onChange:e=>n(e.target.value),placeholder:"Enter your custom instructions and context here...",className:"resize-none",rows:16}),(0,a.jsx)("div",{className:"flex flex-wrap justify-end gap-2",children:(0,a.jsx)(S.z,{onClick:i,children:"Save"})})]})},ei=n(28538),el=n(27648),eo=n(95475),ec=n(73571),ed=n(1828),eu=n(55630);function em(e){let{workspaceId:t}=e,{workspaces:n,isLoading:s}=(0,eu._)();if(!t)return(0,a.jsx)("span",{className:"text-muted-foreground",children:"No workspace"});if(s)return(0,a.jsx)("span",{className:"text-muted-foreground",children:"Loading workspace..."});let r=[...n.owned,...n.joined,...n.invited].find(e=>e.id===t);return r?(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(el.default,{href:"/@".concat(r.name),className:"hover:underline",children:(0,a.jsxs)("span",{className:"font-medium",children:["@",r.name]})})}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Workspace not found"})}var ep=n(2124);let eh=e=>{let{username:t}=e;return(0,a.jsxs)("span",{className:"text-xs leading-normal text-muted-foreground",children:["Anyone can view and remix from"," ",(0,a.jsx)(el.default,{className:"underline",href:t?"/@".concat(t):"/settings",target:"_blank",children:"your profile"}),"."]})},ex=e=>{let{className:t}=e,{userData:n}=(0,b.v)(),s=(0,V.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.visibility}),[r,i]=(0,d.useState)(void 0),{setVisibility:l}=(0,V.PY)();return(0,d.useEffect)(()=>{s&&i(s)},[s]),(0,a.jsx)(ep.F,{className:(0,E.cn)("flex flex-col gap-3",t),visibility:r||s||void 0,setVisibility:e=>{i(e),l(e)},customPublicDescription:(0,a.jsx)(eh,{username:null==n?void 0:n.username})})};var ef=n(26815),ev=n(74991);let ej=()=>{let{userData:e}=(0,b.v)(),t=e&&"free"!==e.plan,{setBadgeVisibility:n,badgeVisibility:s}=(0,V.PY)(),[r,i]=(0,d.useState)(null==s?void 0:s.hide_badge);return(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)(ev.E,{value:r?"hide":"show",onValueChange:e=>{n("hide"===e),i("hide"===e)},disabled:!t,children:[(0,a.jsxs)("div",{className:"flex w-full cursor-pointer items-center space-x-2",children:[(0,a.jsx)(ev.m,{value:"hide",id:"hide-badge"}),(0,a.jsx)(ef._,{htmlFor:"hide-badge",className:"cursor-pointer",children:"Hide badge"})]}),(0,a.jsxs)("div",{className:"flex w-full cursor-pointer items-center space-x-2",children:[(0,a.jsx)(ev.m,{value:"show",id:"show-badge"}),(0,a.jsx)(ef._,{htmlFor:"show-badge",className:"cursor-pointer",children:"Show badge"})]})]})})};var eg=n(26110),eb=n(30068);let eN=e=>{var t,n,s,r,i;let{project:l}=e,[o,c]=(0,d.useState)(!1),[u,m]=(0,d.useState)(null),{deleteProject:p}=(0,V.PY)(),h=(0,V.iZ)(e=>e.isDeleting);return(0,a.jsxs)(eg.Vq,{open:o,onOpenChange:c,children:[(0,a.jsx)(eg.hg,{asChild:!0,children:(0,a.jsx)(S.z,{variant:"destructive",className:"w-auto self-start",children:"Delete this project"})}),(0,a.jsxs)(eg.cZ,{children:[(0,a.jsxs)(eg.fK,{children:[(0,a.jsxs)(eg.$N,{children:["Delete ",l.name,"?"]}),(0,a.jsxs)(eg.Be,{children:["This action cannot be undone. This will permanently delete your project. Including:",(0,a.jsxs)("ul",{className:"my-2 list-disc pl-5",children:[(0,a.jsx)("li",{children:"Any deployments made with Lovable"}),(0,a.jsx)("li",{children:"All preview links"}),(null==l?void 0:null===(t=l.github_owner)||void 0===t?void 0:t.name)&&!(0,eb.a)(l.github_owner.name)&&(0,a.jsx)("li",{children:"All generated code"})]}),(null==l?void 0:null===(n=l.github_owner)||void 0===n?void 0:n.name)&&(0,eb.a)(l.github_owner.name)&&(0,a.jsxs)("p",{className:"mt-2",children:["Note: The Github repository"," ",(0,a.jsx)("a",{href:null!==(i=(0,K.c_)(l.github_repo_name,null==l?void 0:null===(s=l.github_owner)||void 0===s?void 0:s.name))&&void 0!==i?i:"#",target:"_blank",rel:"noreferrer",className:"text-accent hover:underline",children:(0,a.jsxs)("b",{children:[null==l?void 0:null===(r=l.github_owner)||void 0===r?void 0:r.name,"/",null==l?void 0:l.github_repo_name]})})," ","will not be deleted."]})]})]}),(0,a.jsxs)(eg.cN,{className:"gap-1.5",children:[(0,a.jsx)(S.z,{variant:"outline",size:"sm",onClick:()=>{c(!1),m(null)},children:"Cancel"}),(0,a.jsx)(S.z,{variant:"destructive",size:"sm",onClick:p,loading:h,children:"Delete"})]}),u&&(0,a.jsx)("p",{className:"text-destructive",children:u})]})]})};var e_=n(21288);let ey=e=>{let{projectId:t,initialFeatured:n}=e,[s,r]=d.useState(n),i=(0,W.O)(),l=async e=>{try{await i.put("/projects/".concat(t,"/featured"),{featured:e}),r(e),(0,g.Am)("Featured status updated",{description:"Project is now ".concat(e?"featured":"not featured",".")})}catch(e){e_.PW.error("error_updating_featured_status",{error:e}),g.Am.error("Error",{description:"Failed to update featured status. Please try again."})}};return(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(ev.E,{value:s?"featured":"not-featured",onValueChange:e=>{"featured"===e?l(!0):"not-featured"===e&&l(!1)},children:[(0,a.jsxs)("div",{className:"flex w-full cursor-pointer items-center space-x-2",children:[(0,a.jsx)(ev.m,{value:"featured",id:"featured-badge"}),(0,a.jsx)(ef._,{htmlFor:"featured-badge",className:"cursor-pointer",children:"Featured"})]}),(0,a.jsxs)("div",{className:"flex w-full cursor-pointer items-center space-x-2",children:[(0,a.jsx)(ev.m,{value:"not-featured",id:"not-featured-badge"}),(0,a.jsx)(ef._,{htmlFor:"not-featured-badge",className:"cursor-pointer",children:"Not featured"})]})]})})},ew=e=>(null==e?void 0:e.seconds)?(0,ei.WU)(new Date(1e3*e.seconds),"yyyy-MM-dd HH:mm:ss"):void 0;var eE=e=>{var t,n,s;let{projectId:r}=e,i=(0,ee.Eh)(e=>e.userProjectPermissions),l=(0,c.dl)("teams"),o=(0,c.dl)("templates")||!1,u=(0,V.iZ)(e=>e.project),m=i.admin,[p,h]=(0,d.useState)(),{userData:x}=(0,b.v)();(0,d.useEffect)(()=>{p&&p===(null==u?void 0:u.visibility)&&h(void 0)},[p,null==u?void 0:u.visibility]);let f=!!(null==u?void 0:u.is_supabase_enabled)||!!(null==u?void 0:u.supabase_project_config),v=(0,ee.Eh)(e=>e.setIsRemixDialogOpen),j=i.edit||!f,{updateProject:g}=(0,V.PY)(),N=(0,_.z)(eo.Z);return(0,a.jsxs)("div",{className:"flex w-full flex-col gap-6 pb-8",children:[(0,a.jsx)(C.Title,{title:"Settings",description:"Configure your project."}),(0,a.jsx)(C.Entry,{label:"Project name",value:null==u?void 0:u.name}),(0,a.jsx)(C.Entry,{label:"Owner",value:(null==u?void 0:u.created_by)&&(0,a.jsxs)(el.default,{className:"text-sm text-muted-foreground underline",target:"_blank",href:"/@".concat(u.created_by),children:["@",u.created_by]})}),(0,a.jsx)(C.Entry,{label:"Created at",value:ew(null==u?void 0:u.created_at)}),(0,a.jsx)(C.Entry,{label:"Tech stack",value:null==u?void 0:null===(t=u.creation_options)||void 0===t?void 0:t.tech_stack}),(0,a.jsx)(C.Entry,{label:"Messages count",value:(null==u?void 0:null===(n=u.user_message_count)||void 0===n?void 0:n.toString())||"0"}),(0,a.jsx)(C.Entry,{label:"AI Edits count",value:(null==u?void 0:null===(s=u.edit_count)||void 0===s?void 0:s.toString())||"0"}),(0,a.jsx)(C.Separator,{}),m&&(0,a.jsx)(C.Item,{label:"Visibility",description:"Control who can view your project.",children:(0,a.jsx)(ex,{})}),(0,a.jsxs)(C.Item,{label:"Lovable Badge",description:"Control the visibility of the â€˜Edit with Lovableâ€™ badge on your deployed project.",children:[(0,a.jsx)(ej,{}),(null==x?void 0:x.plan)==="free"&&(0,a.jsx)("p",{className:"mt-3 text-xs text-muted-foreground",children:"This option is only available for paid users."})]}),u&&(null==x?void 0:x.is_admin)&&(0,a.jsx)(C.Item,{label:"Featured Project (Admin only)",description:"Control whether this project is featured in the homepage.",children:(0,a.jsx)(ey,{projectId:r,initialFeatured:u.featured||!1})}),u&&i.edit&&(0,a.jsx)(S.z,{className:"self-start",onClick:()=>N({childProps:{onSuccess:()=>N(!1)}}),children:"Rename project"}),u&&(0,a.jsxs)(S.z,{onClick:()=>v(!0),className:"self-start",disabled:!j,children:["Remix this project",!j&&(0,a.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Unavailable for Supabase projects)"})]}),u&&i.admin&&(0,a.jsx)(eN,{project:u}),(0,a.jsx)(C.Separator,{}),l&&(0,a.jsx)(C.Item,{label:"Workspace",description:"Select a workspace to move this project to.",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(null==u?void 0:u.workspace_id)&&(0,a.jsx)(em,{workspaceId:null==u?void 0:u.workspace_id}),(0,a.jsx)(ec.y,{projectId:r,currentWorkspaceId:null==u?void 0:u.workspace_id})]})}),o&&(0,a.jsx)(C.Item,{label:"Template",description:"Make this project a template.",children:(0,a.jsx)(ed.r,{checked:(null==u?void 0:u.is_template)||!1,onCheckedChange:()=>{g({is_template:!(null==u?void 0:u.is_template)})}})})]})},eC=n(44831),eS=n(32935),eI=n(72384);(s=r||(r={})).ACTIVE_HEALTHY="ACTIVE_HEALTHY",s.ACTIVE_UNHEALTHY="ACTIVE_UNHEALTHY",s.COMING_UP="COMING_UP",s.GOING_DOWN="GOING_DOWN",s.INACTIVE="INACTIVE",s.INIT_FAILED="INIT_FAILED",s.REMOVED="REMOVED",s.RESTARTING="RESTARTING",s.UNKNOWN="UNKNOWN",s.UPGRADING="UPGRADING",s.PAUSING="PAUSING",s.RESTORING="RESTORING",s.RESTORE_FAILED="RESTORE_FAILED",s.PAUSE_FAILED="PAUSE_FAILED";var eA=n(62380),eP=e=>{let{selectedSupabaseProject:t,setSelectedSupabaseProject:n}=e,s=(0,es.D)(),i=(0,ee.Eh)(e=>e.isSendChatMessageMutationPending),l=(null==t?void 0:t.status)===r.ACTIVE_HEALTHY,{mutateAsync:o,isPending:c}=(0,eC.m)({projectId:s,onSuccess:()=>{g.Am.success("Supabase connected",{description:"Follow the instructions in the chat to complete the integration."})}}),d=async()=>{if(e_.PW.info("handleProjectSelect"),t){e_.PW.info("Selected Supabase project: ".concat(t.id)),e_.PW.info("Starting connection mutation");try{await o({body:{id:(0,eS.dX)(),message:"Please connect my supabase project `".concat(t.name,"`"),mode:eI.S.INSTANT,contains_error:!1,integrate_supabase_project_id:t.id,integrate_supabase_org_id:t.organization_id},projectId:s},{})}catch(e){e_.PW.error(e),g.Am.error("Error",{description:"There was an error connecting to Supabase."})}}};return(0,a.jsx)("div",{className:"flex w-full flex-col gap-4 rounded-md bg-muted p-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("p",{className:"mb-1 text-lg font-medium",children:"Connect this Lovable project to Supabase"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Supabase project"}),(0,a.jsxs)("div",{className:"flex h-8 items-center gap-2 text-sm",children:[(0,a.jsx)(eA.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,a.jsx)("span",{children:t.name})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(S.z,{asChild:!0,variant:"muted",size:"sm",children:(0,a.jsx)("a",{href:"https://supabase.com/dashboard/project/".concat(t.id),target:"_blank",rel:"noopener noreferrer",className:(0,E.cn)("flex cursor-pointer items-center gap-2"),children:"Supabase Dashboard"})}),(0,a.jsx)(S.z,{asChild:!0,variant:"muted",size:"sm",children:(0,a.jsx)("a",{href:"https://supabase.com/dashboard/project/".concat(t.id,"/database/schemas"),target:"_blank",rel:"noopener noreferrer",className:(0,E.cn)("flex cursor-pointer items-center gap-2"),children:"View Tables"})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsx)("p",{className:"max-w-[40ch] text-sm text-muted-foreground",children:"We won't make any changes at this step, and you can always disconnect."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(S.z,{variant:"ghost",onClick:()=>n(null),children:"Cancel"}),(0,a.jsx)(S.z,{onClick:d,loading:c,disabled:i||!l,children:"Connect"})]})]})]})})},eR=n(81103);let ek=e=>e.status===r.ACTIVE_HEALTHY;var eT=e=>{let{projects:t,setSelectedSupabaseProject:n}=e,s=[...t].sort((e,t)=>ek(e)&&!ek(t)?-1:ek(t)&&!ek(e)?1:0);return(0,a.jsx)("div",{className:"flex flex-col gap-2 py-1",children:s.map(e=>(0,a.jsx)(eO,{project:e,setSelectedSupabaseProject:n},e.id))})};let eO=e=>{let{project:t,setSelectedSupabaseProject:n}=e;return(0,a.jsxs)("div",{className:"flex h-8 items-center gap-2 text-sm",children:[(0,a.jsx)(eA.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,a.jsx)("span",{children:t.name}),ek(t)?(0,a.jsx)(S.z,{variant:"muted",size:"sm",className:"ml-auto",onClick:()=>n(t),children:"Connect"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eR.u,{delayDuration:50,children:[(0,a.jsx)(eR.aJ,{asChild:!0,children:(0,a.jsxs)(S.z,{variant:"muted",size:"sm",className:"!pointer-events-auto ml-auto hover:bg-background",disabled:!0,children:["Connect",(0,a.jsx)(G.Z,{name:"warning",size:"small",className:"text-warning"})]})}),(0,a.jsx)(eR._v,{children:"Check project status in Supabase."})]})})]})};var eD=n(6596),eF=e=>{let{supabaseOrganizations:t,handleConnect:n,isConnecting:s}=e,[r,i]=(0,d.useState)(null),l=null!==r,o=null==t?void 0:t.some(e=>"connected"===e.status);return(0,a.jsx)(a.Fragment,{children:l?(0,a.jsx)(eP,{selectedSupabaseProject:r,setSelectedSupabaseProject:i}):(0,a.jsxs)(eD.UQ,{type:"multiple",defaultValue:t?o?[t[0].id]:["NewOrganization",t[0].id]:[],className:"flex flex-col gap-4",children:[(0,a.jsxs)(eD.Qd,{value:"NewOrganization",className:"rounded-md border-none bg-muted p-4",children:[(0,a.jsx)(eD.o4,{className:"py-0 text-lg font-medium",children:"Add another organization"}),(0,a.jsx)(eD.vF,{className:"pb-2",children:(0,a.jsxs)(S.z,{className:"mt-4 text-sm",disabled:s,onClick:n,children:[(0,a.jsx)(eA.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),"Connect Supabase"]})})]},"NewOrganization"),null==t?void 0:t.map(e=>"connected"===e.status?(0,a.jsxs)(eD.Qd,{value:e.id,className:"rounded-md border-none bg-muted p-4",children:[(0,a.jsx)(eD.o4,{className:"py-0 text-lg font-medium",children:e.name}),(0,a.jsxs)(eD.vF,{className:"flex flex-col gap-2 pb-0 pt-4",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Projects"}),(0,a.jsxs)("a",{href:"https://supabase.com/dashboard/new/".concat(e.id),target:"_blank",className:"duration-125 flex items-center gap-1 self-start text-sm font-medium transition-colors ease-in-out hover:text-muted-foreground",children:[(0,a.jsx)("span",{children:"Create new project"}),(0,a.jsx)(G.Z,{name:"arrow_outward",size:"small"})]})]}),(0,a.jsx)(eT,{projects:e.projects,setSelectedSupabaseProject:i})]})]},e.id):(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:e.name}),(0,a.jsxs)(S.z,{variant:"destructive",onClick:n,disabled:s,size:"sm",children:[(0,a.jsx)(G.Z,{name:"refresh",size:"small"}),"Reconnect"]})]})),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(G.Z,{name:"info",size:"small"}),(0,a.jsx)("p",{className:"text-sm",children:"Please connect to a project to get started"})]})]})})},ez=n(78844),eL=n(72253),eZ=e=>{let{projectId:t}=e,{supabaseOrganizations:n,isLoading:s,noOrganizations:r}=(0,eL.S)(),{handleConnect:i,isConnecting:l}=(0,ez.h)(t),o=!r;return(0,a.jsx)("div",{children:s?(0,a.jsx)(H.T,{text:"Loading Supabase..."}):(0,a.jsxs)(a.Fragment,{children:[!o&&(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("p",{className:"mb-1 text-base font-medium",children:"Connect Supabase Account"}),(0,a.jsx)(eU,{}),(0,a.jsxs)(S.z,{className:"mt-3 text-sm",disabled:l,onClick:i,children:[(0,a.jsx)(eA.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),"Connect Supabase"]})]}),o&&(0,a.jsx)(eF,{supabaseOrganizations:n,handleConnect:i,isConnecting:l})]})})};let eU=()=>(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Connect to add authentication, store data, or call third party APIs."," ",(0,a.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer noopener",className:"underline",children:"Docs"}),"."]}),eH=e=>{let{projectId:t}=e,[n,s]=(0,d.useState)(!1),r=()=>s(!1),i=(0,W.O)(),l=(0,U.D)({mutationFn:()=>i.post("/projects/".concat(t,"/supabase/disconnect")),onSuccess:()=>{(0,g.Am)("Supabase disconnected",{description:"You can connect to a new Supabase project later."}),r()},onError:e=>{g.Am.error("Error",{description:e.message})}});return(0,a.jsxs)(eg.Vq,{open:n,onOpenChange:s,children:[(0,a.jsx)(eg.hg,{asChild:!0,children:(0,a.jsx)(S.z,{variant:"destructive",className:"self-start",children:"Disconnect"})}),(0,a.jsxs)(eg.cZ,{children:[(0,a.jsxs)(eg.fK,{children:[(0,a.jsx)(eg.$N,{children:"Disconnect Supabase"}),(0,a.jsx)(eg.Be,{children:"Are you sure you want to disconnect Supabase? We will stop deploying edge functions and reading your database schema, but no changes will be made to your code. You can reconnect to Supabase later."})]}),(0,a.jsxs)(eg.cN,{children:[(0,a.jsx)(S.z,{variant:"outline",onClick:r,children:"Cancel"}),(0,a.jsx)(S.z,{variant:"destructive",onClick:()=>{l.mutate()},loading:l.isPending,children:"Disconnect"})]})]})]})};var eG=e=>{let{connectedSupabaseProject:t,projectId:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"Setup"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 rounded-md bg-muted p-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-base font-medium",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"The Supabase project connected to you workspace."})]}),(0,a.jsxs)("div",{className:"flex min-h-8 items-center gap-2 rounded-md bg-muted-active px-3 py-0.5 text-sm font-medium text-primary",children:[(0,a.jsx)("div",{className:"size-2 shrink-0 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"Connected"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)(eM,{href:"https://supabase.com/dashboard/project/".concat(t.id),label:"Dashboard"}),(0,a.jsx)(eM,{href:"https://supabase.com/dashboard/project/".concat(t.id,"/auth/users"),label:"Manage Users"}),(0,a.jsx)(eM,{href:"https://supabase.com/dashboard/project/".concat(t.id,"/editor"),label:"SQL Editor"}),(0,a.jsx)(eM,{href:"https://supabase.com/dashboard/project/".concat(t.id,"/functions"),label:"Edge Functions"}),(0,a.jsx)(eM,{href:"https://supabase.com/dashboard/project/".concat(t.id,"/settings/functions"),label:"Manage Secrets"})]}),(0,a.jsx)(w.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(eH,{projectId:n}),(0,a.jsxs)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",className:"duration-125 flex items-center gap-1 text-sm transition-colors ease-in-out hover:text-muted-foreground",children:[(0,a.jsx)("span",{children:"Supabase docs"}),(0,a.jsx)(G.Z,{name:"arrow_outward",size:"small"})]})]})]})]})};let eM=e=>{let{href:t,label:n}=e;return(0,a.jsx)(S.z,{asChild:!0,size:"sm",variant:"secondary",children:(0,a.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"min-w-[200px] justify-between",children:[n,(0,a.jsx)(G.Z,{name:"arrow_outward",size:"small"})]})})};var eW=n(78735),eV=e=>{var t;let{project:n}=e,s=(0,Z.NL)(),r=null==n?void 0:n.supabase_project_config,i=!!(null==n?void 0:n.is_supabase_enabled),l=(0,eL.S)(),o=(0,eW.Z)(l,r),c=null==n?void 0:n.creation_options.tech_stack;(0,d.useEffect)(()=>{let e=async e=>{e.origin===window.location.origin&&"supabaseAuth"===e.data.type&&(e.data.success?(g.Am.success("Connection Successful",{description:"Your Supabase organization has been linked to your account. Select a project to finish the setup."}),await s.invalidateQueries({queryKey:R.iZ.supabaseOrganizations(n.id)})):g.Am.error("Connection Failed",{description:e.data.error||"Failed to connect to Supabase. Please try again."}))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,null==n?void 0:n.id]);let u=(null==r?void 0:r.supabase_project_id)&&!o,m=null===(t=l.supabaseOrganizations)||void 0===t?void 0:t.flatMap(e=>e.projects||[]),p=null==m?void 0:m.find(e=>e.id===(null==r?void 0:r.supabase_project_id));return(0,a.jsxs)("div",{className:"flex flex-col gap-8 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex h-12 items-center justify-center rounded-md bg-[#1C1C1C] px-3 dark:bg-foreground",children:(0,a.jsx)(eA.Z,{className:"h-6 w-auto",viewBox:"0 0 109 113"})}),(0,a.jsx)(C.Title,{title:"Supabase",description:"View and manage your Supabase integration settings."})]}),i||c&&"vite_react_shadcn_ts"!==c?(0,a.jsx)("div",{className:"text-sm",children:"Unfortunately, your project is not able to use Supabase."}):u&&p?(0,a.jsx)(eG,{connectedSupabaseProject:p,projectId:null==n?void 0:n.id}):(0,a.jsx)(eZ,{projectId:null==n?void 0:n.id})]})},eq=n(2043);let eB=()=>{let e=(0,o.useRouter)(),t=(0,o.usePathname)(),n=(0,o.useSearchParams)();return{activeTab:n.get("settings"),openSettings:(0,d.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"settings",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new URLSearchParams(n);a.set("settings",s);let i="".concat(t,"?").concat(a.toString());r?e.replace(i):e.push(i)},[t,e,n]),closeSettings:(0,d.useCallback)(()=>{let s=new URLSearchParams(n);s.delete("settings"),e.push("".concat(t,"?").concat(s.toString()))},[t,e,n])}};function eK(){let e=(0,eq.m)(),{activeTab:t,openSettings:n,closeSettings:s}=eB(),r=null!==t;(0,m.y1)("mod+.",()=>{!r&&(null==e?void 0:e.edit)?(document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape"})),n()):s()}),(0,m.y1)("esc",e=>{r&&"Escape"===e.key&&s()});let o=(0,V.iZ)(e=>e.project),d=(0,c.dl)("custom_domains")||!1;return r&&(null==e?void 0:e.edit)?o?(0,u.createPortal)((0,a.jsx)("div",{className:"fixed inset-0 z-[2000] flex bg-background",onTouchMove:e=>{e.stopPropagation()},children:(0,a.jsxs)(l.mQ,{value:t,onValueChange:e=>n(e,!0),className:"inset-0 flex w-full flex-col sm:flex-row",children:[(0,a.jsx)("div",{className:"pr-4 md:min-w-[25vw] md:max-w-[450px]",children:(0,a.jsxs)("div",{className:"ml-4 flex flex-col items-start gap-4",children:[(0,a.jsx)("div",{className:"-mb-2 flex h-12 items-center",children:(0,a.jsx)(p.Z,{})}),(0,a.jsxs)(S.z,{onClick:s,className:"pr-3 hover:bg-muted-hover",variant:"secondary",size:"sm",children:[(0,a.jsx)(G.Z,{name:"chevron_left",size:"small"}),"Back to project"]}),(0,a.jsxs)(l.dr,{className:"flex w-full flex-row sm:flex-col",children:[(0,a.jsxs)(eY,{value:"settings",activeTab:t,children:[(0,a.jsx)(G.Z,{name:"settings"}),(0,a.jsx)("p",{children:"Settings"})]}),d&&(0,a.jsxs)(eY,{value:"domains",activeTab:t,children:[(0,a.jsx)(G.Z,{name:"language"}),(0,a.jsx)("p",{children:"Domains"})]}),(0,a.jsxs)(eY,{value:"github",activeTab:t,children:[(0,a.jsx)(i.wGg,{}),(0,a.jsx)("p",{children:"GitHub"})]}),(0,a.jsxs)(eY,{value:"knowledge",activeTab:t,children:[(0,a.jsx)(G.Z,{name:"school"}),(0,a.jsx)("p",{children:"Knowledge"})]}),(0,a.jsxs)(eY,{value:"supabase",activeTab:t,children:[(0,a.jsx)(eA.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,a.jsx)("p",{children:"Supabase"})]})]})]})}),(0,a.jsxs)("div",{className:"m-2 flex flex-1 justify-center overflow-auto rounded-xl border py-8",children:[(0,a.jsx)(eX,{value:"settings",children:(0,a.jsx)(eE,{projectId:o.id})}),(0,a.jsx)(eX,{value:"knowledge",children:(0,a.jsx)(ea,{})}),(0,a.jsx)(eX,{value:"github",children:(0,a.jsx)(et,{project:o})}),(0,a.jsx)(eX,{value:"supabase",children:(0,a.jsx)(eV,{project:o})}),d&&(0,a.jsx)(eX,{value:"domains",children:(0,a.jsx)(O,{project:o})})]})]})}),document.body):(0,a.jsx)(a.Fragment,{}):null}let eY=e=>{let{children:t,value:n,activeTab:s,...r}=e;return(0,a.jsx)(l.SP,{value:n,...r,className:(0,E.cn)("duration-125 flex h-8 items-center gap-2 rounded-md px-2 text-sm transition-colors ease-in-out sm:w-full [&>svg]:hidden [&>svg]:size-4 sm:[&>svg]:flex","hover:bg-muted-hover",n===s&&"bg-muted"),children:t})},eX=e=>{let{children:t,value:n,...s}=e;return(0,a.jsx)(l.nU,{value:n,...s,className:(0,E.cn)("flex max-w-2xl flex-1 flex-col px-4 data-[state=inactive]:hidden"),children:t})}},30068:function(e,t,n){"use strict";n.d(t,{a:function(){return v}});var s=n(57437),r=n(20653),a=n(2265),i=n(4310),l=n(95670),o=n(62869),c=n(55721),d=n(57346),u=n(95186),m=n(12339),p=n(81103),h=n(6478),x=n(94023),f=n(58672);function v(e){return e!==i.aR}t.Z=()=>{var e,t,n,a,d,u;let h=(0,x.iZ)(e=>e.project),b=(null==h?void 0:h.name)?(0,i.c_)(h.github_repo_name,null==h?void 0:null===(e=h.github_owner)||void 0===e?void 0:e.name):"#",N=(null==h?void 0:null===(t=h.github_owner)||void 0===t?void 0:t.name)+"/"+(null==h?void 0:h.github_repo_name);return(0,s.jsxs)(c.h_,{children:[(0,s.jsxs)(p.u,{children:[(0,s.jsx)(p.aJ,{asChild:!0,children:(0,s.jsx)(c.$F,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"muted",size:"sm",className:"gap-1.5",children:[(0,s.jsx)(r.wGg,{className:"size-4"}),(0,s.jsx)("span",{className:"hidden md:flex",children:"GitHub"})]})})}),(0,s.jsx)(p._v,{children:"Source Code on GitHub"})]}),(0,s.jsxs)(c.AW,{className:"z-[1001] min-w-[200px] max-w-[250px] rounded-md border border-border bg-background p-4",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)("h3",{className:"mt-0 pb-1",children:"GitHub"}),(null==h?void 0:null===(n=h.github_owner)||void 0===n?void 0:n.name)&&!v(h.github_owner.name)?(0,s.jsx)(f.h,{projectId:null==h?void 0:h.id,projectName:null==h?void 0:h.github_repo_name}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["This project is connected to"," ",(null==h?void 0:null===(a=h.github_owner)||void 0===a?void 0:a.name)&&(null==h?void 0:h.github_repo_name)?(0,s.jsx)("a",{href:b,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("b",{children:[null==h?void 0:null===(d=h.github_owner)||void 0===d?void 0:d.name,"/",null==h?void 0:h.github_repo_name]})}):"GitHub",". Lovable will commit changes to the"," ",(0,s.jsx)("b",{children:(null==h?void 0:h.main_branch)||"main"})," branch."]}),(0,s.jsx)("p",{className:"pb-2 text-sm text-muted-foreground",children:"Your source code only exists in your GitHub repository. Deleting it removes your work."}),(0,s.jsx)("h4",{className:"pt-2",children:"Clone"}),(0,s.jsxs)(m.mQ,{defaultValue:"https",className:"w-full pb-2",children:[(0,s.jsxs)(m.dr,{className:"gap-2 px-0 pb-0 pt-0",children:[(0,s.jsx)(j,{value:"https",label:"HTTPS"}),(0,s.jsx)(j,{value:"ssh",label:"SSH"}),(null==h?void 0:h.is_github)&&(0,s.jsx)(j,{value:"githubcli",label:"GitHub CLI"})]}),(0,s.jsx)(m.nU,{value:"https",className:"mt-0",children:(0,s.jsx)(g,{url:"".concat(b,".git")})}),(0,s.jsx)(m.nU,{value:"ssh",className:"mt-0",children:(0,s.jsx)(g,{url:"git@github.com:".concat(N,".git")})}),(0,s.jsx)(m.nU,{value:"githubcli",className:"mt-0",children:(0,s.jsx)(g,{url:"gh repo clone ".concat(N)})})]}),(0,s.jsx)(c.VD,{className:"mx-0"}),(0,s.jsx)(l.Z,{externalHref:"https://github.dev/".concat(N,"?").concat((null==h?void 0:h.main_branch)?"tree/".concat(null==h?void 0:h.main_branch):""),title:"Edit in VS Code",className:"-mx-2"},"vscode")]}),(null==h?void 0:null===(u=h.github_owner)||void 0===u?void 0:u.name)!==i.aR&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.VD,{className:"mx-0"}),(0,s.jsx)(l.Z,{className:"-mx-2 -mb-2",externalHref:b,title:"View on GitHub"},"github")]})]})]})};let j=e=>{let{label:t,value:n}=e;return(0,s.jsx)(m.SP,{className:"rounded-none border-b border-transparent px-0 py-0.5 text-xs data-[state=active]:border-b-border data-[state=active]:font-medium",value:n,children:t})},g=e=>{let{url:t}=e,n=a.forwardRef((e,t)=>(0,s.jsx)(o.z,{ref:t,...e,variant:"ghost",className:"-mr-2 h-8 text-accent hover:text-primary",children:(0,s.jsx)(d.Z,{name:"content_copy",className:"h-4 w-4"})}));n.displayName="TriggerComponent";let r=(0,h.F)()({TriggerComponent:n,textToCopy:t});return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.I,{className:"h-8 flex-1 p-2 font-mono text-xs text-muted-foreground focus:text-primary",value:t,onFocus:e=>e.target.select(),readOnly:!0}),(0,s.jsx)(p.pn,{children:(0,s.jsxs)(p.u,{children:[(0,s.jsx)(p.aJ,{children:r}),(0,s.jsx)(p._v,{children:"Copy url to clipboard"})]})})]})}},92039:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var s=n(21770),r=n(14438),a=n(65666),i=n(36710),l=n(21288),o=n(82246);let c=e=>{let t=(0,i.O)(),n=(0,a.D)(),c=(0,o.Eh)(e=>e.setActiveEdit),d=async e=>{let{edit:s,dry_run:r,via_undo:a}=e,i=s.id;s.revert_target_edit_id&&(i=s.revert_target_edit_id);let l={edit_id:i,dry_run:r,via_undo:a};return t.post("/projects/".concat(n,"/revert-to-edit"),l)};return(0,s.D)({mutationFn:d,onMutate:()=>{o.Eh.setState({isSomeRevertMutationPending:!0})},onSuccess:(t,n)=>{if(!n.via_undo){let e=t.commit_message;void 0===e&&t.tags&&(e=t.tags.summary);let n=e?"Restored to earlier version: ".concat(e):"Restored to earlier version";r.Am.success("Success",{description:n})}null==e||e.onSuccess(),c(t)},onError:e=>{l.PW.error("could_not_revert_to_earlier_version",{error:e}),r.Am.error("Could not revert to earlier version",{description:e.data.detail})},onSettled:()=>{o.Eh.setState({isSomeRevertMutationPending:!1})}})}},94023:function(e,t,n){"use strict";n.d(t,{PY:function(){return _},iZ:function(){return y},jI:function(){return b}});var s=n(57437),r=n(21770),a=n(16593),i=n(5978),l=n(99376),o=n(2265),c=n(14438),d=n(59625),u=n(25134),m=n(49131),p=n(36710),h=n(78099),x=n(21288),f=n(97318),v=n(82246);let j=e=>(0,d.Ue)(()=>({projectId:e,project:void 0,isDeleting:!1})),g=(0,o.createContext)(null),b=e=>{let{children:t,projectId:n}=e;return(0,s.jsx)(N,{projectId:n,children:t},n)},N=e=>{let{children:t,projectId:n}=e,d=(0,p.O)(),b=(0,o.useRef)(j(n)),N=(0,l.useRouter)(),{userData:_,isInitialized:y}=(0,u.v)(),w=(0,v.Eh)(e=>e.hasHandledCollaborationInvite);(0,o.useEffect)(()=>{if(!n||!w||!y||!_)return;let e=b.current,t=(0,i.JU)(h.db,"projects",n),s=(0,i.cf)(t,t=>{let s=t.data();s?e.setState({project:s}):e.getState().isDeleting||(x.PW.error("PROJECT NOT FOUND",{projectId:n,docExists:t.exists(),userId:null==_?void 0:_.id}),N.push("/projects/not-found"))},e=>{if(x.PW.error("PROJECT PERMISSION ERROR",{error:e,projectId:n}),"permission-denied"===e.code){x.PW.error("PROJECT PERMISSION DENIED",{error:e,projectId:n}),N.replace("/?should-refresh-credentials=1"),N.refresh();return}c.Am.error("Error",{description:"Failed to fetch project."})});return()=>{s()}},[n,_,y,N,w]);let E=async()=>{var e,t;let n=b.current,{project:s}=n.getState();if(s)try{n.setState({isDeleting:!0}),(await d.delete("/projects/".concat(s.id))).deleting_repo?(c.Am.success("Project deleted",{description:"Your project has been deleted."}),N.replace("/")):N.replace("/?deleted=true&projectName=".concat(s.github_repo_name,"&githubOwner=").concat(null===(e=s.github_owner)||void 0===e?void 0:e.name))}catch(n){let e=(null===(t=n.data)||void 0===t?void 0:t.detail)||"Something went wrong";throw c.Am.error("Error",{description:e}),n}},C=(0,r.D)({mutationKey:["projects",n,"update"],mutationFn:async e=>{let{project:t}=b.current.getState();if(!t)return;let s=[];return Object.entries(e).forEach(e=>{let[t,n]=e;s.push({path:t,value:n})}),(0,m.S)().put("/projects/".concat(n),s)},onSuccess:()=>{c.Am.success("Project updated successfully")}}),S=(0,r.D)({mutationFn:e=>d.put("/projects/".concat(n,"/visibility"),{visibility:e}),onSuccess:()=>{c.Am.success("Visibility updated")},onError:()=>{c.Am.error("Error",{description:"Failed to update visibility"})}}),I=(0,a.a)({queryKey:f.iZ.badgeVisibility(n),queryFn:()=>d.get("/projects/".concat(n,"/badge/visibility"))}),A=(0,r.D)({mutationFn:e=>d.post("/projects/".concat(n,"/badge/visibility"),{hide_badge:e}),onSuccess:()=>{c.Am.success("Badge visibility updated"),I.refetch()}}),P=(0,r.D)({mutationFn:e=>{let{name:t,shouldRenameRepo:s}=e;return d.post("/projects/".concat(n,"/rename"),{desired_name:t,rename_repository:s})},onSuccess:(e,t)=>{let{name:n}=t;c.Am.success("Successfully renamed project",{description:n})},onError:e=>{var t;c.Am.error("Failed to rename project",{description:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.detail})}}),R={store:b.current,deleteProject:E,updateProject:C.mutateAsync,setVisibility:S.mutateAsync,badgeVisibility:I.data,setBadgeVisibility:A.mutateAsync,renameProject:P.mutateAsync};return(0,s.jsx)(g.Provider,{value:R,children:t})};function _(){let e=(0,o.useContext)(g);if(!e)throw Error("useProject must be used within a ProjectProvider");return e}function y(e){let{store:t}=_();return t(e)}},63420:function(e,t,n){"use strict";n.d(t,{P:function(){return x},v:function(){return f}});var s=n(57437),r=n(99376),a=n(46214),i=n(2265),l=n(64040),o=n(49131),c=n(36710),d=n(32582),u=n(26034),m=n(6827),p=n(94023);let h=(0,i.createContext)(null);function x(e){let{children:t,baseSandboxUrl:n,refreshPreview:x,setDevServerEnabled:f}=e,{tab:v}=(0,r.useParams)(),j=(0,m.W)(e=>e.setFile),g=(0,m.W)(e=>e.reset),b=(0,m.W)(e=>e.pendingChanges),N=(0,m.W)(e=>e.clearPendingChanges),_=(0,m.W)(e=>e.addPendingChange),y=(0,i.useRef)(null),w=(0,p.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}),E=(0,c.O)(),C=(0,m.W)(e=>e.files),S=(0,i.useMemo)(()=>Object.entries(C),[C]),I=(0,m.W)(e=>e.uploads),[A,P]=(0,i.useState)(!1),[R,k]=(0,i.useState)(null),[T,O]=(0,i.useState)([]),[D,F]=(0,i.useState)([]),z=(0,i.useCallback)(()=>{S&&O((0,d.x2)(S))},[S]);(0,i.useEffect)(()=>{z()},[z]);let[L,Z]=(0,i.useState)(!1),U=(0,i.useCallback)(()=>{Z(!0),f(!0)},[f,Z]);(0,i.useEffect)(()=>{if(!L||!n)return;let e=new URL("/_sandbox/code/ws",n);return e.protocol=e.protocol.replace("http","ws"),y.current=new WebSocket(e),y.current.onmessage=e=>{try{let{type:t,data:n}=JSON.parse(e.data);if("init_code"===t)g(),P(!0),n.forEach(e=>{let[t,n]=e;j(t,n)});else if("file_update"===t){let e=m.W.getState().files;n.forEach(t=>{let[n,s]=t;e[n]!==s&&j(n,s)})}}catch(e){console.error("Error processing WebSocket message:",e)}},y.current.onerror=e=>{console.error("WebSocket error:",e)},()=>{var e;null===(e=y.current)||void 0===e||e.close(),y.current=null}},[n,g,j,L,v]);let H=(0,i.useCallback)(async function(e){let{commitMessage:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.ZP.capture("visual_edits:sync_started");let n=Object.entries(e);if(!w)throw Error("No project id");if(0===n.length)throw Error("No changes to sync");try{let e=await Promise.all(I.map(e=>(0,u.S)(E,{dir_name:e.dir_name,file_name:e.id}).then(t=>({download_url:t.url,file_id:e.file_name})))),s=(0,o.S)(),r=await s.post("/projects/".concat(w,"/edit-code"),{changes:n.map(e=>{let[t,n]=e;return{path:t,content:n}}),uploads:e,commit_message:t||null});if("error"in r&&r.error)throw Error("Failed to sync code");N()}catch(e){(0,l.Eo)(e),a.ZP.capture("visual_edits:sync_failed",{error:e instanceof Error?e.message:"Unknown error",changes:null==n?void 0:n.map(e=>{let[t,n]=e;return[t,n.length]}),project_id:w})}},[w,I,N,E]),G=Object.keys(b).length>0;return(0,s.jsx)(h.Provider,{value:{syncCode:H,ast:T,code:S,generateAst:z,refreshPreview:x,enableServer:U,history:D,setHistory:F,currentClassName:R,setCurrentClassName:k,addPendingChange:_,hasUnsavedChanges:G,hasInitialCode:A},children:t})}function f(){let e=(0,i.useContext)(h);if(!e)throw Error("useSandboxCode must be used within a SandboxCodeProvider");return{code:e.code,syncCode:e.syncCode,ast:e.ast,generateAst:e.generateAst,refreshPreview:e.refreshPreview,enableServer:e.enableServer,history:e.history,setHistory:e.setHistory,currentClassName:e.currentClassName,setCurrentClassName:e.setCurrentClassName,addPendingChange:e.addPendingChange,hasUnsavedChanges:e.hasUnsavedChanges,hasInitialCode:e.hasInitialCode}}},49968:function(e,t,n){"use strict";n.d(t,{U1:function(){return a},fA:function(){return i},oo:function(){return o},pr:function(){return l}});var s=n(54257);let r=()=>"https://console.firebase.google.com/u/0/project/".concat(s.q.projectId,"/firestore/databases/-default-/data"),a=e=>"".concat(r(),"/~2Fprojects~2F").concat(e),i=e=>e?"".concat(r(),"/~2Fusers~2F").concat(e):"",l=(e,t)=>"".concat(a(e),"~2Ftrajectory~2F").concat(t),o=(e,t)=>"".concat(a(e),"~2Fedits~2F").concat(t)},73571:function(e,t,n){"use strict";n.d(t,{y:function(){return d}});var s=n(57437),r=n(30401),a=n(2265),i=n(62869),l=n(26110),o=n(93022),c=n(55630);function d(e){let{trigger:t,currentWorkspaceId:n,projectId:d,onWorkspaceSelect:u,open:m,setOpen:p,isRootDialog:h=!1}=e,{workspaces:x,isLoading:f,error:v,moveProjectToWorkspace:j}=(0,c._)(),[g,b]=(0,a.useState)(!1),[N,_]=(0,a.useState)(!1),y=p||b,w=async e=>{_(!0),d?await j(d,e.id):null==u||u(e),y(!1),_(!1)};return(0,s.jsxs)(l.Vq,{open:p?m:g,onOpenChange:y,children:[!h&&(0,s.jsx)(l.hg,{asChild:!0,children:t||(0,s.jsx)(i.z,{variant:"outline",children:"Change workspace"})}),(0,s.jsxs)(l.cZ,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(l.fK,{children:[(0,s.jsx)(l.$N,{children:"Change Workspace"}),(0,s.jsx)(l.Be,{children:d?"Select a workspace to move this project to":"Select a workspace to switch to"})]}),(0,s.jsx)("div",{className:"space-y-4 py-4",children:f?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.O,{className:"h-12 w-full"}),(0,s.jsx)(o.O,{className:"h-12 w-full"}),(0,s.jsx)(o.O,{className:"h-12 w-full"})]}):v?(0,s.jsxs)("div",{className:"text-center text-destructive",children:["Error loading workspaces: ",v]}):0===x.owned.length&&0===x.joined.length?(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"No workspaces found"}):x.owned.map(e=>(0,s.jsxs)(i.z,{variant:"outline",className:"w-full justify-between",onClick:()=>w(e),disabled:N,children:[(0,s.jsx)("span",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{children:e.name})}),e.id===n&&(0,s.jsx)(r.Z,{className:"h-4 w-4"})]},e.id))})]})]})}},4310:function(e,t,n){"use strict";n.d(t,{_J:function(){return a},aR:function(){return s},c_:function(){return r}}),n(57437),n(62869),n(57346);let s="GPT-Engineer-App",r=(e,t)=>"https://github.com/".concat(t||s,"/").concat(e),a=(e,t,n)=>"".concat(r(e,n),"/commit/").concat(t)},95670:function(e,t,n){"use strict";var s=n(57437),r=n(33145),a=n(27648),i=n(55721),l=n(57346),o=n(94508);t.Z=e=>{let{title:t,iconName:n,imageSrc:c,onClick:d,internalHref:u,externalHref:m,className:p,iconClassName:h}=e,x=(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(l.Z,{name:n,className:"shrink-0 text-foreground ".concat(h)}),c&&(0,s.jsx)(r.default,{alt:"icon",src:c,width:"14",height:"14"}),(0,s.jsx)("span",{className:"truncate text-primary",children:t})]});return(0,s.jsx)(i.Xi,{className:(0,o.cn)("",p),asChild:!0,children:u?(0,s.jsx)(a.default,{href:u,children:x}):m?(0,s.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[x,(0,s.jsx)(l.Z,{name:"arrow_outward",className:"ml-auto h-4 w-4 text-foreground"})]}):(0,s.jsx)("div",{onClick:()=>{d&&d()},children:x})})}},99478:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var s=n(57437),r=n(2265),a=n(44481),i=n(94508),l=n(62869);let o=e=>{let{hotkey:t,className:n}=e;return(0,s.jsx)("kbd",{className:(0,i.cn)("border-current/30 ml-1 flex h-4 items-center rounded-sm border px-1 text-[9px] font-semibold text-inherit transition-colors group-hover:border-foreground",n),children:t.toUpperCase()})},c=r.forwardRef((e,t)=>{let{hidden:n=!1,disabled:r=!1,hotkey:c,showHotkey:d=!1,onClick:u,hotkeyOptions:m,className:p,...h}=e;return((0,a.y1)(c||"",e=>{e.preventDefault(),u&&u(e)},{enabled:!r,...m},[u]),n)?null:(0,s.jsxs)(l.z,{ref:t,disabled:r,onClick:u,...h,className:(0,i.cn)("group",p),children:[h.children,d&&c&&(0,s.jsx)(o,{hotkey:c})]})});c.displayName="HotkeyButton"},38190:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var s=n(57437),r=n(27648),a=n(57346),i=n(94508);let l=e=>{let{className:t}=e;return(0,s.jsxs)(r.default,{href:"/settings/account#labs",className:(0,i.cn)("flex items-center gap-1 text-xs text-muted-foreground hover:underline",t),children:[(0,s.jsx)(a.Z,{name:"experiment_fill",size:"small"}),"Labs"]})}},39484:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var s=n(57437),r=n(51817),a=n(94508);let i=e=>{let{text:t,className:n}=e;return(0,s.jsxs)("div",{className:(0,a.cn)("mt-1 flex items-center gap-2 text-sm opacity-70",n),children:[(0,s.jsx)("div",{className:"my-1",children:(0,s.jsx)(r.Z,{className:"animate-spin",size:"1em"})}),(0,s.jsx)("div",{children:t})]})}},27410:function(e,t,n){"use strict";var s=n(57437);n(2265);var r=n(81103);t.Z=e=>{let{children:t,label:n,side:a="bottom"}=e;return(0,s.jsx)(r.pn,{children:(0,s.jsxs)(r.u,{children:[(0,s.jsx)(r.aJ,{asChild:!0,children:t}),(0,s.jsx)(r._v,{className:"z-[2001]",side:a,children:n})]})})}},16831:function(e,t,n){"use strict";n.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return l}});var s=n(57437),r=n(70650),a=n(2265),i=n(94508);let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...a})});l.displayName=r.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",n),...a})});o.displayName=r.Ee.displayName;let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...a})});c.displayName=r.NY.displayName},19060:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var s=n(57437),r=n(9270),a=n(2265),i=n(94508),l=n(57346);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...a,children:(0,s.jsx)(r.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(l.Z,{name:"check",className:"h-4 w-4"})})})});o.displayName=r.fC.displayName},15681:function(e,t,n){"use strict";n.d(t,{NI:function(){return f},Wi:function(){return u},l0:function(){return c},lX:function(){return x},xJ:function(){return h},zG:function(){return v}});var s=n(57437),r=n(37053),a=n(2265),i=n(29501),l=n(26815),o=n(94508);let c=i.RV,d=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(d.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},m=()=>{let e=a.useContext(d),t=a.useContext(p),{getFieldState:n,formState:s}=(0,i.Gc)(),r=n(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...r}},p=a.createContext({}),h=a.forwardRef((e,t)=>{let{className:n,...r}=e,i=a.useId();return(0,s.jsx)(p.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...r})})});h.displayName="FormItem";let x=a.forwardRef((e,t)=>{let{className:n,...r}=e,{error:a,formItemId:i}=m();return(0,s.jsx)(l._,{ref:t,className:(0,o.cn)(a&&"",n),htmlFor:i,...r})});x.displayName="FormLabel";let f=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,s.jsx)(r.g7,{ref:t,id:i,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...n})});f.displayName="FormControl",a.forwardRef((e,t)=>{let{className:n,...r}=e,{formDescriptionId:a}=m();return(0,s.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-[0.8rem] text-muted-foreground",n),...r})}).displayName="FormDescription";let v=a.forwardRef((e,t)=>{let{className:n,children:r,...a}=e,{error:i,formMessageId:l}=m(),c=i?String(null==i?void 0:i.message):r;return c?(0,s.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-[0.8rem] text-xs font-medium text-destructive",n),...a,children:c}):null});v.displayName="FormMessage"},1828:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var s=n(57437),r=n(50721),a=n(2265),i=n(94508);let l=a.forwardRef((e,t)=>{let{className:n,thumbClassName:a,...l}=e;return(0,s.jsx)(r.fC,{className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",n),...l,ref:t,children:(0,s.jsx)(r.bU,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0",a)})})});l.displayName=r.fC.displayName},12339:function(e,t,n){"use strict";n.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var s=n(57437),r=n(20271),a=n(2265),i=n(94508);let l=r.fC,o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg p-1 text-muted-foreground",n),...a})});o.displayName=r.aV.displayName;let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...a})});c.displayName=r.xz.displayName;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...a})});d.displayName=r.VY.displayName},63611:function(e,t,n){"use strict";n.d(t,{E:function(){return o},Z:function(){return c}});var s=n(57437),r=n(6400),a=n(77712),i=n(2265),l=n(94508);let o=(0,a.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-accent focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:n,variant:a,size:i,...c}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,l.cn)(o({variant:a,size:i,className:n})),...c})});c.displayName=r.f.displayName},81103:function(e,t,n){"use strict";n.d(t,{_v:function(){return d},aJ:function(){return c},pn:function(){return l},u:function(){return o}});var s=n(57437),r=n(91668),a=n(2265),i=n(94508);let l=r.zt,o=r.fC,c=r.xz,d=a.forwardRef((e,t)=>{let{className:n,sideOffset:a=4,...l}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsx)(r.VY,{ref:t,sideOffset:a,className:(0,i.cn)("z-[10000] overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...l})})});d.displayName=r.VY.displayName},6478:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var s=n(57437),r=n(81103),a=n(2265);let i=e=>{let[t,n]=(0,a.useState)(!1),i=(0,a.useRef)(),l=(0,a.useCallback)(e=>{e&&(clearTimeout(i.current),navigator.clipboard.writeText(e),n(!0),i.current=setTimeout(()=>{n(!1)},1e3))},[]);return n=>{let{TriggerComponent:a,textToCopy:i,copiedFeedbackText:o="Copied!"}=n;return(0,s.jsx)(r.pn,{children:(0,s.jsxs)(r.u,{open:t,children:[(0,s.jsx)(r.aJ,{onClick:t=>{(null==e||!e.altKey||t.altKey)&&i&&l(i)},asChild:!0,className:"hello",children:(0,s.jsx)(a,{})}),(0,s.jsx)(r._v,{children:(0,s.jsx)("p",{children:o})})]})})}}},35354:function(e,t,n){"use strict";var s=n(2265);t.Z=()=>{let[e,t]=(0,s.useState)("");return(0,s.useEffect)(()=>{t(r())},[]),{isMac:"mac"===e,isWindows:"windows"===e,isLinux:"linux"===e}};let r=()=>{let e=window.navigator.userAgentData,t=window.navigator.userAgent,n={iphone:/iphone/,ipad:/ipad|macintosh/,android:/android/},s={windows:/win/,mac:/macintosh/,linux:/linux/};if(t){let e=t.toLowerCase().replace(/^mozilla\/\d\.\d\W/,""),r=Object.keys(n).find(t=>n[t].test(e)&&window.navigator.maxTouchPoints>=1),a=Object.keys(s).find(t=>s[t].test(e));return r||a}return e?e.platform.toLowerCase():""}},44895:function(e,t,n){"use strict";n.d(t,{Mw:function(){return l},Oq:function(){return a},mA:function(){return o},yA:function(){return c}});var s=n(51948),r=n(21288);let a=()=>"https://github.com/login/oauth/authorize?client_id=".concat(s.l),i=()=>"https://github.com/apps/".concat(s.F,"/installations/new"),l=e=>(null==e?void 0:e.id)?"https://github.com/apps/".concat(s.F,"/installations/new/permissions?target_id=").concat(e.id,"&target_type=").concat(e.type):i(),o=()=>({openConnectToGithubPopup:(e,t)=>{c(e&&!t?a():i())}}),c=e=>{let t=window.open(e,"_blank","width=600,height=700,left=100,top=100");if(!t){r.PW.error("Failed to open GitHub OAuth popup");return}t.focus()}},33910:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var s=n(25134),r=n(97318),a=n(16593),i=n(2265),l=n(36710),o=n(49340);let c=()=>{var e,t,n,c;let d=(0,l.O)(),[u,m]=(0,o.a)(),{userData:p,isInitialized:h}=(0,s.v)(),x=null==p?void 0:null===(e=p.github)||void 0===e?void 0:e.encrypted_access_token,f=(0,i.useRef)(x),v=(0,a.a)({queryKey:r.pL.installations(),queryFn:()=>d.get("/github-installations")});return(0,i.useEffect)(()=>{f.current!==x&&(v.refetch(),f.current=x)},[x,v]),{installations:null===(t=v.data)||void 0===t?void 0:t.installations,hasAccessToken:null===(n=v.data)||void 0===n?void 0:n.has_access_token,hasValidAccessToken:null===(c=v.data)||void 0===c?void 0:c.has_valid_access_token,installationsQuery:v}}},78844:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var s=n(14438),r=n(21288),a=n(2265),i=n(25566);let l=e=>{let[t,n]=(0,a.useState)(!1);return{handleConnect:(0,a.useCallback)(async()=>{n(!0);try{let t=window.location.origin,n=btoa(JSON.stringify({projectId:e})),s=i.env.NEXT_PUBLIC_SUPABASE_OAUTH_CLIENT_ID||"dbd565fc-4637-4cb6-ab68-0af4b5708417",r=function(){let e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,Array.from(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(),a=await o(r);localStorage.setItem("supabaseCodeVerifier",r);let l="https://api.supabase.com/v1/oauth/authorize?response_type=code"+"&client_id=".concat(s)+"&redirect_uri=".concat(encodeURIComponent("".concat(t,"/supabase/callback")))+"&state=".concat(encodeURIComponent(n))+"&code_challenge=".concat(encodeURIComponent(a))+"&code_challenge_method=S256",c=window.open(l,"_blank","width=600,height=700,left=100,top=100");c?c.focus():window.location.href=l}catch(e){r.PW.error("Error initiating Supabase connection:",{error:e}),s.Am.error("Connection Error",{description:"An error occurred while connecting to Supabase. Please try again."})}finally{n(!1)}},[e]),isConnecting:t}};async function o(e){let t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(n)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},72253:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var s=n(16593),r=n(65666),a=n(36710),i=n(21288),l=n(97318);let o=()=>{let e=(0,a.O)(),t=(0,r.v)(),{data:n,isLoading:o}=(0,s.a)({queryKey:l.iZ.supabaseOrganizations(t),enabled:!!t,queryFn:async()=>{let t=await e.get("/supabase/organizations");return Array.isArray(t)?t:(i.PW.error("Unexpected response format:",t),[])}}),c=!n||0===n.length;return{supabaseOrganizations:n,isLoading:o,noOrganizations:c}}},2043:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var s=n(2265),r=n(25134),a=n(94023),i=n(20984),l=n(82246),o=n(49340);let c=()=>{let[e,t]=(0,o.a)(),{userData:n}=(0,r.v)(),c=(0,a.iZ)(e=>e.project),d=(0,l.Eh)(e=>e.isProjectCollaborator),u=(0,l.Eh)(e=>e.setUserProjectPermissions),m=(0,s.useMemo)(()=>{if(t||!c||!n)return null;let s=(null==c?void 0:c.user_id)===(null==e?void 0:e.uid)||(null==n?void 0:n.is_admin)||(null==c?void 0:c.user_id)==="claimable"||d===i.u.ADMIN;return{admin:s,edit:s||!!d}},[c,e,d,n,t]);return(0,s.useEffect)(()=>{m&&u(m)},[m,u]),m}},32582:function(e,t,n){"use strict";n.d(t,{EE:function(){return h},H2:function(){return u},R5:function(){return o},Rw:function(){return l},Xu:function(){return d},cB:function(){return m},x2:function(){return i}});var s=n(97569),r=n(76624),a=n(98891);function i(e){let t=[];return e.map(e=>{let n,[r,a]=e;if(r.endsWith(".tsx")||r.endsWith(".ts")||r.endsWith(".jsx")||r.endsWith(".js")){try{n=(0,s.parse)(a,{sourceFilename:r,sourceType:"module",plugins:["jsx","typescript"],allowImportExportEverywhere:!0})}catch(e){return}t.push({filePath:r,ast:n})}}),t}function l(e,t){let n=e.children.find(e=>a.isJSXText(e));n?n.value=t:e.children.unshift(a.jsxText(t))}function o(e,t){Object.keys(t).forEach(n=>{e.openingElement.attributes=e.openingElement.attributes.filter(e=>{var t;return a.isJSXAttribute(e)&&(null===(t=e.name)||void 0===t?void 0:t.name)!==n}),e.openingElement.attributes.push(a.jsxAttribute(a.jsxIdentifier(n),a.stringLiteral(t[n])))})}let c=e=>a.isStringLiteral(e)?e.value:null;function d(e){let t=e.openingElement.attributes.find(e=>a.isJSXAttribute(e)&&"className"===e.name.name);return void 0===t?"":(null==t?void 0:t.value)?c(t.value):null}let u=(e,t)=>{let n=t.find(t=>t.filePath===e.filePath);if(!n)return!1;let s=!1;return(0,r.default)(n.ast,{JSXElement(t){var n;if((null===(n=t.node.loc)||void 0===n?void 0:n.start.line)===e.lineNumber&&a.isJSXElement(t.node)){let e=t.node.children;s=1===e.length&&a.isJSXText(e[0]),t.stop()}}}),s},m=(e,t,n)=>{let s=t.find(t=>t.filePath===e.filePath);if(!s)return!1;let i=!1;return(0,r.default)(s.ast,{JSXElement(t){var s;(null===(s=t.node.loc)||void 0===s?void 0:s.start.line)===e.lineNumber&&a.isJSXElement(t.node)&&(i=t.node.openingElement.attributes.some(e=>{var t;return a.isJSXAttribute(e)&&a.isStringLiteral(e.value)&&(null===(t=e.name)||void 0===t?void 0:t.name)===n}),t.stop())}}),i},p=(e,t,n)=>{let s=n.find(e=>e.filePath===t);if(!s)return null;let a=null;return(0,r.default)(s.ast,{JSXElement(t){var n;(null===(n=t.node.loc)||void 0===n?void 0:n.start.line)===e&&(a=t.node,t.stop())}}),a},h=(e,t)=>{let n=p(e.lineNumber,e.filePath,t);return n?d(n):null}},76906:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var s=n(25566);let r=e=>{let{projectId:t,projectName:n,useCacheBuster:r,sha:a}=e;if(!t&&!n)throw Error("projectId or projectName must be provided");if(t&&n)throw Error("projectId and projectName cannot both be provided");let i=s.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",l=s.env.NEXT_PUBLIC_PROXY_WORKER_PORT?":".concat(s.env.NEXT_PUBLIC_PROXY_WORKER_PORT):"",o=a?"-".concat(a.slice(0,8)):"",c=new URL("".concat(i,"://").concat(void 0!==n?"preview":"id-preview").concat(o,"--").concat(n||t,".").concat("lovable.app").concat(l));return r&&c.searchParams.set("cache",Date.now().toString()),c.toString()}},51948:function(e,t,n){"use strict";n.d(t,{F:function(){return s},l:function(){return r}});let s="lovable-dev",r="Iv1.365d6a195dbca85b"},51826:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});let s={TABS:{CHAT_OPENED:"project:tabs:chat_opened",HISTORY_OPENED:"project:tabs:history_opened"},HEADER:{SETTINGS_OPENED:"project:header:settings_opened"},HISTORY:{CARD_SELECTED:"project:history:card_selected"},CODE_CARD:{VIEW_CODE_CLICKED:"project:code_card:view_code_clicked",RESTORE_CLICKED:"project:code_card:restore_clicked",PREVIEW_CLICKED:"project:code_card:preview_clicked"},ELLIPSIS:{RESTORE_CLICKED:"project:ellipsis:restore_clicked",PREVIEW_CLICKED:"project:ellipsis:preview_clicked",COPY_LINK_CLICKED:"project:ellipsis:copy_link_clicked"},CONSOLE:{EXITED_VIA_CARD:"project:console:exited_via_card",EXITED_VIA_BUTTON:"project:console:exited_via_button"},PREVIEW:{RAW_TAB_CLICKED:"project:preview:raw_tab_clicked",DIFF_TAB_CLICKED:"project:preview:diff_tab_clicked"},KNOWLEDGE:{SAVED:"project:knowledge:saved"},CHAT:{MESSAGE_SENT:"chat_message_sent"}}},33187:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var s=n(52274),r=n(49131),a=n(97318);let i={sourceCode:e=>{let{projectId:t,enabled:n}=e;return(0,s.C)({queryKey:a.iZ.sourceCode(t),queryFn:async()=>{let e=(0,r.S)();return await e.get("/projects/".concat(t,"/source-code"))},enabled:n})},feedbackStatus:e=>{let{projectId:t}=e;return(0,s.C)({queryKey:a.iZ.feedbackStatus(t),queryFn:async()=>{let e=(0,r.S)();return await e.get("/user/feedback-status")}})},domains:e=>{let{projectId:t}=e;return(0,s.C)({queryKey:a.iZ.domains(t),queryFn:async()=>{let e=(0,r.S)();return await e.get("/projects/".concat(t,"/domains"))},refetchOnMount:!0,refetchOnWindowFocus:!1})}}},51408:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var s=n(52274),r=n(49131),a=n(21288),i=n(97318);let l={workspace:e=>{let{workspaceId:t,userData:n}=e;return(0,s.C)({queryKey:i.TZ.workspace(t),queryFn:async()=>{let e=(0,r.S)();return(await e.get("/user/workspaces/".concat(t))).workspace},enabled:!!n&&!!t})},workspaces:e=>{let{userData:t}=e;return(0,s.C)({queryKey:i.TZ.workspaces(),queryFn:async()=>{let e=(0,r.S)();return await e.get("/user/workspaces")},enabled:!!t})},experimentalFeatures:e=>{let{user:t}=e;return(0,s.C)({queryKey:i.TZ.experimentalFeatures(),enabled:!!t&&!!t.idToken,refetchOnWindowFocus:!1,queryFn:async()=>{let e=(0,r.S)();try{return await e.get("/users/".concat(null==t?void 0:t.uid,"/experimental-features"))}catch(e){return a.PW.error("Failed to fetch experimental features",{error:e}),null}}})}}},74225:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});let s=e=>e.replace(/(^\w+:|^)\/\//,"")},20984:function(e,t,n){"use strict";var s,r;n.d(t,{u:function(){return s}}),(r=s||(s={})).ADMIN="admin",r.WRITE="write",r.READ="read",r.NONE="none"},96771:function(e,t,n){"use strict";var s,r,a,i;n.d(t,{I:function(){return s}}),(a=(r=s||(s={})).type||(r.type={})).AI_UPDATE="ai_update",a.REVERT="revert",a.INITIAL="initial",a.DEVELOPER_UPDATE="developer_update",a.MANUAL_UPDATE="manual_update",(i=r.feedback||(r.feedback={})).POSITIVE="positive",i.NEGATIVE="negative",i.NO_FEEDBACK="no_feedback"},72384:function(e,t,n){"use strict";var s,r;n.d(t,{S:function(){return s}}),(r=s||(s={})).AGENT="agent",r.INSTANT="instant"},39674:function(e,t,n){"use strict";var s,r,a;n.d(t,{T:function(){return s}}),(a=(r=s||(s={})).accessibility||(r.accessibility={})).REPO_ACCESSIBLE="repo_accessible",a.REPO_NOT_ACCESSIBLE="repo_not_accessible",a.INSTALLATION_NOT_FOUND="installation_not_found",a.UNAUTHORIZED="unauthorized",a.INSTALLATION_SUSPENDED="installation_suspended",a.REPO_NOT_FOUND="repo_not_found"},6827:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var s=n(59625),r=n(4391);let a={files:{},pendingChanges:{},isLoading:!1,isSyncing:!1,lastSyncTimestamp:void 0,syncError:void 0,uploads:[]},i=(0,s.Ue)()((0,r.n)((e,t)=>({...a,setFile:(t,n)=>e(e=>({files:{...e.files,[t]:n}})),removeFile:t=>e(e=>{let{[t]:n,...s}=e.files;return{files:s}}),updateFileContent:(t,n)=>e(e=>({files:{...e.files,[t]:n}})),setSyncing:t=>e({isSyncing:t,lastSyncTimestamp:t?void 0:Date.now()}),setSyncError:t=>e({syncError:t,isSyncing:!1}),setLoading:t=>e({isLoading:t}),addPendingChange:(t,n)=>e(e=>({pendingChanges:{...e.pendingChanges,[t]:n}})),removePendingChange:t=>e(e=>{let{[t]:n,...s}=e.pendingChanges;return{pendingChanges:s}}),clearPendingChanges:()=>e({pendingChanges:{}}),hasUnsavedChanges:()=>{let{pendingChanges:e}=t();return Object.keys(e).length>0},reset:()=>e({...a}),addUpload:t=>e(e=>({uploads:[...e.uploads,t]})),clearUploads:()=>e({uploads:[]})})))},55214:function(e){e.exports={cursor:"PromptBox_cursor__MuO9l",blink:"PromptBox_blink__F53p4",customProse:"PromptBox_customProse__C94Rw"}}}]);